<!DOCTYPE html><html lang="en" data-reactroot=""><head><meta charset="utf-8"/><meta name="theme-color" content="#2B3A42"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="robots" content="noindex,nofollow"/><title>Combined printable page | webpack</title><meta name="description" content="webpack is a module bundler. Its main purpose is to bundle JavaScript files for usage in a browser, yet it is also capable of transforming, bundling, or packaging just about any resource or asset."/><meta property="og:site_name" content="webpack"/><meta property="og:type" content="website"/><meta property="og:title" content="Combined printable page | webpack"/><meta property="og:description" name="description" content="webpack is a module bundler. Its main purpose is to bundle JavaScript files for usage in a browser, yet it is also capable of transforming, bundling, or packaging just about any resource or asset."/><meta property="og:image" content="/aad9d51e01a0dcc2caf5bee43dc8e647.svg"/><meta property="twitter:card" content="summary"/><meta property="twitter:site" content="@webpack"/><meta property="twitter:creator" content="@webpack"/><meta property="twitter:domain" content="https://webpack.js.org/"/><link rel="icon" type="image/x-icon" href="/bc3effb418df77da9e04825c48a58a49.ico"/><link rel="stylesheet" href="/f6b65dd5eb8462dbda98.css"/><link rel="stylesheet" href="/c44ad5fd69734542f886.css"/><link rel="manifest" href="/manifest.json"/><link rel="canonical" href="https://webpack.js.org/contribute/printable/"/><meta name="mobile-web-app-capable" content="yes"/><link rel="icon" sizes="192x192" href="/icon_192x192.png"/><link rel="icon" sizes="512x512" href="/icon_512x512.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="apple-mobile-web-app-title" content="webpack"/><link rel="apple-touch-icon-precomposed" href="/icon_180x180.png"/><link rel="mask-icon" href="/aad9d51e01a0dcc2caf5bee43dc8e647.svg" color="#465e69"/><meta name="msapplication-TileImage" content="/icon_150x150.png"/><meta name="msapplication-TileColor" content="#465e69"/></head><body><div id="root"><div class="site"><div class="site__header"><div class="notification-bar"><div class="container notification-bar__inner"><p>Sponsor webpack and get apparel from the <a href="https://webpack.threadless.com">official shop</a>! All proceeds go to our <a href="https://opencollective.com/webpack">open collective</a>!</p></div></div><header class="navigation   "><section class="navigation__inner"><button aria-label="Open menu" class="navigation__mobile"><svg viewBox="-62 138 25 25"><g><g><path d="M-60.2,140.2h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,141-61.2,140.2-60.2,140.2z"></path><path d="M-60.2,148.7h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,149.5-61.2,148.7-60.2,148.7z"></path><path d="M-60.2,157.2h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,158-61.2,157.2-60.2,157.2z"></path></g></g></svg></button><a class="navigation__logo" href="/"><img class="logo" src="/e0b5805d423a4ec9473ee315250968b2.svg" alt="webpack logo"/></a><nav class="navigation__items"><a class="navigation__item  " href="/concepts/">Documentation</a><a class="navigation__item  navigation__item--active" href="/contribute/">Contribute</a><a class="navigation__item  " href="/vote/">Vote</a><a href="https://medium.com/webpack" target="_blank" rel="noopener" class="navigation__item  ">Blog</a><a href="https://github.com/webpack/webpack" target="_blank" rel="noopener" title="GitHub Repository" class="navigation__item navigation__item--icon "><i aria-hidden="true" class="icon-github"></i></a><a href="https://twitter.com/webpack" target="_blank" rel="noopener" title="webpack on Twitter" class="navigation__item navigation__item--icon "><i aria-hidden="true" class="icon-twitter"></i></a><a href="https://stackoverflow.com/questions/tagged/webpack" target="_blank" rel="noopener" title="webpack on Stack Overflow" class="navigation__item navigation__item--icon "><i aria-hidden="true" class="icon-stack-overflow"></i></a><span class="navigation__item navigation__item--icon"><nav class="dropdown navigation__languages"><button aria-haspopup="true" aria-expanded="false" aria-label="Select language"><img class="dropdown__language" alt="select language" src="/57c717e75066b659cfe19dc2a643153c.svg"/><i aria-hidden="true" class="dropdown__arrow"></i></button><div class="dropdown__list "><ul><li><a href="https://webpack.js.org/"><span>English</span></a></li><li><a href="https://webpack.docschina.org/"><span lang="zh">中文</span></a></li></ul></div></nav></span></nav><div class="navigation-search "><input type="text" class="navigation-search__input" placeholder="Search this site..." value=""/><button aria-label="Hide search box" class="navigation-search__icon navigation-search__clear"><svg viewBox="-137 138 25 25"><g transform="translate(0,-952.36218)"><path d="M-131.3,1094.4c-0.4,0-0.9,0.1-1.2,0.5c-0.7,0.7-0.7,1.7,0,2.4l5.6,5.6l-5.6,5.6c-0.7,0.7-0.7,1.7,0,2.4 c0.7,0.7,1.7,0.7,2.4,0l5.6-5.6l5.6,5.6c0.7,0.7,1.7,0.7,2.4,0c0.7-0.7,0.7-1.7,0-2.4l-5.6-5.6l5.6-5.6c0.7-0.7,0.7-1.7,0-2.4 c-0.7-0.7-1.7-0.7-2.4,0l-5.6,5.6l-5.6-5.6C-130.5,1094.5-130.9,1094.4-131.3,1094.4L-131.3,1094.4z"></path></g></svg></button><button aria-label="Show search box" class="navigation-search__icon navigation-search__search"><svg viewBox="-137 138 25 25"><g><path d="M-114.6,162.6l-7.5-7.5c-0.6-0.6-0.6-1.6,0-2.1l0,0c0.6-0.6,1.6-0.6,2.1,0l7.5,7.5c0.6,0.6,0.6,1.6,0,2.1l0,0 C-113,163.1-114,163.1-114.6,162.6z"></path><path d="M-134.1,140.9c-3.9,3.9-3.9,10.2,0,14.1s10.2,3.9,14.1,0s3.9-10.2,0-14.1S-130.2,137-134.1,140.9z M-122.1,153 c-2.7,2.7-7.1,2.7-9.8,0s-2.7-7.1,0-9.8s7.1-2.7,9.8,0C-119.4,145.9-119.4,150.2-122.1,153z"></path></g></svg></button></div></section><div class="navigation-sub"><div class="navigation-sub__inner"></div></div></header></div><div class="container site__content"><div class="sponsors"><a href="https://www.ag-grid.com/?utm_source=webpack&amp;utm_medium=banner&amp;utm_campaign=sponsorship" target="_blank" rel="noopener" class="sponsors__content"><img src="/bf176a25b4f8227fea804854c98dc5e2.png"/><img src="/d19378a95ebe6b15d5ddea281138dcf4.svg" style="width:100px"/><div style="margin-top:1em;font-size:2em;text-align:center;color:#535353">ag-grid is proud to partner with webpack</div></a></div><nav class="sidebar site__sidebar"><div class="sidebar__inner"><div class="relative z-0 bg-white dark:bg-gray-100 "><select class="text-gray-600 text-14 px-5 py-5 appearance-none box-border border border-gray-200 border-solid flex-col flex w-full rounded-none bg-transparent bg-none"><option value="5">Webpack 5</option><option selected="" value="4">Webpack 4</option></select><img src="/33e97d95c634809004ee2830b6297e89.svg" class="absolute right-5 top-5 fill-current text-gray-300 z-[-1]" width="20" height="20"/></div><div class="sidebar-item sidebar-item--disabled`"><i class="sidebar-item__toggle icon-vertical-bar"></i><a class="sidebar-item__title sidebar-link__print" href="/contribute/printable/" rel="nofollow" alt="Print" title="Print" target="_blank">Print Section<img src="/96ccbfac58b65e83657a220603e00abe.svg"/></a></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/contribute/">Contribute</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Developers"><a href="/contribute/#developers">Developers</a></li><li class="sidebar-item__anchor" title="How Can I Help?"><a href="/contribute/#how-can-i-help">How Can I Help?</a></li><li class="sidebar-item__anchor" title="Encouraging Employers"><a href="/contribute/#encouraging-employers">Encouraging Employers</a></li><li class="sidebar-item__anchor" title="Your Contributions"><a href="/contribute/#your-contributions">Your Contributions</a></li><li class="sidebar-item__anchor" title="Executives"><a href="/contribute/#executives">Executives</a></li><li class="sidebar-item__anchor" title="Sponsorship"><a href="/contribute/#sponsorship">Sponsorship</a></li><li class="sidebar-item__anchor" title="Anyone Else"><a href="/contribute/#anyone-else">Anyone Else</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/contribute/writers-guide/">Writer&#x27;s Guide</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Process"><a href="/contribute/writers-guide/#process">Process</a></li><li class="sidebar-item__anchor" title="YAML Frontmatter"><a href="/contribute/writers-guide/#yaml-frontmatter">YAML Frontmatter</a></li><li class="sidebar-item__anchor" title="Article Structure"><a href="/contribute/writers-guide/#article-structure">Article Structure</a></li><li class="sidebar-item__anchor" title="Typesetting"><a href="/contribute/writers-guide/#typesetting">Typesetting</a></li><li class="sidebar-item__anchor" title="Formatting"><a href="/contribute/writers-guide/#formatting">Formatting</a></li><li class="sidebar-item__anchor" title="Code"><a href="/contribute/writers-guide/#code">Code</a></li><li class="sidebar-item__anchor" title="Quotation"><a href="/contribute/writers-guide/#quotation">Quotation</a></li><li class="sidebar-item__anchor" title="Lists"><a href="/contribute/writers-guide/#lists">Lists</a></li><li class="sidebar-item__anchor" title="Tables"><a href="/contribute/writers-guide/#tables">Tables</a></li><li class="sidebar-item__anchor" title="Configuration Properties"><a href="/contribute/writers-guide/#configuration-properties">Configuration Properties</a></li><li class="sidebar-item__anchor" title="Quotes"><a href="/contribute/writers-guide/#quotes">Quotes</a></li><li class="sidebar-item__anchor" title="Blockquote"><a href="/contribute/writers-guide/#blockquote">Blockquote</a></li><li class="sidebar-item__anchor" title="Tip"><a href="/contribute/writers-guide/#tip">Tip</a></li><li class="sidebar-item__anchor" title="Assumptions and simplicity"><a href="/contribute/writers-guide/#assumptions-and-simplicity">Assumptions and simplicity</a></li><li class="sidebar-item__anchor" title="Configuration defaults and types"><a href="/contribute/writers-guide/#configuration-defaults-and-types">Configuration defaults and types</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/contribute/writing-a-loader/">Writing a Loader</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Setup"><a href="/contribute/writing-a-loader/#setup">Setup</a></li><li class="sidebar-item__anchor" title="Simple Usage"><a href="/contribute/writing-a-loader/#simple-usage">Simple Usage</a></li><li class="sidebar-item__anchor" title="Complex Usage"><a href="/contribute/writing-a-loader/#complex-usage">Complex Usage</a></li><li class="sidebar-item__anchor" title="Guidelines"><a href="/contribute/writing-a-loader/#guidelines">Guidelines</a></li><li class="sidebar-item__anchor" title="Simple"><a href="/contribute/writing-a-loader/#simple">Simple</a></li><li class="sidebar-item__anchor" title="Chaining"><a href="/contribute/writing-a-loader/#chaining">Chaining</a></li><li class="sidebar-item__anchor" title="Modular"><a href="/contribute/writing-a-loader/#modular">Modular</a></li><li class="sidebar-item__anchor" title="Stateless"><a href="/contribute/writing-a-loader/#stateless">Stateless</a></li><li class="sidebar-item__anchor" title="Loader Utilities"><a href="/contribute/writing-a-loader/#loader-utilities">Loader Utilities</a></li><li class="sidebar-item__anchor" title="Loader Dependencies"><a href="/contribute/writing-a-loader/#loader-dependencies">Loader Dependencies</a></li><li class="sidebar-item__anchor" title="Module Dependencies"><a href="/contribute/writing-a-loader/#module-dependencies">Module Dependencies</a></li><li class="sidebar-item__anchor" title="Common Code"><a href="/contribute/writing-a-loader/#common-code">Common Code</a></li><li class="sidebar-item__anchor" title="Absolute Paths"><a href="/contribute/writing-a-loader/#absolute-paths">Absolute Paths</a></li><li class="sidebar-item__anchor" title="Peer Dependencies"><a href="/contribute/writing-a-loader/#peer-dependencies">Peer Dependencies</a></li><li class="sidebar-item__anchor" title="Testing"><a href="/contribute/writing-a-loader/#testing">Testing</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/contribute/writing-a-plugin/">Writing a Plugin</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Creating a Plugin"><a href="/contribute/writing-a-plugin/#creating-a-plugin">Creating a Plugin</a></li><li class="sidebar-item__anchor" title="Basic plugin architecture"><a href="/contribute/writing-a-plugin/#basic-plugin-architecture">Basic plugin architecture</a></li><li class="sidebar-item__anchor" title="Compiler and Compilation"><a href="/contribute/writing-a-plugin/#compiler-and-compilation">Compiler and Compilation</a></li><li class="sidebar-item__anchor" title="Async event hooks"><a href="/contribute/writing-a-plugin/#async-event-hooks">Async event hooks</a></li><li class="sidebar-item__anchor" title="tapAsync"><a href="/contribute/writing-a-plugin/#tapasync">tapAsync</a></li><li class="sidebar-item__anchor" title="tapPromise"><a href="/contribute/writing-a-plugin/#tappromise">tapPromise</a></li><li class="sidebar-item__anchor" title="Example"><a href="/contribute/writing-a-plugin/#example">Example</a></li><li class="sidebar-item__anchor" title="Different Plugin Shapes"><a href="/contribute/writing-a-plugin/#different-plugin-shapes">Different Plugin Shapes</a></li><li class="sidebar-item__anchor" title="Synchronous Hooks"><a href="/contribute/writing-a-plugin/#synchronous-hooks">Synchronous Hooks</a></li><li class="sidebar-item__anchor" title="Asynchronous Hooks"><a href="/contribute/writing-a-plugin/#asynchronous-hooks">Asynchronous Hooks</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/contribute/writing-a-scaffold/">Writing a Scaffold</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Quick Start"><a href="/contribute/writing-a-scaffold/#quick-start">Quick Start</a></li><li class="sidebar-item__anchor" title="Setup"><a href="/contribute/writing-a-scaffold/#setup">Setup</a></li><li class="sidebar-item__anchor" title="Make it interactive"><a href="/contribute/writing-a-scaffold/#make-it-interactive">Make it interactive</a></li><li class="sidebar-item__anchor" title="Configuring Webpack"><a href="/contribute/writing-a-scaffold/#configuring-webpack">Configuring Webpack</a></li><li class="sidebar-item__anchor" title="Dev Configurations"><a href="/contribute/writing-a-scaffold/#dev-configurations">Dev Configurations</a></li><li class="sidebar-item__anchor" title="Some more configs"><a href="/contribute/writing-a-scaffold/#some-more-configs">Some more configs</a></li><li class="sidebar-item__anchor" title="Basic Scaffold"><a href="/contribute/writing-a-scaffold/#basic-scaffold">Basic Scaffold</a></li><li class="sidebar-item__anchor" title="Add more functionality"><a href="/contribute/writing-a-scaffold/#add-more-functionality">Add more functionality</a></li><li class="sidebar-item__anchor" title="Create string with name"><a href="/contribute/writing-a-scaffold/#create-string-with-name">Create string with name</a></li><li class="sidebar-item__anchor" title="Defining scopes"><a href="/contribute/writing-a-scaffold/#defining-scopes">Defining scopes</a></li><li class="sidebar-item__anchor" title="Configuration nomenclature"><a href="/contribute/writing-a-scaffold/#configuration-nomenclature">Configuration nomenclature</a></li><li class="sidebar-item__anchor" title="About .yo-rc.json"><a href="/contribute/writing-a-scaffold/#about-yo-rcjson">About .yo-rc.json</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/contribute/plugin-patterns/">Plugin Patterns</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Exploring assets, chunks, modules, and dependencies"><a href="/contribute/plugin-patterns/#exploring-assets-chunks-modules-and-dependencies">Exploring assets, chunks, modules, and dependencies</a></li><li class="sidebar-item__anchor" title="Monitoring the watch graph"><a href="/contribute/plugin-patterns/#monitoring-the-watch-graph">Monitoring the watch graph</a></li><li class="sidebar-item__anchor" title="Changed chunks"><a href="/contribute/plugin-patterns/#changed-chunks">Changed chunks</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/contribute/release-process/">Release Process</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Pull Requests"><a href="/contribute/release-process/#pull-requests">Pull Requests</a></li><li class="sidebar-item__anchor" title="Releasing"><a href="/contribute/release-process/#releasing">Releasing</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/contribute/debugging/">Debugging</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Stats"><a href="/contribute/debugging/#stats">Stats</a></li><li class="sidebar-item__anchor" title="DevTools"><a href="/contribute/debugging/#devtools">DevTools</a></li></ul></div></div><div><div class="sidebar-item sidebar-item--open "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/contribute/printable/">Printable</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Contribute"><a href="/contribute/printable/#contribute">Contribute</a></li><li class="sidebar-item__anchor" title="Developers"><a href="/contribute/printable/#developers">Developers</a></li><li class="sidebar-item__anchor" title="How Can I Help?"><a href="/contribute/printable/#how-can-i-help">How Can I Help?</a></li><li class="sidebar-item__anchor" title="Encouraging Employers"><a href="/contribute/printable/#encouraging-employers">Encouraging Employers</a></li><li class="sidebar-item__anchor" title="Your Contributions"><a href="/contribute/printable/#your-contributions">Your Contributions</a></li><li class="sidebar-item__anchor" title="Executives"><a href="/contribute/printable/#executives">Executives</a></li><li class="sidebar-item__anchor" title="Sponsorship"><a href="/contribute/printable/#sponsorship">Sponsorship</a></li><li class="sidebar-item__anchor" title="Anyone Else"><a href="/contribute/printable/#anyone-else">Anyone Else</a></li><li class="sidebar-item__anchor" title="Writer&#x27;s Guide"><a href="/contribute/printable/#writers-guide">Writer&#x27;s Guide</a></li><li class="sidebar-item__anchor" title="Process"><a href="/contribute/printable/#process">Process</a></li><li class="sidebar-item__anchor" title="YAML Frontmatter"><a href="/contribute/printable/#yaml-frontmatter">YAML Frontmatter</a></li><li class="sidebar-item__anchor" title="Article Structure"><a href="/contribute/printable/#article-structure">Article Structure</a></li><li class="sidebar-item__anchor" title="Typesetting"><a href="/contribute/printable/#typesetting">Typesetting</a></li><li class="sidebar-item__anchor" title="Formatting"><a href="/contribute/printable/#formatting">Formatting</a></li><li class="sidebar-item__anchor" title="Code"><a href="/contribute/printable/#code">Code</a></li><li class="sidebar-item__anchor" title="Quotation"><a href="/contribute/printable/#quotation">Quotation</a></li><li class="sidebar-item__anchor" title="Lists"><a href="/contribute/printable/#lists">Lists</a></li><li class="sidebar-item__anchor" title="Tables"><a href="/contribute/printable/#tables">Tables</a></li><li class="sidebar-item__anchor" title="Configuration Properties"><a href="/contribute/printable/#configuration-properties">Configuration Properties</a></li><li class="sidebar-item__anchor" title="Quotes"><a href="/contribute/printable/#quotes">Quotes</a></li><li class="sidebar-item__anchor" title="Blockquote"><a href="/contribute/printable/#blockquote">Blockquote</a></li><li class="sidebar-item__anchor" title="Tip"><a href="/contribute/printable/#tip">Tip</a></li><li class="sidebar-item__anchor" title="Assumptions and simplicity"><a href="/contribute/printable/#assumptions-and-simplicity">Assumptions and simplicity</a></li><li class="sidebar-item__anchor" title="Configuration defaults and types"><a href="/contribute/printable/#configuration-defaults-and-types">Configuration defaults and types</a></li><li class="sidebar-item__anchor" title="Writing a Loader"><a href="/contribute/printable/#writing-a-loader">Writing a Loader</a></li><li class="sidebar-item__anchor" title="Setup"><a href="/contribute/printable/#setup">Setup</a></li><li class="sidebar-item__anchor" title="Simple Usage"><a href="/contribute/printable/#simple-usage">Simple Usage</a></li><li class="sidebar-item__anchor" title="Complex Usage"><a href="/contribute/printable/#complex-usage">Complex Usage</a></li><li class="sidebar-item__anchor" title="Guidelines"><a href="/contribute/printable/#guidelines">Guidelines</a></li><li class="sidebar-item__anchor" title="Simple"><a href="/contribute/printable/#simple">Simple</a></li><li class="sidebar-item__anchor" title="Chaining"><a href="/contribute/printable/#chaining">Chaining</a></li><li class="sidebar-item__anchor" title="Modular"><a href="/contribute/printable/#modular">Modular</a></li><li class="sidebar-item__anchor" title="Stateless"><a href="/contribute/printable/#stateless">Stateless</a></li><li class="sidebar-item__anchor" title="Loader Utilities"><a href="/contribute/printable/#loader-utilities">Loader Utilities</a></li><li class="sidebar-item__anchor" title="Loader Dependencies"><a href="/contribute/printable/#loader-dependencies">Loader Dependencies</a></li><li class="sidebar-item__anchor" title="Module Dependencies"><a href="/contribute/printable/#module-dependencies">Module Dependencies</a></li><li class="sidebar-item__anchor" title="Common Code"><a href="/contribute/printable/#common-code">Common Code</a></li><li class="sidebar-item__anchor" title="Absolute Paths"><a href="/contribute/printable/#absolute-paths">Absolute Paths</a></li><li class="sidebar-item__anchor" title="Peer Dependencies"><a href="/contribute/printable/#peer-dependencies">Peer Dependencies</a></li><li class="sidebar-item__anchor" title="Testing"><a href="/contribute/printable/#testing">Testing</a></li><li class="sidebar-item__anchor" title="Writing a Plugin"><a href="/contribute/printable/#writing-a-plugin">Writing a Plugin</a></li><li class="sidebar-item__anchor" title="Creating a Plugin"><a href="/contribute/printable/#creating-a-plugin">Creating a Plugin</a></li><li class="sidebar-item__anchor" title="Basic plugin architecture"><a href="/contribute/printable/#basic-plugin-architecture">Basic plugin architecture</a></li><li class="sidebar-item__anchor" title="Compiler and Compilation"><a href="/contribute/printable/#compiler-and-compilation">Compiler and Compilation</a></li><li class="sidebar-item__anchor" title="Async event hooks"><a href="/contribute/printable/#async-event-hooks">Async event hooks</a></li><li class="sidebar-item__anchor" title="tapAsync"><a href="/contribute/printable/#tapasync">tapAsync</a></li><li class="sidebar-item__anchor" title="tapPromise"><a href="/contribute/printable/#tappromise">tapPromise</a></li><li class="sidebar-item__anchor" title="Example"><a href="/contribute/printable/#example">Example</a></li><li class="sidebar-item__anchor" title="Different Plugin Shapes"><a href="/contribute/printable/#different-plugin-shapes">Different Plugin Shapes</a></li><li class="sidebar-item__anchor" title="Synchronous Hooks"><a href="/contribute/printable/#synchronous-hooks">Synchronous Hooks</a></li><li class="sidebar-item__anchor" title="Asynchronous Hooks"><a href="/contribute/printable/#asynchronous-hooks">Asynchronous Hooks</a></li><li class="sidebar-item__anchor" title="Writing a Scaffold"><a href="/contribute/printable/#writing-a-scaffold">Writing a Scaffold</a></li><li class="sidebar-item__anchor" title="Quick Start"><a href="/contribute/printable/#quick-start">Quick Start</a></li><li class="sidebar-item__anchor" title="Setup"><a href="/contribute/printable/#setup-1">Setup</a></li><li class="sidebar-item__anchor" title="Make it interactive"><a href="/contribute/printable/#make-it-interactive">Make it interactive</a></li><li class="sidebar-item__anchor" title="Configuring Webpack"><a href="/contribute/printable/#configuring-webpack">Configuring Webpack</a></li><li class="sidebar-item__anchor" title="Dev Configurations"><a href="/contribute/printable/#dev-configurations">Dev Configurations</a></li><li class="sidebar-item__anchor" title="Some more configs"><a href="/contribute/printable/#some-more-configs">Some more configs</a></li><li class="sidebar-item__anchor" title="Basic Scaffold"><a href="/contribute/printable/#basic-scaffold">Basic Scaffold</a></li><li class="sidebar-item__anchor" title="Add more functionality"><a href="/contribute/printable/#add-more-functionality">Add more functionality</a></li><li class="sidebar-item__anchor" title="Create string with name"><a href="/contribute/printable/#create-string-with-name">Create string with name</a></li><li class="sidebar-item__anchor" title="Defining scopes"><a href="/contribute/printable/#defining-scopes">Defining scopes</a></li><li class="sidebar-item__anchor" title="Configuration nomenclature"><a href="/contribute/printable/#configuration-nomenclature">Configuration nomenclature</a></li><li class="sidebar-item__anchor" title="About .yo-rc.json"><a href="/contribute/printable/#about-yo-rcjson">About .yo-rc.json</a></li><li class="sidebar-item__anchor" title="Plugin Patterns"><a href="/contribute/printable/#plugin-patterns">Plugin Patterns</a></li><li class="sidebar-item__anchor" title="Exploring assets, chunks, modules, and dependencies"><a href="/contribute/printable/#exploring-assets-chunks-modules-and-dependencies">Exploring assets, chunks, modules, and dependencies</a></li><li class="sidebar-item__anchor" title="Monitoring the watch graph"><a href="/contribute/printable/#monitoring-the-watch-graph">Monitoring the watch graph</a></li><li class="sidebar-item__anchor" title="Changed chunks"><a href="/contribute/printable/#changed-chunks">Changed chunks</a></li><li class="sidebar-item__anchor" title="Release Process"><a href="/contribute/printable/#release-process">Release Process</a></li><li class="sidebar-item__anchor" title="Pull Requests"><a href="/contribute/printable/#pull-requests">Pull Requests</a></li><li class="sidebar-item__anchor" title="Releasing"><a href="/contribute/printable/#releasing">Releasing</a></li><li class="sidebar-item__anchor" title="Debugging"><a href="/contribute/printable/#debugging">Debugging</a></li><li class="sidebar-item__anchor" title="Stats"><a href="/contribute/printable/#stats">Stats</a></li><li class="sidebar-item__anchor" title="DevTools"><a href="/contribute/printable/#devtools">DevTools</a></li></ul></div></div></div></nav><section class="page"><div class="page-links"><a class="page-links__link" href="https://github.com/webpack/webpack.js.org/edit/master/src/content/contribute/printable.md">Edit Document<i class="page-links__icon icon-edit"></i></a><span class="page-links__gap">|</span><button class="page-links__link page-links__print as-link" title="Print this page">Print Document<img src="/96ccbfac58b65e83657a220603e00abe.svg"/></button></div><div class="markdown"><h1>Printable</h1><div><h1 id="contribute">Contribute<a href="#contribute" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>The people who contribute to webpack do so for the love of open source, our users and ecosystem, and most importantly, pushing the web forward together. Because of our <a href="https://opencollective.com/webpack">Open Collective</a> model for funding and transparency, we are able to funnel support and funds through contributors, dependent projects, and the contributor and core teams. To make a donation, simply click the button below...</p>
<div align="center">
  <a href="https://opencollective.com/webpack/donate" target="_blank">
    <img src="https://opencollective.com/webpack/donate/button@2x.png?color=blue" width=300 />
  </a>
</div>
<p>But what is the return on the investment?</p>
<h2 id="developers">Developers<a href="#developers" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The biggest core feature we'd like to provide is an enjoyable development experience. Developers like you can help by contributing to rich and vibrant documentation, issuing pull requests to help us cover niche use cases, and to help sustain what you love about webpack.</p>
<h3 id="how-can-i-help">How Can I Help?<a href="#how-can-i-help" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Anybody can help by doing any of the following:</p>
<ul>
<li>Ask your employer to use webpack in projects.</li>
<li>Help us write and maintain the content on this site (see the <a href="/contribute/writers-guide/">writer's guide</a>).</li>
<li>Contribute to the <a href="https://github.com/webpack/webpack">core repository</a>.</li>
<li>Become a backer or sponsor on <a href="https://opencollective.com/webpack#support">open collective</a>.</li>
</ul>
<h3 id="encouraging-employers">Encouraging Employers<a href="#encouraging-employers" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>You can ask your employer to improve your workflow by leveraging webpack: an all-in-one tool for fonts, images and image optimization, and json. Explain to them how webpack will attempt to bundle your code and assets the best it can for the smallest file size, leading to speedier sites and applications.</p>
<h3 id="your-contributions">Your Contributions<a href="#your-contributions" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Contributing to webpack is not contributing to an exclusive club. You as a developer are contributing to the overall health of downstream projects. Hundreds, if not thousands, of projects depend on webpack and contributing will make the ecosystem better for all the users.</p>
<p>The remainder of this section of the site is dedicated to developers such as yourself who would like to become a part of our ever-growing community:</p>
<ul>
<li><a href="/contribute/writing-a-loader">Writing a Loader</a></li>
<li><a href="/contribute/writing-a-plugin">Writing a Plugin</a></li>
<li><a href="/contribute/writing-a-scaffold">Writing a Scaffold</a></li>
<li><a href="/contribute/plugin-patterns">Plugin Patterns</a></li>
<li><a href="/contribute/release-process">Release Process</a></li>
</ul>
<h2 id="executives">Executives<a href="#executives" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>CTO's, VPs, and owners can help too!</p>
<!-- add slides here regarding monetary value/dev time/tooling -->
<p>webpack is an all-in-one tool for bundling your code. It can handle fonts, images, data and more with the help of community-driven plugins and loaders. Having all of your assets be handled by one tool is immensely helpful, as you or your team can spend less time making sure a machine with many moving parts is working correctly and more time building your product.</p>
<h3 id="sponsorship">Sponsorship<a href="#sponsorship" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Aside from monetary assistance, companies can support webpack by:</p>
<ul>
<li>Providing developers that are not actively working on a project.</li>
<li>Contributing computing power for improved CI and regression testing.</li>
</ul>
<p>You can also encourage your developers to contribute to the ecosystem by open-sourcing webpack loaders, plugins and other utilities. And, as mentioned above, we would greatly appreciate any help in increasing our CI/CD infrastructure.</p>
<h3 id="anyone-else">Anyone Else<a href="#anyone-else" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>To anyone else who is interested in helping our mission -- e.g. venture capitalists, government entities, digital agencies, etc. -- we would love for you to work with us, one of the top npm packages, to improve your product! Please don't hesitate to reach out with questions.</p>
<!-- add slides here -->
<h1 id="writers-guide">Writer's Guide<a href="#writers-guide" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>The following sections contain all you need to know about editing and formatting the content within this site. Make sure to do some research before starting your edits or additions. Sometimes the toughest part is finding where the content should live and determining whether or not it already exists.</p>
<h2 id="process">Process<a href="#process" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<ol>
<li>Check related issue if an article links to one.</li>
<li>Hit <code>edit</code> and expand on the structure.</li>
<li>PR changes.</li>
</ol>
<h2 id="yaml-frontmatter">YAML Frontmatter<a href="#yaml-frontmatter" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Each article contains a small section at the top written in <a href="https://jekyllrb.com/docs/frontmatter/">YAML Frontmatter</a>:</p>
<pre><code class="hljs language-yaml"><span class="token punctuation">---</span>
<span class="token key atrule">title</span><span class="token punctuation">:</span> My Article
<span class="token key atrule">group</span><span class="token punctuation">:</span> My Sub<span class="token punctuation">-</span>Section
<span class="token key atrule">sort</span><span class="token punctuation">:</span> <span class="token number">3</span>
<span class="token key atrule">contributors</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token punctuation">[</span>github username<span class="token punctuation">]</span>
<span class="token key atrule">related</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">title</span><span class="token punctuation">:</span> Title of Related Article
    <span class="token key atrule">url</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>url of related article<span class="token punctuation">]</span>
<span class="token punctuation">---</span></code></pre>
<p>Let's break these down:</p>
<ul>
<li><code>title</code>: The name of the article.</li>
<li><code>group</code>: The name of the sub-section</li>
<li><code>sort</code>: The order of the article within its section (or) sub-section if it is present.</li>
<li><code>contributors</code>: A list of GitHub usernames who have contributed to this article.</li>
<li><code>related</code>: Any related reading or useful examples.</li>
</ul>
<p>Note that <code>related</code> will generate a <strong>Further Reading</strong> section at the bottom of the page and <code>contributors</code> will yield a <strong>Contributors</strong> section below it. If you edit an article and would like recognition, don't hesitate to add your GitHub username to the <code>contributors</code> list.</p>
<h2 id="article-structure">Article Structure<a href="#article-structure" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<ol>
<li>Brief Introduction - a paragraph or two so you get the basic idea about the what and why.</li>
<li>Outline Remaining Content – how the content will be presented.</li>
<li>Main Content - tell what you promised to tell.</li>
<li>Conclusion - tell what you told and recap the main points.</li>
</ol>
<h2 id="typesetting">Typesetting<a href="#typesetting" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<ul>
<li>webpack should always be written in lower-case letters. Even at the beginning of a sentence. (<a href="https://github.com/webpack/media#name">source</a>)</li>
<li>loaders are enclosed in backticks and <a href="https://en.wikipedia.org/w/index.php?title=Kebab_case">kebab-cased</a>: <code>css-loader</code>, <code>ts-loader</code>, …</li>
<li>plugins are enclosed in backticks and <a href="https://en.wikipedia.org/wiki/Camel_case">camel-cased</a>: <code>BannerPlugin</code>, <code>NpmInstallWebpackPlugin</code>, …</li>
<li>Use "webpack 2" to refer to a specific webpack version (<del>"webpack v2"</del>)</li>
<li>Use ES5; ES2015, ES2016, … to refer to the ECMAScript standards (<del>ES6</del>, <del>ES7</del>)</li>
</ul>
<h2 id="formatting">Formatting<a href="#formatting" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<h3 id="code">Code<a href="#code" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><strong>Syntax: ```javascript … ```</strong></p>
<pre><code class="hljs language-javascript"><span class="token keyword">function</span> <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">'bar'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4 id="quotation">Quotation<a href="#quotation" aria-hidden="true"><span class="icon icon-link"></span></a></h4>
<p>Use single quotes in code snippets and project files (<code>.jsx</code>, <code>.scss</code> etc):</p>
<pre><code class="hljs language-diff"><span class="token deleted">- import webpack from "webpack";</span>
<span class="token inserted">+ import webpack from 'webpack';</span></code></pre>
<p>And in inline backticks:</p>
<p><strong>correct</strong></p>
<p>Set value to <code>'index.md'</code>...</p>
<p><strong>incorrect</strong></p>
<p>Set value to <code>"index.md"</code>...</p>
<h3 id="lists">Lists<a href="#lists" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<ul>
<li>Boo</li>
<li>Foo</li>
<li>Zoo</li>
</ul>
<p>Lists should be ordered alphabetically.</p>
<h3 id="tables">Tables<a href="#tables" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Explanation</th>
<th>Input Type</th>
<th>Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><div class="title"><p>Parameter</p><p>Explanation</p><p>Input Type</p><p>Default Value</p></div>
<div class="content"><p>--debug<p class="description mobile">Switch loaders to debug mode</p></p></div></td>
<td class="description desktop">Switch loaders to debug mode</td>
<td>boolean</td>
<td>false</td>
</tr>
<tr>
<td><div class="title"><p>Parameter</p><p>Explanation</p><p>Input Type</p><p>Default Value</p></div>
<div class="content"><p>--devtool<p class="description mobile">Define source map type for the bundled resources</p></p></div></td>
<td class="description desktop">Define source map type for the bundled resources</td>
<td>string</td>
<td>-</td>
</tr>
<tr>
<td><div class="title"><p>Parameter</p><p>Explanation</p><p>Input Type</p><p>Default Value</p></div>
<div class="content"><p>--progress<p class="description mobile">Print compilation progress in percentage</p></p></div></td>
<td class="description desktop">Print compilation progress in percentage</td>
<td>boolean</td>
<td>false</td>
</tr>
</tbody>
</table>
<p>Tables should also be ordered alphabetically.</p>
<h3 id="configuration-properties">Configuration Properties<a href="#configuration-properties" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>The <a href="/configuration">configuration</a> properties should be ordered alphabetically as well:</p>
<ul>
<li><code>devServer.compress</code></li>
<li><code>devServer.contentBase</code></li>
<li><code>devServer.hot</code></li>
</ul>
<h3 id="quotes">Quotes<a href="#quotes" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<h4 id="blockquote">Blockquote<a href="#blockquote" aria-hidden="true"><span class="icon icon-link"></span></a></h4>
<p><strong>Syntax: ></strong></p>
<blockquote>
<p>This is a blockquote.</p>
</blockquote>
<h4 id="tip">Tip<a href="#tip" aria-hidden="true"><span class="icon icon-link"></span></a></h4>
<p><strong>Syntax: T></strong></p>
<blockquote class="tip">
<p>This is a tip.</p>
</blockquote>
<p><strong>Syntax: W></strong></p>
<blockquote class="warning">
<p>This is a warning.</p>
</blockquote>
<p><strong>Syntax: ?></strong></p>
<blockquote class="todo">
<p>This is a todo.</p>
</blockquote>
<h3 id="assumptions-and-simplicity">Assumptions and simplicity<a href="#assumptions-and-simplicity" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Do not make assumptions when writing the documentation.</p>
<pre><code class="hljs language-diff"><span class="token deleted">- You might already know how to optimize bundle for production...</span>
<span class="token inserted">+ As we've learned in [production guide](/guides/production/)...</span></code></pre>
<p>Please do not assume things are simple. Avoid words like 'just', 'simply'.</p>
<pre><code class="hljs language-diff"><span class="token deleted">- Simply run command...</span>
<span class="token inserted">+ Run the `command-name` command...</span></code></pre>
<h3 id="configuration-defaults-and-types">Configuration defaults and types<a href="#configuration-defaults-and-types" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Always provide types and defaults to all of the documentation options in order to keep the documentation accessible and well-written. We are adding types and defaults after entitling the documented option:</p>
<p><strong>configuration.example.option</strong></p>
<p><code>string = 'none'</code></p>
<p>Where <code>= 'none'</code> means that the default value is <code>'none'</code> for the given option.</p>
<p><code>string = 'none': 'none' | 'development' | 'production'</code></p>
<p>Where <code>: 'none' | 'development' | 'production'</code> enumerates the possible type values, in this case, three strings are acceptable: <code>'none'</code>, <code>'development'</code>, and <code>'production'</code>.</p>
<p>Use space between types to list all available types for the given option:</p>
<p><code>string = 'none': 'none' | 'development' | 'production'</code> <code>boolean</code></p>
<p>To mark an array, use square brackets:</p>
<p><code>string</code> <code>[string]</code></p>
<p>If multiple types are allowed in <code>array</code>, use comma:</p>
<p><code>string</code> <code>[string, RegExp, function(arg) => string]</code></p>
<p>To mark a function, also list arguments when they are available:</p>
<p><code>function (compilation, module, path) => boolean</code></p>
<p>Where <code>(compilation, module, path)</code> lists the arguments that the provided function will receive and <code>=> boolean</code> means that the return value of the function must be a <code>boolean</code>.</p>
<p>To mark a Plugin as an available option value type, use the camel case title of the <code>Plugin</code>:</p>
<p><code>TerserPlugin</code> <code>[TerserPlugin]</code></p>
<p>Which means that the option expects one or few <code>TerserPlugin</code> instances.</p>
<p>To mark a number, use <code>number</code>:</p>
<p><code>number = 15: 5, 15, 30</code></p>
<p>To mark an object, use <code>object</code>:</p>
<p><code>object = { prop1 string = 'none': 'none' | 'development' | 'production', prop2 boolean = false, prop3 function (module) => string }</code></p>
<p>When object's key can have multiple types, use <code>|</code> to list them. Here is an example, where <code>prop1</code> can be both a string and an array of strings:</p>
<p><code>object = { prop1 string = 'none': 'none' | 'development' | 'production' | [string]}</code></p>
<p>This allows us to display the defaults, enumeration and other information.</p>
<p>If the object's key is dynamic, user-defined, use <code>&#x3C;key></code> to describe it:</p>
<p><code>object = { &#x3C;key> string }</code></p>
<h1 id="writing-a-loader">Writing a Loader<a href="#writing-a-loader" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>A loader is a node module that exports a function. This function is called when a resource should be transformed by this loader. The given function will have access to the <a href="/api/loaders/">Loader API</a> using the <code>this</code> context provided to it.</p>
<h2 id="setup">Setup<a href="#setup" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Before we dig into the different types of loaders, their usage, and examples, let's take a look at the three ways you can develop and test a loader locally.</p>
<p>To test a single loader, you can simply use <code>path</code> to <code>resolve</code> a local file within a rule object:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'path/to/loader.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>To test multiple, you can utilize the <code>resolveLoader.modules</code> configuration to update where webpack will search for loaders. For example, if you had a local <code>/loaders</code> directory in your project:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolveLoader<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    modules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token string">'node_modules'</span><span class="token punctuation">,</span>
      path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'loaders'</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>Last but not least, if you've already created a separate repository and package for your loader, you could <a href="https://docs.npmjs.com/cli/link"><code>npm link</code></a> it to the project in which you'd like to test it out.</p>
<h2 id="simple-usage">Simple Usage<a href="#simple-usage" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>When a single loader is applied to the resource, the loader is called with only one parameter -- a string containing the content of the resource file.</p>
<p>Synchronous loaders can simply <code>return</code> a single value representing the transformed module. In more complex cases, the loader can return any number of values by using the <code>this.callback(err, values...)</code> function. Errors are either passed to the <code>this.callback</code> function or thrown in a sync loader.</p>
<p>The loader is expected to give back one or two values. The first value is a resulting JavaScript code as string or buffer. The second optional value is a SourceMap as JavaScript object.</p>
<h2 id="complex-usage">Complex Usage<a href="#complex-usage" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>When multiple loaders are chained, it is important to remember that they are executed in reverse order -- either right to left or bottom to top depending on array format.</p>
<ul>
<li>The last loader, called first, will be passed the contents of the raw resource.</li>
<li>The first loader, called last, is expected to return JavaScript and an optional source map.</li>
<li>The loaders in between will be executed with the result(s) of the previous loader in the chain.</li>
</ul>
<p>So, in the following example, the <code>foo-loader</code> would be passed the raw resource and the <code>bar-loader</code> would receive the output of the <code>foo-loader</code> and return the final transformed module and a source map if necessary.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token string">'bar-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'foo-loader'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h2 id="guidelines">Guidelines<a href="#guidelines" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The following guidelines should be followed when writing a loader. They are ordered in terms of importance and some only apply in certain scenarios, read the detailed sections that follow for more information.</p>
<ul>
<li>Keep them <strong>simple</strong>.</li>
<li>Utilize <strong>chaining</strong>.</li>
<li>Emit <strong>modular</strong> output.</li>
<li>Make sure they're <strong>stateless</strong>.</li>
<li>Employ <strong>loader utilities</strong>.</li>
<li>Mark <strong>loader dependencies</strong>.</li>
<li>Resolve <strong>module dependencies</strong>.</li>
<li>Extract <strong>common code</strong>.</li>
<li>Avoid <strong>absolute paths</strong>.</li>
<li>Use <strong>peer dependencies</strong>.</li>
</ul>
<h3 id="simple">Simple<a href="#simple" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Loaders should do only a single task. This not only makes the job of maintaining each loader easier, but also allows them to be chained for usage in more scenarios.</p>
<h3 id="chaining">Chaining<a href="#chaining" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Take advantage of the fact that loaders can be chained together. Instead of writing a single loader that tackles five tasks, write five simpler loaders that divide this effort. Isolating them not only keeps each individual loader simple, but may allow for them to be used for something you hadn't thought of originally.</p>
<p>Take the case of rendering a template file with data specified via loader options or query parameters. It could be written as a single loader that compiles the template from source, executes it and returns a module that exports a string containing the HTML code. However, in accordance with guidelines, a simple <code>apply-loader</code> exists that can be chained with other open source loaders:</p>
<ul>
<li><code>jade-loader</code>: Convert template to a module that exports a function.</li>
<li><code>apply-loader</code>: Executes the function with loader options and returns raw HTML.</li>
<li><code>html-loader</code>: Accepts HTML and outputs a valid JavaScript module.</li>
</ul>
<blockquote class="tip">
<p>The fact that loaders can be chained also means they don't necessarily have to output JavaScript. As long as the next loader in the chain can handle its output, the loader can return any type of module.</p>
</blockquote>
<h3 id="modular">Modular<a href="#modular" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Keep the output modular. Loader generated modules should respect the same design principles as normal modules.</p>
<h3 id="stateless">Stateless<a href="#stateless" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Make sure the loader does not retain state between module transformations. Each run should always be independent of other compiled modules as well as previous compilations of the same module.</p>
<h3 id="loader-utilities">Loader Utilities<a href="#loader-utilities" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Take advantage of the <a href="https://github.com/webpack/loader-utils"><code>loader-utils</code></a> package. It provides a variety of useful tools but one of the most common is retrieving the options passed to the loader. Along with <code>loader-utils</code>, the <a href="https://github.com/webpack-contrib/schema-utils"><code>schema-utils</code></a> package should be used for consistent JSON Schema based validation of loader options. Here's a brief example that utilizes both:</p>
<p><strong>loader.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> getOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'loader-utils'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> validateOptions <span class="token keyword">from</span> <span class="token string">'schema-utils'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> schema <span class="token operator">=</span> <span class="token punctuation">{</span>
  type<span class="token punctuation">:</span> <span class="token string">'object'</span><span class="token punctuation">,</span>
  properties<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    test<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'string'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token function">getOptions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">validateOptions</span><span class="token punctuation">(</span>schema<span class="token punctuation">,</span> options<span class="token punctuation">,</span> <span class="token string">'Example Loader'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Apply some transformations to the source...</span>

  <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`export default </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span> <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="loader-dependencies">Loader Dependencies<a href="#loader-dependencies" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>If a loader uses external resources (i.e. by reading from filesystem), they <strong>must</strong> indicate it. This information is used to invalidate cacheable loaders and recompile in watch mode. Here's a brief example of how to accomplish this using the <code>addDependency</code> method:</p>
<p><strong>loader.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">'path'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> callback <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> headerPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'header.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addDependency</span><span class="token punctuation">(</span>headerPath<span class="token punctuation">)</span><span class="token punctuation">;</span>

  fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>headerPath<span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> header<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> header <span class="token operator">+</span> <span class="token string">'\n'</span> <span class="token operator">+</span> source<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="module-dependencies">Module Dependencies<a href="#module-dependencies" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Depending on the type of module, there may be a different schema used to specify dependencies. In CSS for example, the <code>@import</code> and <code>url(...)</code> statements are used. These dependencies should be resolved by the module system.</p>
<p>This can be done in one of two ways:</p>
<ul>
<li>By transforming them to <code>require</code> statements.</li>
<li>Using the <code>this.resolve</code> function to resolve the path.</li>
</ul>
<p>The <code>css-loader</code> is a good example of the first approach. It transforms dependencies to <code>require</code>s, by replacing <code>@import</code> statements with a <code>require</code> to the other stylesheet and <code>url(...)</code> with a <code>require</code> to the referenced file.</p>
<p>In the case of the <code>less-loader</code>, it cannot transform each <code>@import</code> to a <code>require</code> because all <code>.less</code> files must be compiled in one pass for variables and mixin tracking. Therefore, the <code>less-loader</code> extends the less compiler with custom path resolving logic. It then takes advantage of the second approach, <code>this.resolve</code>, to resolve the dependency through webpack.</p>
<blockquote class="tip">
<p>If the language only accepts relative urls (e.g. <code>url(file)</code> always refers to <code>./file</code>), you can use the <code>~</code> convention to specify references to installed modules (e.g. those in <code>node_modules</code>). So, in the case of <code>url</code>, that would look something like <code>url('~some-library/image.jpg')</code>.</p>
</blockquote>
<h3 id="common-code">Common Code<a href="#common-code" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Avoid generating common code in every module the loader processes. Instead, create a runtime file in the loader and generate a <code>require</code> to that shared module.</p>
<h3 id="absolute-paths">Absolute Paths<a href="#absolute-paths" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Don't insert absolute paths into the module code as they break hashing when the root for the project is moved. There's a <a href="https://github.com/webpack/loader-utils#stringifyrequest"><code>stringifyRequest</code></a> method in <code>loader-utils</code> which can be used to convert an absolute path to a relative one.</p>
<h3 id="peer-dependencies">Peer Dependencies<a href="#peer-dependencies" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>If the loader you're working on is a simple wrapper around another package, then you should include the package as a <code>peerDependency</code>. This approach allows the application's developer to specify the exact version in the <code>package.json</code> if desired.</p>
<p>For instance, the <code>sass-loader</code> <a href="https://github.com/webpack-contrib/sass-loader/blob/master/package.json">specifies <code>node-sass</code></a> as peer dependency like so:</p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">"peerDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"node-sass"</span><span class="token operator">:</span> <span class="token string">"^4.0.0"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h2 id="testing">Testing<a href="#testing" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>So you've written a loader, followed the guidelines above, and have it set up to run locally. What's next? Let's go through a simple unit testing example to ensure our loader is working the way we expect. We'll be using the <a href="https://jestjs.io/">Jest</a> framework to do this. We'll also install <code>babel-jest</code> and some presets that will allow us to use the <code>import</code> / <code>export</code> and <code>async</code> / <code>await</code>. Let's start by installing and saving these as a <code>devDependencies</code>:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev jest babel-jest babel-preset-env</code></pre>
<p><strong>.babelrc</strong></p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">"presets"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>
    <span class="token string">"env"</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">"targets"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"node"</span><span class="token operator">:</span> <span class="token string">"4"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre>
<p>Our loader will process <code>.txt</code> files and simply replace any instance of <code>[name]</code> with the <code>name</code> option given to the loader. Then it will output a valid JavaScript module containing the text as its default export:</p>
<p><strong>src/loader.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> getOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'loader-utils'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">loader</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token function">getOptions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  source <span class="token operator">=</span> source<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\[name\]/g</span><span class="token punctuation">,</span> options<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`export default </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span> <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>We'll use this loader to process the following file:</p>
<p><strong>test/example.txt</strong></p>
<pre><code class="hljs language-bash">Hey <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token operator">!</span></code></pre>
<p>Pay close attention to this next step as we'll be using the <a href="/api/node">Node.js API</a> and <a href="https://github.com/webpack/memory-fs"><code>memory-fs</code></a> to execute webpack. This lets us avoid emitting <code>output</code> to disk and will give us access to the <code>stats</code> data which we can use to grab our transformed module:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack memory-fs</code></pre>
<p><strong>test/compiler.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">'path'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> webpack <span class="token keyword">from</span> <span class="token string">'webpack'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> memoryfs <span class="token keyword">from</span> <span class="token string">'memory-fs'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span>fixture<span class="token punctuation">,</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    context<span class="token punctuation">:</span> __dirname<span class="token punctuation">,</span>
    entry<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`./</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fixture<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">,</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span><span class="token punctuation">,</span>
      filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.txt$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          loader<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../src/loader.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            name<span class="token punctuation">:</span> <span class="token string">'Alice'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  compiler<span class="token punctuation">.</span>outputFileSystem <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">memoryfs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    compiler<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> stats<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">hasErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>errors<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token function">resolve</span><span class="token punctuation">(</span>stats<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<blockquote class="tip">
<p>In this case, we've inlined our webpack configuration but you can also accept a configuration as a parameter to the exported function. This would allow you to test multiple setups using the same compiler module.</p>
</blockquote>
<p>And now, finally, we can write our test and add an npm script to run it:</p>
<p><strong>test/loader.test.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">import</span> compiler <span class="token keyword">from</span> <span class="token string">'./compiler.js'</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Inserts name and outputs JavaScript'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> stats <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">compiler</span><span class="token punctuation">(</span><span class="token string">'example.txt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> output <span class="token operator">=</span> stats<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>modules<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>source<span class="token punctuation">;</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>output<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">'export default "Hey Alice!\\n"'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><strong>package.json</strong></p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"jest"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>With everything in place, we can run it and see if our new loader passes the test:</p>
<pre><code class="hljs language-bash"> PASS  test/loader.test.js
  ✓ Inserts name and outputs JavaScript <span class="token punctuation">(</span>229ms<span class="token punctuation">)</span>

Test Suites: 1 passed, 1 total
Tests:       1 passed, 1 total
Snapshots:   0 total
Time:        1.853s, estimated 2s
Ran all <span class="token function">test</span> suites.</code></pre>
<p>It worked! At this point you should be ready to start developing, testing, and deploying your own loaders. We hope that you'll share your creations with the rest of the community!</p>
<h1 id="writing-a-plugin">Writing a Plugin<a href="#writing-a-plugin" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>Plugins expose the full potential of the webpack engine to third-party developers. Using staged build callbacks, developers can introduce their own behaviors into the webpack build process. Building plugins is a bit more advanced than building loaders, because you'll need to understand some of the webpack low-level internals to hook into them. Be prepared to read some source code!</p>
<h2 id="creating-a-plugin">Creating a Plugin<a href="#creating-a-plugin" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>A plugin for webpack consists of:</p>
<ul>
<li>A named JavaScript function or a JavaScript class.</li>
<li>Defines <code>apply</code> method in its prototype.</li>
<li>Specifies an <a href="/api/compiler-hooks/">event hook</a> to tap into.</li>
<li>Manipulates webpack internal instance specific data.</li>
<li>Invokes webpack provided callback after functionality is complete.</li>
</ul>
<pre><code class="hljs language-javascript"><span class="token comment">// A JavaScript class.</span>
<span class="token keyword">class</span> <span class="token class-name">MyExampleWebpackPlugin</span> <span class="token punctuation">{</span>
  <span class="token comment">// Define `apply` as its prototype method which is supplied with compiler as its argument</span>
  <span class="token function">apply</span><span class="token punctuation">(</span>compiler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Specify the event hook to attach to</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>emit<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span>
      <span class="token string">'MyExampleWebpackPlugin'</span><span class="token punctuation">,</span>
      <span class="token punctuation">(</span>compilation<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'This is an example plugin!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Here’s the `compilation` object which represents a single build of assets:'</span><span class="token punctuation">,</span> compilation<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Manipulate the build using the plugin API provided by webpack</span>
        compilation<span class="token punctuation">.</span><span class="token function">addModule</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h2 id="basic-plugin-architecture">Basic plugin architecture<a href="#basic-plugin-architecture" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Plugins are instantiated objects with an <code>apply</code> method on their prototype. This <code>apply</code> method is called once by the webpack compiler while installing the plugin. The <code>apply</code> method is given a reference to the underlying webpack compiler, which grants access to compiler callbacks. A simple plugin is structured as follows:</p>
<pre><code class="hljs language-javascript"><span class="token keyword">class</span> <span class="token class-name">HelloWorldPlugin</span> <span class="token punctuation">{</span>
  <span class="token function">apply</span><span class="token punctuation">(</span>compiler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>done<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'Hello World Plugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>
      stats <span class="token comment">/* stats is passed as argument when done hook is tapped.  */</span>
    <span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello World!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> HelloWorldPlugin<span class="token punctuation">;</span></code></pre>
<p>Then to use the plugin, include an instance in your webpack config <code>plugins</code> array:</p>
<pre><code class="hljs language-javascript"><span class="token comment">// webpack.config.js</span>
<span class="token keyword">var</span> HelloWorldPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'hello-world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ... config settings here ...</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">HelloWorldPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> options<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h2 id="compiler-and-compilation">Compiler and Compilation<a href="#compiler-and-compilation" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Among the two most important resources while developing plugins are the <a href="/api/node/#compiler-instance"><code>compiler</code></a> and <a href="/api/compilation-hooks/"><code>compilation</code></a> objects. Understanding their roles is an important first step in extending the webpack engine.</p>
<pre><code class="hljs language-javascript"><span class="token keyword">class</span> <span class="token class-name">HelloCompilationPlugin</span> <span class="token punctuation">{</span>
  <span class="token function">apply</span><span class="token punctuation">(</span>compiler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Tap into compilation hook which gives compilation as argument to the callback function</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>compilation<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'HelloCompilationPlugin'</span><span class="token punctuation">,</span> compilation <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// Now we can tap into various hooks available through compilation</span>
      compilation<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'HelloCompilationPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Assets are being optimized.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> HelloCompilationPlugin<span class="token punctuation">;</span></code></pre>
<p>The list of hooks available on the <code>compiler</code>, <code>compilation</code>, and other important objects, see the <a href="/api/plugins/">plugins API</a> docs.</p>
<h2 id="async-event-hooks">Async event hooks<a href="#async-event-hooks" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Some plugin hooks are asynchronous. To tap into them, we can use <code>tap</code> method which will behave in synchronous manner or use one of <code>tapAsync</code> method or <code>tapPromise</code> method which are asynchronous methods.</p>
<h3 id="tapasync">tapAsync<a href="#tapasync" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>When we use <code>tapAsync</code> method to tap into plugins, we need to call the callback function which is supplied as the last argument to our function.</p>
<pre><code class="hljs language-javascript"><span class="token keyword">class</span> <span class="token class-name">HelloAsyncPlugin</span> <span class="token punctuation">{</span>
  <span class="token function">apply</span><span class="token punctuation">(</span>compiler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>emit<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">'HelloAsyncPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>compilation<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// Do something async...</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Done with async work...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> HelloAsyncPlugin<span class="token punctuation">;</span></code></pre>
<h4 id="tappromise">tapPromise<a href="#tappromise" aria-hidden="true"><span class="icon icon-link"></span></a></h4>
<p>When we use <code>tapPromise</code> method to tap into plugins, we need to return a promise which resolves when our asynchronous task is completed.</p>
<pre><code class="hljs language-javascript"><span class="token keyword">class</span> <span class="token class-name">HelloAsyncPlugin</span> <span class="token punctuation">{</span>
  <span class="token function">apply</span><span class="token punctuation">(</span>compiler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>emit<span class="token punctuation">.</span><span class="token function">tapPromise</span><span class="token punctuation">(</span><span class="token string">'HelloAsyncPlugin'</span><span class="token punctuation">,</span> compilation <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// return a Promise that resolves when we are done...</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Done with async work...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> HelloAsyncPlugin<span class="token punctuation">;</span></code></pre>
<h2 id="example">Example<a href="#example" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Once we can latch onto the webpack compiler and each individual compilations, the possibilities become endless for what we can do with the engine itself. We can reformat existing files, create derivative files, or fabricate entirely new assets.</p>
<p>Let's write a simple example plugin that generates a new build file called <code>filelist.md</code>; the contents of which will list all of the asset files in our build. This plugin might look something like this:</p>
<pre><code class="hljs language-javascript"><span class="token keyword">class</span> <span class="token class-name">FileListPlugin</span> <span class="token punctuation">{</span>
  <span class="token function">apply</span><span class="token punctuation">(</span>compiler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// emit is asynchronous hook, tapping into it using tapAsync, you can use tapPromise/tap(synchronous) as well</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>emit<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">'FileListPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>compilation<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// Create a header string for the generated file:</span>
      <span class="token keyword">var</span> filelist <span class="token operator">=</span> <span class="token string">'In this build:\n\n'</span><span class="token punctuation">;</span>

      <span class="token comment">// Loop through all compiled assets,</span>
      <span class="token comment">// adding a new line item for each filename.</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> filename <span class="token keyword">in</span> compilation<span class="token punctuation">.</span>assets<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        filelist <span class="token operator">+=</span> <span class="token string">'- '</span> <span class="token operator">+</span> filename <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// Insert this list into the webpack build as a new file asset:</span>
      compilation<span class="token punctuation">.</span>assets<span class="token punctuation">[</span><span class="token string">'filelist.md'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        source<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> filelist<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        size<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> filelist<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>

      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> FileListPlugin<span class="token punctuation">;</span></code></pre>
<h2 id="different-plugin-shapes">Different Plugin Shapes<a href="#different-plugin-shapes" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>A plugin can be classified into types based on the event hooks it taps into. Every event hook is pre-defined as synchronous or asynchronous or waterfall or parallel hook and hook is called internally using call/callAsync method. The list of hooks that are supported or can be tapped into are generally specified in <code>this.hooks</code> property.</p>
<p>For example:</p>
<pre><code class="hljs language-javascript"><span class="token keyword">this</span><span class="token punctuation">.</span>hooks <span class="token operator">=</span> <span class="token punctuation">{</span>
  shouldEmit<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">SyncBailHook</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'compilation'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>It represents that the only hook supported is <code>shouldEmit</code> which is a hook of <code>SyncBailHook</code> type and the only parameter which will be passed to any plugin that taps into <code>shouldEmit</code> hook is <code>compilation</code>.</p>
<p>Various types of hooks supported are :</p>
<h3 id="synchronous-hooks">Synchronous Hooks<a href="#synchronous-hooks" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<ul>
<li>
<p><strong>SyncHook</strong></p>
<ul>
<li>Defined as <code>new SyncHook([params])</code></li>
<li>Tapped into using <code>tap</code> method.</li>
<li>Called using <code>call(...params)</code> method.</li>
</ul>
</li>
<li>
<p><strong>Bail Hooks</strong></p>
<ul>
<li>Defined using <code>SyncBailHook[params]</code></li>
<li>Tapped into using <code>tap</code> method.</li>
<li>Called using <code>call(...params)</code> method.</li>
</ul>
<p>In these type of hooks, each of the plugin callbacks will be invoked one after the other with the specific <code>args</code>. If any value is returned except undefined by any plugin, then that value is returned by hook and no further plugin callback is invoked. Many useful events like <code>optimizeChunks</code>, <code>optimizeChunkModules</code> are SyncBailHooks.</p>
</li>
<li>
<p><strong>Waterfall Hooks</strong></p>
<ul>
<li>Defined using <code>SyncWaterfallHook[params]</code></li>
<li>Tapped into using <code>tap</code> method.</li>
<li>Called using <code>call( ... params)</code> method</li>
</ul>
<p>Here each of the plugins are called one after the other with the arguments from the return value of the previous plugin. The plugin must take the order of its execution into account.
It must accept arguments from the previous plugin that was executed. The value for the first plugin is <code>init</code>. Hence at least 1 param must be supplied for waterfall hooks. This pattern is used in the Tapable instances which are related to the webpack templates like <code>ModuleTemplate</code>, <code>ChunkTemplate</code> etc.</p>
</li>
</ul>
<h3 id="asynchronous-hooks">Asynchronous Hooks<a href="#asynchronous-hooks" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<ul>
<li>
<p><strong>Async Series Hook</strong></p>
<ul>
<li>Defined using <code>AsyncSeriesHook[params]</code></li>
<li>Tapped into using <code>tap</code>/<code>tapAsync</code>/<code>tapPromise</code> method.</li>
<li>Called using <code>callAsync( ... params)</code> method</li>
</ul>
<p>The plugin handler functions are called with all arguments and a callback function with the signature <code>(err?: Error) -> void</code>. The handler functions are called in order of registration. <code>callback</code> is called after all the handlers are called.
This is also a commonly used pattern for events like <code>emit</code>, <code>run</code>.</p>
</li>
<li>
<p><strong>Async waterfall</strong> The plugins will be applied asynchronously in the waterfall manner.</p>
<ul>
<li>Defined using <code>AsyncWaterfallHook[params]</code></li>
<li>Tapped into using <code>tap</code>/<code>tapAsync</code>/<code>tapPromise</code> method.</li>
<li>Called using <code>callAsync( ... params)</code> method</li>
</ul>
<p>The plugin handler functions are called with the current value and a callback function with the signature <code>(err: Error, nextValue: any) -> void.</code> When called <code>nextValue</code> is the current value for the next handler. The current value for the first handler is <code>init</code>. After all handlers are applied, callback is called with the last value. If any handler passes a value for <code>err</code>, the callback is called with this error and no more handlers are called.
This plugin pattern is expected for events like <code>before-resolve</code> and <code>after-resolve</code>.</p>
</li>
<li>
<p><strong>Async Series Bail</strong></p>
<ul>
<li>Defined using <code>AsyncSeriesBailHook[params]</code></li>
<li>Tapped into using <code>tap</code>/<code>tapAsync</code>/<code>tapPromise</code> method.</li>
<li>Called using <code>callAsync( ... params)</code> method</li>
</ul>
</li>
<li>
<p><strong>Async Parallel</strong></p>
<ul>
<li>Defined using <code>AsyncParallelHook[params]</code></li>
<li>Tapped into using <code>tap</code>/<code>tapAsync</code>/<code>tapPromise</code> method.</li>
<li>Called using <code>callAsync( ... params)</code> method</li>
</ul>
</li>
</ul>
<h1 id="writing-a-scaffold">Writing a Scaffold<a href="#writing-a-scaffold" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>A scaffold is an ECMAScript Module which exports a <code>yeoman generator</code> based on <a href="/guides/scaffolding/#api">Scaffolding API</a>. Scaffolds can be used but not limited to initialize a new webpack project, tailored to a specific use case. To view what we are building today, run <code>webpack init webpack-scaffold-demo</code>. This demo will show you how to build your own webpack scaffold. Let's start by creating a file named <code>generator.js</code>.</p>
<h2 id="quick-start">Quick Start<a href="#quick-start" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p><a href="https://github.com/rishabh3112/webpack-scaffold-starter"><code>webpack-scaffold-starter</code></a> can be used to setup a new scaffold project. To do so, follow the following commands.</p>
<pre><code class="hljs language-bash"><span class="token function">mkdir</span> my-scaffold <span class="token operator">&#x26;&#x26;</span> <span class="token function">cd</span> my-scaffold
<span class="token function">npm</span> <span class="token function">install</span> webpack-scaffold-starter
npx webpack-scaffold
<span class="token function">git</span> init <span class="token comment"># optional</span></code></pre>
<h2 id="setup-1">Setup<a href="#setup-1" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Before writing a <code>webpack-cli</code> scaffold, think about what you're trying to achieve. Do you want a "general" scaffold that could be used by any project or type of app? Do you want something focused, like a scaffold that writes both your <code>webpack.config.js</code> and your framework code? It's also useful to think about the user experience for your scaffold.</p>
<p><code>webpack-cli</code> offers interactive experience to customize the output accordingly. For example asking questions like: "What is your entry point?".</p>
<p>Let's create our skeleton. In order for the webpack CLI to detect our options, we have to define some properties in the constructor.</p>
<p><strong>generator.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> Generator <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'yeoman-generator'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">WebpackGenerator</span> <span class="token keyword">extends</span> <span class="token class-name">Generator</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> opts<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> opts<span class="token punctuation">)</span><span class="token punctuation">;</span>
    opts<span class="token punctuation">.</span>env<span class="token punctuation">.</span>configuration <span class="token operator">=</span> <span class="token punctuation">{</span>
      dev<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p><code>configuration</code> object has to have one property you name (we named it <code>dev</code> in the snippet above). A good practice is to name the underlying property with the name you want to give to your <code>webpack.config.js</code> file for a better indication of what configuration each file has.</p>
<h2 id="make-it-interactive">Make it interactive<a href="#make-it-interactive" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>In order for us to interact with the users, we make use of the <a href="http://yeoman.io/authoring/user-interactions.html"><code>prompting</code></a> method yeoman has. In this method, we can get various answers from the user, like asking for entry points or plugins. You can either manually create each object representing a question or you can make good use of our utilities from <a href="https://github.com/webpack/webpack-cli/tree/master/packages/webpack-scaffold"><code>webpack-scaffold</code></a>. We are in a good mood today, so let's build a configuration only if the user chooses <code>Pengwings</code>.</p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> Generator <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'yeoman-generator'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> List <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@webpack-cli/webpack-scaffold'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>List<span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">WebpackGenerator</span> <span class="token keyword">extends</span> <span class="token class-name">Generator</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> opts<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> opts<span class="token punctuation">)</span><span class="token punctuation">;</span>
    opts<span class="token punctuation">.</span>env<span class="token punctuation">.</span>configuration <span class="token operator">=</span> <span class="token punctuation">{</span>
      dev<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">prompting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token function">List</span><span class="token punctuation">(</span><span class="token string">'confirm'</span><span class="token punctuation">,</span> <span class="token string">'Welcome to the demo scaffold! Are you ready?'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'Yes'</span><span class="token punctuation">,</span> <span class="token string">'No'</span><span class="token punctuation">,</span> <span class="token string">'Pengwings'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>answer <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>answer<span class="token punctuation">[</span><span class="token string">'confirm'</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'Pengwings'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// build the configuration</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h2 id="configuring-webpack">Configuring Webpack<a href="#configuring-webpack" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>So far, we've made an interaction with the user. If you were coding along, great! So how do we proceed from here? Let's try to build a simple webpack configuration that has an <a href="/configuration/entry-context/#entry">entry point</a>, an <a href="/concepts/#output">output</a>, and a <a href="/configuration/entry-context/#context">context property</a>. For this, we need to create a <code>webpackOptions</code> property on our <code>dev</code> object. This is where <code>entry</code>, <code>output</code> and <code>context</code> is going to be hooked up, later resulting in a <code>webpack.config.js</code>.</p>
<blockquote class="tip">
<p>Define the <code>webpackOptions</code> property in the constructor to keep your scaffold as clean as possible!</p>
</blockquote>
<pre><code class="hljs language-js"><span class="token keyword">const</span> Generator <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'yeoman-generator'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> List <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@webpack-cli/webpack-scaffold'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>List<span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">WebpackGenerator</span> <span class="token keyword">extends</span> <span class="token class-name">Generator</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> opts<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> opts<span class="token punctuation">)</span><span class="token punctuation">;</span>
    opts<span class="token punctuation">.</span>env<span class="token punctuation">.</span>configuration <span class="token operator">=</span> <span class="token punctuation">{</span>
      dev<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        webpackOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">prompting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token function">List</span><span class="token punctuation">(</span><span class="token string">'confirm'</span><span class="token punctuation">,</span> <span class="token string">'Welcome to the demo scaffold! Are you ready?'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'Yes'</span><span class="token punctuation">,</span> <span class="token string">'No'</span><span class="token punctuation">,</span> <span class="token string">'Pengwings'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>answer <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>answer<span class="token punctuation">[</span><span class="token string">'confirm'</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'Pengwings'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// build the configuration</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h2 id="dev-configurations">Dev Configurations<a href="#dev-configurations" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Congratulations! You've now created the base of a <code>webpack-scaffold</code>! Let's now add some more stuff to our future configuration file!
We are going to follow good convention, and extract our configuration into another file, named <code>dev-config.js</code>. As this is just regular JavaScript, we can make the module a function, and supply our <code>entry</code> as a parameter for us to build up a configuration file from.</p>
<p><strong>dev-config.js</strong></p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">createDevConfig</span><span class="token punctuation">(</span>answer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> devConfig <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p><strong>generator.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> Generator <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'yeoman-generator'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> List <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@webpack-cli/webpack-scaffold'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>List<span class="token punctuation">;</span>
<span class="token keyword">const</span> createDevConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./dev-config'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">WebpackGenerator</span> <span class="token keyword">extends</span> <span class="token class-name">Generator</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> opts<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> opts<span class="token punctuation">)</span><span class="token punctuation">;</span>
    opts<span class="token punctuation">.</span>env<span class="token punctuation">.</span>configuration <span class="token operator">=</span> <span class="token punctuation">{</span>
      dev<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        webpackOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">prompting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token function">List</span><span class="token punctuation">(</span><span class="token string">'confirm'</span><span class="token punctuation">,</span> <span class="token string">'Welcome to the demo scaffold! Are you ready?'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'Yes'</span><span class="token punctuation">,</span> <span class="token string">'No'</span><span class="token punctuation">,</span> <span class="token string">'Pengwings'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>answer <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>answer<span class="token punctuation">[</span><span class="token string">'confirm'</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'Pengwings'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>env<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span>dev<span class="token punctuation">.</span>webpackOptions <span class="token operator">=</span> <span class="token function">createDevConfig</span><span class="token punctuation">(</span>answer<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>We've now abstracted that part of the code that's probably going to be really big. Let's go ahead and add another question, like asking for an entry point.</p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> Generator <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'yeoman-generator'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> List <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@webpack-cli/webpack-scaffold'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>List<span class="token punctuation">;</span>
<span class="token keyword">const</span> Input <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@webpack-cli/webpack-scaffold'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Input<span class="token punctuation">;</span>
<span class="token keyword">const</span> createDevConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./dev-config'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">WebpackGenerator</span> <span class="token keyword">extends</span> <span class="token class-name">Generator</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> opts<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> opts<span class="token punctuation">)</span><span class="token punctuation">;</span>
    opts<span class="token punctuation">.</span>env<span class="token punctuation">.</span>configuration <span class="token operator">=</span> <span class="token punctuation">{</span>
      dev<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        webpackOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">prompting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token function">List</span><span class="token punctuation">(</span><span class="token string">'confirm'</span><span class="token punctuation">,</span> <span class="token string">'Welcome to the demo scaffold! Are you ready?'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'Yes'</span><span class="token punctuation">,</span> <span class="token string">'No'</span><span class="token punctuation">,</span> <span class="token string">'Pengwings'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">Input</span><span class="token punctuation">(</span><span class="token string">'entry'</span><span class="token punctuation">,</span> <span class="token string">'What is the entry point in your app?'</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>answer <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>answer<span class="token punctuation">[</span><span class="token string">'confirm'</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'Pengwings'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>env<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span>dev<span class="token punctuation">.</span>webpackOptions <span class="token operator">=</span> <span class="token function">createDevConfig</span><span class="token punctuation">(</span>answer<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h2 id="some-more-configs">Some more configs<a href="#some-more-configs" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Let's look at <code>dev-config.js</code>. We have access to user's answers, use them to assign values to desired config properties, in this case - <code>entry</code>. We've also added an output property that has a <code>filename</code>.</p>
<blockquote class="tip">
<p>String values must be quoted twice. This is to preserve our ability to add other functionality, using only " ", while " 'Mystring' " resolves to a string.</p>
</blockquote>
<p><strong>dev-config.js</strong></p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">createDevConfig</span><span class="token punctuation">(</span>answer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> entryProp <span class="token operator">=</span> answer<span class="token punctuation">.</span>entry <span class="token operator">?</span> <span class="token punctuation">(</span> <span class="token string">'\''</span> <span class="token operator">+</span> answer<span class="token punctuation">.</span>entry <span class="token operator">+</span> <span class="token string">'\''</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token string">'\'index.js\''</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> devConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
    entry<span class="token punctuation">:</span> entryProp<span class="token punctuation">,</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      filename<span class="token punctuation">:</span> <span class="token string">'\'[name].js\''</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> devConfig<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>Run <code>webpack init webpack-scaffold-demo</code>, and you should see scaffold working.</p>
<h2 id="basic-scaffold">Basic Scaffold<a href="#basic-scaffold" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Now that we've got our initial scaffold. Let's add the rest of our options! For the <code>context</code>, let's say we need to use <code>path</code>'s <code>join</code> function. For this, we use a single quote string. By default, the current directory is used, but it's recommended to pass a value in your configuration (context). This makes your configuration independent from CWD (current working directory).</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">createDevConfig</span><span class="token punctuation">(</span>answer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> entryProp <span class="token operator">=</span> answer<span class="token punctuation">.</span>entry <span class="token operator">?</span> <span class="token punctuation">(</span> <span class="token string">'\''</span> <span class="token operator">+</span> answer<span class="token punctuation">.</span>entry <span class="token operator">+</span> <span class="token string">'\''</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token string">'\'index.js\''</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> devConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
    entry<span class="token punctuation">:</span> entryProp<span class="token punctuation">,</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      filename<span class="token punctuation">:</span> <span class="token string">'\'[name].js\''</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    context<span class="token punctuation">:</span> <span class="token string">'path.join(__dirname, "src")'</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> devConfig<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h2 id="add-more-functionality">Add more functionality<a href="#add-more-functionality" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Now we are ready to add a plugin. For this, let's create an utility for <a href="/plugins/html-webpack-plugin/"><code>html-webpack-plugin</code></a> based on the input from the user. Start by adding another question to our prompt.</p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> Generator <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'yeoman-generator'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> List <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@webpack-cli/webpack-scaffold'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>List<span class="token punctuation">;</span>
<span class="token keyword">const</span> Input <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@webpack-cli/webpack-scaffold'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Input<span class="token punctuation">;</span>
<span class="token keyword">const</span> createDevConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./dev-config'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">WebpackGenerator</span> <span class="token keyword">extends</span> <span class="token class-name">Generator</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> opts<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> opts<span class="token punctuation">)</span><span class="token punctuation">;</span>
    opts<span class="token punctuation">.</span>env<span class="token punctuation">.</span>configuration <span class="token operator">=</span> <span class="token punctuation">{</span>
      dev<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        webpackOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">prompting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token function">List</span><span class="token punctuation">(</span><span class="token string">'confirm'</span><span class="token punctuation">,</span> <span class="token string">'Welcome to the demo scaffold! Are you ready?'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'Yes'</span><span class="token punctuation">,</span> <span class="token string">'No'</span><span class="token punctuation">,</span> <span class="token string">'Pengwings'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">Input</span><span class="token punctuation">(</span><span class="token string">'entry'</span><span class="token punctuation">,</span> <span class="token string">'What is the entry point in your app?'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">Input</span><span class="token punctuation">(</span><span class="token string">'plugin'</span><span class="token punctuation">,</span> <span class="token string">'What do you want to name your html file?'</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>answer <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>answer<span class="token punctuation">[</span><span class="token string">'confirm'</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'Pengwings'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>env<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span>dev<span class="token punctuation">.</span>webpackOptions <span class="token operator">=</span> <span class="token function">createDevConfig</span><span class="token punctuation">(</span>answer<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h2 id="create-string-with-name">Create string with name<a href="#create-string-with-name" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Now, we've got to create a string with our answer. This is how it looks.</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">createHtmlPlugin</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token template-string"><span class="token string">` new HtmlWebpackPlugin({filename: "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.html" }) `</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>We've now created a scaffold with <code>entry</code>, <code>output</code>, <code>context</code> and a <code>plugin</code>. If you're curious on the API, check the <a href="/guides/scaffolding/">API</a> for more info on how to scaffold with <code>regexps</code>, <code>module</code> and other!</p>
<h2 id="defining-scopes">Defining scopes<a href="#defining-scopes" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>In order for webpack to compile, we've got to import <code>path</code>. For this, we've got to define something called <code>topScope</code>. This is where our code before <code>module.exports</code> is going to, where you can add everything from imports and variables to functions. The syntax is the same as with the plugins, except for that the <code>topScope</code> property must be an array. In <code>topScope</code> you can define and import what's needed for your specific use case.</p>
<p><strong>generator.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> Generator <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'yeoman-generator'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> List <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@webpack-cli/webpack-scaffold'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>List<span class="token punctuation">;</span>
<span class="token keyword">const</span> Input <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@webpack-cli/webpack-scaffold'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Input<span class="token punctuation">;</span>
<span class="token keyword">const</span> createDevConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./dev-config'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">WebpackGenerator</span> <span class="token keyword">extends</span> <span class="token class-name">Generator</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> opts<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> opts<span class="token punctuation">)</span><span class="token punctuation">;</span>
    opts<span class="token punctuation">.</span>env<span class="token punctuation">.</span>configuration <span class="token operator">=</span> <span class="token punctuation">{</span>
      dev<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        webpackOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">prompting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token function">List</span><span class="token punctuation">(</span><span class="token string">'confirm'</span><span class="token punctuation">,</span> <span class="token string">'Welcome to the demo scaffold! Are you ready?'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'Yes'</span><span class="token punctuation">,</span> <span class="token string">'No'</span><span class="token punctuation">,</span> <span class="token string">'Pengwings'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">Input</span><span class="token punctuation">(</span><span class="token string">'entry'</span><span class="token punctuation">,</span> <span class="token string">'What is the entry point in your app?'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">Input</span><span class="token punctuation">(</span><span class="token string">'plugin'</span><span class="token punctuation">,</span> <span class="token string">'What do you want to name your html file?'</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>answer <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>answer<span class="token punctuation">[</span><span class="token string">'confirm'</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'Pengwings'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>env<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span>dev<span class="token punctuation">.</span>webpackOptions <span class="token operator">=</span> <span class="token function">createDevConfig</span><span class="token punctuation">(</span>answer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>env<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span>dev<span class="token punctuation">.</span>topScope <span class="token operator">=</span> <span class="token punctuation">[</span>
          <span class="token string">'const path = require("path")'</span><span class="token punctuation">,</span>
          <span class="token string">'const webpack = require("webpack")'</span>
        <span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h2 id="configuration-nomenclature">Configuration nomenclature<a href="#configuration-nomenclature" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>We recommend you to name your configuration file something meaningful, like in our case: "penguins". To do it, set the <code>this.options.env.configuration.dev.configName</code> to desired string.</p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> Generator <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'yeoman-generator'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> List <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@webpack-cli/webpack-scaffold'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>List<span class="token punctuation">;</span>
<span class="token keyword">const</span> Input <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@webpack-cli/webpack-scaffold'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Input<span class="token punctuation">;</span>
<span class="token keyword">const</span> createDevConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./dev-config'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">WebpackGenerator</span> <span class="token keyword">extends</span> <span class="token class-name">Generator</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> opts<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> opts<span class="token punctuation">)</span><span class="token punctuation">;</span>
    opts<span class="token punctuation">.</span>env<span class="token punctuation">.</span>configuration <span class="token operator">=</span> <span class="token punctuation">{</span>
      dev<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        webpackOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">prompting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token function">List</span><span class="token punctuation">(</span><span class="token string">'confirm'</span><span class="token punctuation">,</span> <span class="token string">'Welcome to the demo scaffold! Are you ready?'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'Yes'</span><span class="token punctuation">,</span> <span class="token string">'No'</span><span class="token punctuation">,</span> <span class="token string">'Pengwings'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">Input</span><span class="token punctuation">(</span><span class="token string">'entry'</span><span class="token punctuation">,</span> <span class="token string">'What is the entry point in your app?'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">Input</span><span class="token punctuation">(</span><span class="token string">'plugin'</span><span class="token punctuation">,</span> <span class="token string">'What do you want to name your html file?'</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>answer <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>answer<span class="token punctuation">[</span><span class="token string">'confirm'</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'Pengwings'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>env<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span>dev<span class="token punctuation">.</span>webpackOptions <span class="token operator">=</span> <span class="token function">createDevConfig</span><span class="token punctuation">(</span>answer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>env<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span>dev<span class="token punctuation">.</span>topScope <span class="token operator">=</span> <span class="token punctuation">[</span>
          <span class="token string">'const path = require("path")'</span><span class="token punctuation">,</span>
          <span class="token string">'const webpack = require("webpack")'</span>
        <span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>env<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span>dev<span class="token punctuation">.</span>configName <span class="token operator">=</span> <span class="token string">'pengwings'</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h2 id="about-yo-rcjson">About .yo-rc.json<a href="#about-yo-rcjson" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>To write the actual configuration, <a href="/api/cli/">webpack CLI</a> creates a <code>.yo-rc.json</code> file for it to parse the AST. In order for the CLI to understand how to parse the configuration, we need to write to the <code>.yo-rc.json</code>. This is done using the <code>writing</code> lifecycle method built-in by yeoman.</p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> Generator <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'yeoman-generator'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> List <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@webpack-cli/webpack-scaffold'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>List<span class="token punctuation">;</span>
<span class="token keyword">const</span> Input <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@webpack-cli/webpack-scaffold'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Input<span class="token punctuation">;</span>
<span class="token keyword">const</span> createDevConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./dev-config'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">WebpackGenerator</span> <span class="token keyword">extends</span> <span class="token class-name">Generator</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> opts<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> opts<span class="token punctuation">)</span><span class="token punctuation">;</span>
    opts<span class="token punctuation">.</span>env<span class="token punctuation">.</span>configuration <span class="token operator">=</span> <span class="token punctuation">{</span>
      dev<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        webpackOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">prompting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token function">List</span><span class="token punctuation">(</span><span class="token string">'confirm'</span><span class="token punctuation">,</span> <span class="token string">'Welcome to the demo scaffold! Are you ready?'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'Yes'</span><span class="token punctuation">,</span> <span class="token string">'No'</span><span class="token punctuation">,</span> <span class="token string">'Pengwings'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">Input</span><span class="token punctuation">(</span><span class="token string">'entry'</span><span class="token punctuation">,</span> <span class="token string">'What is the entry point in your app?'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">Input</span><span class="token punctuation">(</span><span class="token string">'plugin'</span><span class="token punctuation">,</span> <span class="token string">'What do you want to name your html file?'</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span> <span class="token punctuation">(</span>answer <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>answer<span class="token punctuation">[</span><span class="token string">'confirm'</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'Pengwings'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>env<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span>dev<span class="token punctuation">.</span>webpackOptions <span class="token operator">=</span> <span class="token function">createDevConfig</span><span class="token punctuation">(</span>answer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>env<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span>dev<span class="token punctuation">.</span>topScope <span class="token operator">=</span> <span class="token punctuation">[</span>
          <span class="token string">'const path = require("path")'</span><span class="token punctuation">,</span>
          <span class="token string">'const webpack = require("webpack")'</span>
        <span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>env<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span>dev<span class="token punctuation">.</span>configName <span class="token operator">=</span> <span class="token string">'pengwings'</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">writing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'configuration'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>env<span class="token punctuation">.</span>configuration<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>Congratulations 🎉 on completing your first scaffold! If you need help, submit an <a href="https://github.com/evenstensberg/webpack-scaffold-demo/issues">issue</a>, or reach out on <a href="https://twitter.com/evenstensberg">Twitter</a>!</p>
<h1 id="plugin-patterns">Plugin Patterns<a href="#plugin-patterns" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>Plugins grant unlimited opportunity to perform customizations within the webpack build system. This allows you to create custom asset types, perform unique build modifications, or even enhance the webpack runtime while using middleware. The following are some features of webpack that become useful while writing plugins.</p>
<h2 id="exploring-assets-chunks-modules-and-dependencies">Exploring assets, chunks, modules, and dependencies<a href="#exploring-assets-chunks-modules-and-dependencies" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>After a compilation is sealed, all structures within the compilation may be traversed.</p>
<pre><code class="hljs language-javascript"><span class="token keyword">class</span> <span class="token class-name">MyPlugin</span> <span class="token punctuation">{</span>
  <span class="token function">apply</span><span class="token punctuation">(</span>compiler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>emit<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>compilation<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// Explore each chunk (build output):</span>
      compilation<span class="token punctuation">.</span>chunks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>chunk <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token comment">// Explore each module within the chunk (built inputs):</span>
        chunk<span class="token punctuation">.</span><span class="token function">getModules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>module <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token comment">// Explore each source file path that was included into the module:</span>
          module<span class="token punctuation">.</span>buildInfo <span class="token operator">&#x26;&#x26;</span> module<span class="token punctuation">.</span>buildInfo<span class="token punctuation">.</span>fileDependencies <span class="token operator">&#x26;&#x26;</span> module<span class="token punctuation">.</span>buildInfo<span class="token punctuation">.</span>fileDependencies<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>filepath <span class="token operator">=></span> <span class="token punctuation">{</span>
            <span class="token comment">// we've learned a lot about the source structure now...</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Explore each asset filename generated by the chunk:</span>
        chunk<span class="token punctuation">.</span>files<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>filename <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token comment">// Get the asset source for each file generated by the chunk:</span>
          <span class="token keyword">var</span> source <span class="token operator">=</span> compilation<span class="token punctuation">.</span>assets<span class="token punctuation">[</span>filename<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> MyPlugin<span class="token punctuation">;</span></code></pre>
<ul>
<li><code>compilation.modules</code>: An array of modules (built inputs) in the compilation. Each module manages the build of a raw file from your source library.</li>
<li><code>module.fileDependencies</code>: An array of source file paths included into a module. This includes the source JavaScript file itself (ex: <code>index.js</code>), and all dependency asset files (stylesheets, images, etc) that it has required. Reviewing dependencies is useful for seeing what source files belong to a module.</li>
<li><code>compilation.chunks</code>: An array of chunks (build outputs) in the compilation. Each chunk manages the composition of a final rendered assets.</li>
<li><code>chunk.getModules()</code>: An array of modules that are included into a chunk. By extension, you may look through each module's dependencies to see what raw source files fed into a chunk.</li>
<li><code>chunk.files</code>: An array of output filenames generated by the chunk. You may access these asset sources from the <code>compilation.assets</code> table.</li>
</ul>
<h3 id="monitoring-the-watch-graph">Monitoring the watch graph<a href="#monitoring-the-watch-graph" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>While running webpack middleware, each compilation includes a <code>fileDependencies</code> array (what files are being watched) and a <code>fileTimestamps</code> hash that maps watched file paths to a timestamp. These are extremely useful for detecting what files have changed within the compilation:</p>
<pre><code class="hljs language-javascript"><span class="token keyword">class</span> <span class="token class-name">MyPlugin</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>startTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>prevTimestamps <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">apply</span><span class="token punctuation">(</span>compiler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>emit<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>compilation<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> changedFiles <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>compilation<span class="token punctuation">.</span>fileTimestamps<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
        watchfile <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>prevTimestamps<span class="token punctuation">[</span>watchfile<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>startTime<span class="token punctuation">)</span> <span class="token operator">&#x3C;</span>
            <span class="token punctuation">(</span>compilation<span class="token punctuation">.</span>fileTimestamps<span class="token punctuation">[</span>watchfile<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token number">Infinity</span><span class="token punctuation">)</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">this</span><span class="token punctuation">.</span>prevTimestamps <span class="token operator">=</span> compilation<span class="token punctuation">.</span>fileTimestamps<span class="token punctuation">;</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> MyPlugin<span class="token punctuation">;</span></code></pre>
<p>You may also feed new file paths into the watch graph to receive compilation triggers when those files change. Simply push valid file paths into the <code>compilation.fileDependencies</code> array to add them to the watch. Note: the <code>fileDependencies</code> array is rebuilt in each compilation, so your plugin must push its own watched dependencies into each compilation to keep them under watch.</p>
<h2 id="changed-chunks">Changed chunks<a href="#changed-chunks" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Similar to the watch graph, it's fairly simple to monitor changed chunks (or modules, for that matter) within a compilation by tracking their hashes.</p>
<pre><code class="hljs language-javascript"><span class="token keyword">class</span> <span class="token class-name">MyPlugin</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>chunkVersions <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">apply</span><span class="token punctuation">(</span>compiler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>emit<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>compilation<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> changedChunks <span class="token operator">=</span> compilation<span class="token punctuation">.</span>chunks<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>chunk <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> oldVersion <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>chunkVersions<span class="token punctuation">[</span>chunk<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>chunkVersions<span class="token punctuation">[</span>chunk<span class="token punctuation">.</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> chunk<span class="token punctuation">.</span>hash<span class="token punctuation">;</span>
        <span class="token keyword">return</span> chunk<span class="token punctuation">.</span>hash <span class="token operator">!==</span> oldVersion<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> MyPlugin<span class="token punctuation">;</span></code></pre>
<h1 id="release-process">Release Process<a href="#release-process" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>The release process for deploying webpack is actually quite painless. Read through the following steps, so you have a clear understanding of how it's done.</p>
<h2 id="pull-requests">Pull Requests<a href="#pull-requests" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>When merging pull requests into the <code>master</code> branch, select the <em>Create Merge Commit</em> option.</p>
<h2 id="releasing">Releasing<a href="#releasing" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<pre><code class="hljs language-bash"><span class="token function">npm</span> version patch <span class="token operator">&#x26;&#x26;</span> <span class="token function">git</span> push --follow-tags <span class="token operator">&#x26;&#x26;</span> <span class="token function">npm</span> publish
<span class="token function">npm</span> version minor <span class="token operator">&#x26;&#x26;</span> <span class="token function">git</span> push --follow-tags <span class="token operator">&#x26;&#x26;</span> <span class="token function">npm</span> publish
<span class="token function">npm</span> version major <span class="token operator">&#x26;&#x26;</span> <span class="token function">git</span> push --follow-tags <span class="token operator">&#x26;&#x26;</span> <span class="token function">npm</span> publish</code></pre>
<p><em>This will increment the package version, commits the changes, cuts a <strong>local tag</strong>, push to github &#x26; publish the npm package.</em></p>
<p>After that go to the github <a href="https://github.com/webpack/webpack/releases">releases page</a> and write a Changelog for the new tag.</p>
<h1 id="debugging">Debugging<a href="#debugging" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>When contributing to the core repo, writing a loader/plugin, or even just working on a complex project, debugging tools can be central to your workflow. Whether the problem is slow performance on a large project or an unhelpful traceback, the following utilities can make figuring it out less painful.</p>
<ul>
<li>The <a href="/api/stats"><code>stats</code> data</a> made available through <a href="/api/node/#stats-object">Node</a> and the <a href="/api/cli/#common-options">CLI</a>.</li>
<li>Chrome <strong>DevTools</strong> via <code>node-nightly</code> and the latest Node.js versions.</li>
</ul>
<h2 id="stats">Stats<a href="#stats" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Whether you want to sift through <a href="/api/stats">this data</a> manually or use a tool to process it, the <code>stats</code> data can be extremely useful when debugging build issues. We won't go in depth here as there's an <a href="/api/stats">entire page</a> dedicated to its contents, but know that you can use it to find the following information:</p>
<ul>
<li>The contents of every module.</li>
<li>The modules contained within every chunk.</li>
<li>Per module compilation and resolving stats.</li>
<li>Build errors and warnings.</li>
<li>The relationships between modules.</li>
<li>And much more...</li>
</ul>
<p>On top of that, the official <a href="https://github.com/webpack/analyse">analyze tool</a> and <a href="/guides/code-splitting/#bundle-analysis">various others</a> will accept this data and visualize it in various ways.</p>
<h2 id="devtools">DevTools<a href="#devtools" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>While <a href="https://nodejs.org/api/console.html"><code>console</code></a> statements may work well in simpler scenarios, sometimes a more robust solution is needed. As most front-end developers already know, Chrome DevTools are a life saver when debugging web applications, <em>but they don’t have to stop there</em>. As of Node v6.3.0+, developers can use the built-in <code>--inspect</code> flag to debug a node program in DevTools.</p>
<p>This gives you the power to easily create breakpoints, debug memory usage, expose and examine objects in the console, and much more. In this short demo, we'll utilize the <a href="https://github.com/hemanth/node-nightly"><code>node-nightly</code></a> package which provides access to the latest and greatest inspecting capabilities.</p>
<blockquote class="warning">
<p>The <code>--inspect</code> interface has been available since v6.3.0 so feel to try it out with your local version, but be warned that certain features and flags may differ from the ones in this demo.</p>
</blockquote>
<p>Let's start by installing it globally:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --global node-nightly</code></pre>
<p>Now, we'll need to run it once to finish the installation:</p>
<pre><code class="hljs language-bash">node-nightly</code></pre>
<p>Now, we can simply use <code>node-nightly</code> along with the <code>--inspect</code> flag to start our build in any webpack-based project. Note that we cannot run NPM <code>scripts</code>, e.g. <code>npm run build</code>, so we'll have to specify the full <code>node_modules</code> path:</p>
<pre><code class="hljs language-bash">node-nightly --inspect ./node_modules/webpack/bin/webpack.js</code></pre>
<p>Which should output something like:</p>
<pre><code class="hljs language-bash">Debugger listening on ws://127.0.0.1:9229/c624201a-250f-416e-a018-300bbec7be2c
For <span class="token function">help</span> see https://nodejs.org/en/docs/inspector</code></pre>
<p>Now jump to <code>chrome://inspect</code> in the browser and you should see any active scripts you've inspected under the <em>Remote Target</em> header. Click the "inspect" link under each script to open a dedicated debugger or the <em>Open dedicated DevTools for Node</em> link for a session that will connect automatically. You can also check out the <a href="https://chrome.google.com/webstore/detail/nodejs-v8-inspector-manag/gnhhdgbaldcilmgcpfddgdbkhjohddkj">NiM extension</a>, a handy Chrome plugin that will automatically open a DevTools tab every time you <code>--inspect</code> a script.</p>
<p>We recommend using the <code>--inspect-brk</code> flag which will break on the first statement of the script allowing you to go through the source to set breakpoints and start/stop the build as you please. Also, don't forget that you can still pass arguments to the script. For example, if you have multiple configuration files you could pass <code>--config webpack.prod.js</code> to specify the configuration you'd like to debug.</p>
</div><div class="contributors__section"><hr/><h3>Contributors</h3><div class="contributors"><div class="contributors__list"><a class="contributor" href="https://github.com/webpack"><img alt="webpack" src="/cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->webpack</span></a></div></div></div></div></section><div class="gitter"><div class="gitter__button"><i class="gitter__icon icon-gitter"></i></div></div></div><footer class="footer"><div class="container footer__inner"><section class="footer__left"><a class="footer__link" href="/guides/getting-started/">Get Started</a><a class="footer__link" href="/organization/">Organization</a><a class="footer__link" href="/starter-kits/">Starter Kits</a><a class="footer__link" href="/comparison/">Comparison</a></section><section class="footer__middle"><a class="footer__icon" href="/"><img src="/d19378a95ebe6b15d5ddea281138dcf4.svg" alt="webpack icon"/></a></section><section class="footer__right"><a href="https://webpack.threadless.com/" target="_blank" rel="noopener" class="footer__link">Swag Store</a><a class="footer__link" href="/glossary/">Glossary</a><a class="footer__link" href="/branding/">Branding</a><a href="https://gitter.im/webpack/webpack" target="_blank" rel="noopener" class="footer__link">Gitter</a><a href="https://github.com/webpack/webpack/releases" target="_blank" rel="noopener" class="footer__link">Changelog</a><a class="footer__link footer__license" href="/license"><img alt="Creative Commons License" src="/7052446b5e67df4434f4031afd2f1497.svg"/><img alt="Creative Commons License" src="/7ebb1b3901ce119694f65e04f6347ef5.svg"/></a></section></div></footer></div></div><script>
window.matchMedia('print').addListener(function(mql) {
  if (!mql.matches) {
      window.close();
  }
});
window.print();
</script></body></html>