<!DOCTYPE html><html lang="en" data-reactroot=""><head><meta charset="utf-8"/><meta name="theme-color" content="#2B3A42"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="robots" content="noindex,nofollow"/><title>Combined printable page | webpack</title><meta name="description" content="webpack is a module bundler. Its main purpose is to bundle JavaScript files for usage in a browser, yet it is also capable of transforming, bundling, or packaging just about any resource or asset."/><meta property="og:site_name" content="webpack"/><meta property="og:type" content="website"/><meta property="og:title" content="Combined printable page | webpack"/><meta property="og:description" name="description" content="webpack is a module bundler. Its main purpose is to bundle JavaScript files for usage in a browser, yet it is also capable of transforming, bundling, or packaging just about any resource or asset."/><meta property="og:image" content="/aad9d51e01a0dcc2caf5bee43dc8e647.svg"/><meta property="twitter:card" content="summary"/><meta property="twitter:site" content="@webpack"/><meta property="twitter:creator" content="@webpack"/><meta property="twitter:domain" content="https://webpack.js.org/"/><link rel="icon" type="image/x-icon" href="/bc3effb418df77da9e04825c48a58a49.ico"/><link rel="stylesheet" href="/c3bdf2a06d9967301c16.css"/><link rel="stylesheet" href="/00b4b8424f4141301d82.css"/><link rel="manifest" href="/manifest.json"/><link rel="canonical" href="https://webpack.js.org/guides/printable/"/><meta name="mobile-web-app-capable" content="yes"/><link rel="icon" sizes="192x192" href="/icon_192x192.png"/><link rel="icon" sizes="512x512" href="/icon_512x512.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="apple-mobile-web-app-title" content="webpack"/><link rel="apple-touch-icon-precomposed" href="/icon_180x180.png"/><link rel="mask-icon" href="/aad9d51e01a0dcc2caf5bee43dc8e647.svg" color="#465e69"/><meta name="msapplication-TileImage" content="/icon_150x150.png"/><meta name="msapplication-TileColor" content="#465e69"/></head><body><div id="root"><div class="site"><div class="site__header"><div class="notification-bar"><div class="container notification-bar__inner"><p>Sponsor webpack and get apparel from the <a href="https://webpack.threadless.com">official shop</a>! All proceeds go to our <a href="https://opencollective.com/webpack">open collective</a>!</p></div></div><header class="navigation   "><section class="navigation__inner"><button aria-label="Open menu" class="navigation__mobile"><svg viewBox="-62 138 25 25"><g><g><path d="M-60.2,140.2h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,141-61.2,140.2-60.2,140.2z"></path><path d="M-60.2,148.7h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,149.5-61.2,148.7-60.2,148.7z"></path><path d="M-60.2,157.2h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,158-61.2,157.2-60.2,157.2z"></path></g></g></svg></button><a class="navigation__logo" href="/"><img class="logo" src="/e0b5805d423a4ec9473ee315250968b2.svg" alt="webpack logo"/></a><nav class="navigation__items"><a class="navigation__item  navigation__item--active" href="/concepts/">Documentation</a><a class="navigation__item  " href="/contribute/">Contribute</a><a class="navigation__item  " href="/vote/">Vote</a><a href="https://medium.com/webpack" target="_blank" rel="noopener" class="navigation__item  ">Blog</a><a href="https://github.com/webpack/webpack" target="_blank" rel="noopener" title="GitHub Repository" class="navigation__item navigation__item--icon "><i aria-hidden="true" class="icon-github"></i></a><a href="https://twitter.com/webpack" target="_blank" rel="noopener" title="webpack on Twitter" class="navigation__item navigation__item--icon "><i aria-hidden="true" class="icon-twitter"></i></a><a href="https://stackoverflow.com/questions/tagged/webpack" target="_blank" rel="noopener" title="webpack on Stack Overflow" class="navigation__item navigation__item--icon "><i aria-hidden="true" class="icon-stack-overflow"></i></a><span class="navigation__item navigation__item--icon"><nav class="dropdown navigation__languages"><button aria-haspopup="true" aria-expanded="false" aria-label="Select language"><img class="dropdown__language" alt="select language" src="/57c717e75066b659cfe19dc2a643153c.svg"/><i aria-hidden="true" class="dropdown__arrow"></i></button><div class="dropdown__list "><ul><li><a href="https://webpack.js.org/"><span>English</span></a></li><li><a href="https://webpack.docschina.org/"><span lang="zh">中文</span></a></li></ul></div></nav></span></nav><div class="navigation-search "><input type="text" class="navigation-search__input" placeholder="Search this site..." value=""/><button aria-label="Hide search box" class="navigation-search__icon navigation-search__clear"><svg viewBox="-137 138 25 25"><g transform="translate(0,-952.36218)"><path d="M-131.3,1094.4c-0.4,0-0.9,0.1-1.2,0.5c-0.7,0.7-0.7,1.7,0,2.4l5.6,5.6l-5.6,5.6c-0.7,0.7-0.7,1.7,0,2.4 c0.7,0.7,1.7,0.7,2.4,0l5.6-5.6l5.6,5.6c0.7,0.7,1.7,0.7,2.4,0c0.7-0.7,0.7-1.7,0-2.4l-5.6-5.6l5.6-5.6c0.7-0.7,0.7-1.7,0-2.4 c-0.7-0.7-1.7-0.7-2.4,0l-5.6,5.6l-5.6-5.6C-130.5,1094.5-130.9,1094.4-131.3,1094.4L-131.3,1094.4z"></path></g></svg></button><button aria-label="Show search box" class="navigation-search__icon navigation-search__search"><svg viewBox="-137 138 25 25"><g><path d="M-114.6,162.6l-7.5-7.5c-0.6-0.6-0.6-1.6,0-2.1l0,0c0.6-0.6,1.6-0.6,2.1,0l7.5,7.5c0.6,0.6,0.6,1.6,0,2.1l0,0 C-113,163.1-114,163.1-114.6,162.6z"></path><path d="M-134.1,140.9c-3.9,3.9-3.9,10.2,0,14.1s10.2,3.9,14.1,0s3.9-10.2,0-14.1S-130.2,137-134.1,140.9z M-122.1,153 c-2.7,2.7-7.1,2.7-9.8,0s-2.7-7.1,0-9.8s7.1-2.7,9.8,0C-119.4,145.9-119.4,150.2-122.1,153z"></path></g></svg></button></div></section><div class="navigation-sub"><div class="navigation-sub__inner"><a class="navigation-sub__link " title="api" content="api" href="/api/">api</a><a class="navigation-sub__link " title="blog" content="blog" href="/blog/">blog</a><a class="navigation-sub__link " title="concepts" content="concepts" href="/concepts/">concepts</a><a class="navigation-sub__link " title="configuration" content="configuration" href="/configuration/">configuration</a><a class="navigation-sub__link navigation-sub__link--active" title="guides" content="guides" href="/guides/">guides</a><a class="navigation-sub__link " title="loaders" content="loaders" href="/loaders/">loaders</a><a class="navigation-sub__link " title="migrate" content="migrate" href="/migrate/">migrate</a><a class="navigation-sub__link " title="plugins" content="plugins" href="/plugins/">plugins</a></div></div></header></div><div class="container site__content"><div class="sponsors"><a href="https://www.ag-grid.com/?utm_source=webpack&amp;utm_medium=banner&amp;utm_campaign=sponsorship" target="_blank" rel="noopener" class="sponsors__content"><img src="/bf176a25b4f8227fea804854c98dc5e2.png"/><img src="/d19378a95ebe6b15d5ddea281138dcf4.svg" style="width:100px"/><div style="margin-top:1em;font-size:2em;text-align:center;color:#535353">ag-grid is proud to partner with webpack</div></a></div><nav class="sidebar site__sidebar"><div class="sidebar__inner"><div class="relative z-0 bg-white dark:bg-gray-100 "><select class="text-gray-600 text-14 px-5 py-5 appearance-none box-border border border-gray-200 border-solid flex-col flex w-full rounded-none bg-transparent bg-none"><option value="5">Webpack 5</option><option selected="" value="4">Webpack 4</option></select><img src="/33e97d95c634809004ee2830b6297e89.svg" class="absolute right-5 top-5 fill-current text-gray-300 z-[-1]" width="20" height="20"/></div><div class="sidebar-item sidebar-item--disabled`"><i class="sidebar-item__toggle icon-vertical-bar"></i><a class="sidebar-item__title sidebar-link__print" href="/guides/printable/" rel="nofollow" alt="Print" title="Print" target="_blank">Print Section<img src="/96ccbfac58b65e83657a220603e00abe.svg"/></a></div><div><div class="sidebar-item  sidebar-item--disabled"><i class="sidebar-item__toggle icon-vertical-bar"></i><a class="sidebar-item__title" href="/guides/">Guides</a></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/getting-started/">Getting Started</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Basic Setup"><a href="/guides/getting-started/#basic-setup">Basic Setup</a></li><li class="sidebar-item__anchor" title="Creating a Bundle"><a href="/guides/getting-started/#creating-a-bundle">Creating a Bundle</a></li><li class="sidebar-item__anchor" title="Modules"><a href="/guides/getting-started/#modules">Modules</a></li><li class="sidebar-item__anchor" title="Using a Configuration"><a href="/guides/getting-started/#using-a-configuration">Using a Configuration</a></li><li class="sidebar-item__anchor" title="NPM Scripts"><a href="/guides/getting-started/#npm-scripts">NPM Scripts</a></li><li class="sidebar-item__anchor" title="Conclusion"><a href="/guides/getting-started/#conclusion">Conclusion</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/asset-management/">Asset Management</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Setup"><a href="/guides/asset-management/#setup">Setup</a></li><li class="sidebar-item__anchor" title="Loading CSS"><a href="/guides/asset-management/#loading-css">Loading CSS</a></li><li class="sidebar-item__anchor" title="Loading Images"><a href="/guides/asset-management/#loading-images">Loading Images</a></li><li class="sidebar-item__anchor" title="Loading Fonts"><a href="/guides/asset-management/#loading-fonts">Loading Fonts</a></li><li class="sidebar-item__anchor" title="Loading Data"><a href="/guides/asset-management/#loading-data">Loading Data</a></li><li class="sidebar-item__anchor" title="Global Assets"><a href="/guides/asset-management/#global-assets">Global Assets</a></li><li class="sidebar-item__anchor" title="Wrapping up"><a href="/guides/asset-management/#wrapping-up">Wrapping up</a></li><li class="sidebar-item__anchor" title="Next guide"><a href="/guides/asset-management/#next-guide">Next guide</a></li><li class="sidebar-item__anchor" title="Further Reading"><a href="/guides/asset-management/#further-reading">Further Reading</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/output-management/">Output Management</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Preparation"><a href="/guides/output-management/#preparation">Preparation</a></li><li class="sidebar-item__anchor" title="Setting up HtmlWebpackPlugin"><a href="/guides/output-management/#setting-up-htmlwebpackplugin">Setting up HtmlWebpackPlugin</a></li><li class="sidebar-item__anchor" title="Cleaning up the "><a href="/guides/output-management/#cleaning-up-the-dist-folder">Cleaning up the </a></li><li class="sidebar-item__anchor" title="The Manifest"><a href="/guides/output-management/#the-manifest">The Manifest</a></li><li class="sidebar-item__anchor" title="Conclusion"><a href="/guides/output-management/#conclusion">Conclusion</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/development/">Development</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Using source maps"><a href="/guides/development/#using-source-maps">Using source maps</a></li><li class="sidebar-item__anchor" title="Choosing a Development Tool"><a href="/guides/development/#choosing-a-development-tool">Choosing a Development Tool</a></li><li class="sidebar-item__anchor" title="Using Watch Mode"><a href="/guides/development/#using-watch-mode">Using Watch Mode</a></li><li class="sidebar-item__anchor" title="Using webpack-dev-server"><a href="/guides/development/#using-webpack-dev-server">Using webpack-dev-server</a></li><li class="sidebar-item__anchor" title="Using webpack-dev-middleware"><a href="/guides/development/#using-webpack-dev-middleware">Using webpack-dev-middleware</a></li><li class="sidebar-item__anchor" title="Adjusting Your Text Editor"><a href="/guides/development/#adjusting-your-text-editor">Adjusting Your Text Editor</a></li><li class="sidebar-item__anchor" title="Conclusion"><a href="/guides/development/#conclusion">Conclusion</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/code-splitting/">Code Splitting</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Entry Points"><a href="/guides/code-splitting/#entry-points">Entry Points</a></li><li class="sidebar-item__anchor" title="Prevent Duplication"><a href="/guides/code-splitting/#prevent-duplication">Prevent Duplication</a></li><li class="sidebar-item__anchor" title="Dynamic Imports"><a href="/guides/code-splitting/#dynamic-imports">Dynamic Imports</a></li><li class="sidebar-item__anchor" title="Prefetching/Preloading modules"><a href="/guides/code-splitting/#prefetchingpreloading-modules">Prefetching/Preloading modules</a></li><li class="sidebar-item__anchor" title="Bundle Analysis"><a href="/guides/code-splitting/#bundle-analysis">Bundle Analysis</a></li><li class="sidebar-item__anchor" title="Next Steps"><a href="/guides/code-splitting/#next-steps">Next Steps</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/caching/">Caching</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Output Filenames"><a href="/guides/caching/#output-filenames">Output Filenames</a></li><li class="sidebar-item__anchor" title="Extracting Boilerplate"><a href="/guides/caching/#extracting-boilerplate">Extracting Boilerplate</a></li><li class="sidebar-item__anchor" title="Module Identifiers"><a href="/guides/caching/#module-identifiers">Module Identifiers</a></li><li class="sidebar-item__anchor" title="Conclusion"><a href="/guides/caching/#conclusion">Conclusion</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/author-libraries/">Authoring Libraries</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Authoring a Library"><a href="/guides/author-libraries/#authoring-a-library">Authoring a Library</a></li><li class="sidebar-item__anchor" title="Base Configuration"><a href="/guides/author-libraries/#base-configuration">Base Configuration</a></li><li class="sidebar-item__anchor" title="Externalize Lodash"><a href="/guides/author-libraries/#externalize-lodash">Externalize Lodash</a></li><li class="sidebar-item__anchor" title="External Limitations"><a href="/guides/author-libraries/#external-limitations">External Limitations</a></li><li class="sidebar-item__anchor" title="Expose the Library"><a href="/guides/author-libraries/#expose-the-library">Expose the Library</a></li><li class="sidebar-item__anchor" title="Final Steps"><a href="/guides/author-libraries/#final-steps">Final Steps</a></li></ul></div></div><div><div class="sidebar-item  sidebar-item--disabled"><i class="sidebar-item__toggle icon-vertical-bar"></i><a class="sidebar-item__title" href="/guides/environment-variables/">Environment Variables</a></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/build-performance/">Build Performance</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="General"><a href="/guides/build-performance/#general">General</a></li><li class="sidebar-item__anchor" title="Stay Up to Date"><a href="/guides/build-performance/#stay-up-to-date">Stay Up to Date</a></li><li class="sidebar-item__anchor" title="Loaders"><a href="/guides/build-performance/#loaders">Loaders</a></li><li class="sidebar-item__anchor" title="Bootstrap"><a href="/guides/build-performance/#bootstrap">Bootstrap</a></li><li class="sidebar-item__anchor" title="Resolving"><a href="/guides/build-performance/#resolving">Resolving</a></li><li class="sidebar-item__anchor" title="Dlls"><a href="/guides/build-performance/#dlls">Dlls</a></li><li class="sidebar-item__anchor" title="Smaller = Faster"><a href="/guides/build-performance/#smaller--faster">Smaller = Faster</a></li><li class="sidebar-item__anchor" title="Worker Pool"><a href="/guides/build-performance/#worker-pool">Worker Pool</a></li><li class="sidebar-item__anchor" title="Persistent cache"><a href="/guides/build-performance/#persistent-cache">Persistent cache</a></li><li class="sidebar-item__anchor" title="Custom plugins/loaders"><a href="/guides/build-performance/#custom-pluginsloaders">Custom plugins/loaders</a></li><li class="sidebar-item__anchor" title="Progress plugin"><a href="/guides/build-performance/#progress-plugin">Progress plugin</a></li><li class="sidebar-item__anchor" title="Development"><a href="/guides/build-performance/#development">Development</a></li><li class="sidebar-item__anchor" title="Incremental Builds"><a href="/guides/build-performance/#incremental-builds">Incremental Builds</a></li><li class="sidebar-item__anchor" title="Compile in Memory"><a href="/guides/build-performance/#compile-in-memory">Compile in Memory</a></li><li class="sidebar-item__anchor" title="stats.toJson speed"><a href="/guides/build-performance/#statstojson-speed">stats.toJson speed</a></li><li class="sidebar-item__anchor" title="Devtool"><a href="/guides/build-performance/#devtool">Devtool</a></li><li class="sidebar-item__anchor" title="Avoid Production Specific Tooling"><a href="/guides/build-performance/#avoid-production-specific-tooling">Avoid Production Specific Tooling</a></li><li class="sidebar-item__anchor" title="Minimal Entry Chunk"><a href="/guides/build-performance/#minimal-entry-chunk">Minimal Entry Chunk</a></li><li class="sidebar-item__anchor" title="Avoid Extra Optimization Steps"><a href="/guides/build-performance/#avoid-extra-optimization-steps">Avoid Extra Optimization Steps</a></li><li class="sidebar-item__anchor" title="Output Without Path Info"><a href="/guides/build-performance/#output-without-path-info">Output Without Path Info</a></li><li class="sidebar-item__anchor" title="Node.js Versions 8.9.10-9.11.1"><a href="/guides/build-performance/#nodejs-versions-8910-9111">Node.js Versions 8.9.10-9.11.1</a></li><li class="sidebar-item__anchor" title="TypeScript Loader"><a href="/guides/build-performance/#typescript-loader">TypeScript Loader</a></li><li class="sidebar-item__anchor" title="Production"><a href="/guides/build-performance/#production">Production</a></li><li class="sidebar-item__anchor" title="Multiple Compilations"><a href="/guides/build-performance/#multiple-compilations">Multiple Compilations</a></li><li class="sidebar-item__anchor" title="Source Maps"><a href="/guides/build-performance/#source-maps">Source Maps</a></li><li class="sidebar-item__anchor" title="Specific Tooling Issues"><a href="/guides/build-performance/#specific-tooling-issues">Specific Tooling Issues</a></li><li class="sidebar-item__anchor" title="Babel"><a href="/guides/build-performance/#babel">Babel</a></li><li class="sidebar-item__anchor" title="TypeScript"><a href="/guides/build-performance/#typescript">TypeScript</a></li><li class="sidebar-item__anchor" title="Sass"><a href="/guides/build-performance/#sass">Sass</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/csp/">Content Security Policies</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Examples"><a href="/guides/csp/#examples">Examples</a></li><li class="sidebar-item__anchor" title="Enabling CSP"><a href="/guides/csp/#enabling-csp">Enabling CSP</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/development-vagrant/">Development - Vagrant</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Configuring the Project"><a href="/guides/development-vagrant/#configuring-the-project">Configuring the Project</a></li><li class="sidebar-item__anchor" title="Running the Server"><a href="/guides/development-vagrant/#running-the-server">Running the Server</a></li><li class="sidebar-item__anchor" title="Advanced Usage with nginx"><a href="/guides/development-vagrant/#advanced-usage-with-nginx">Advanced Usage with nginx</a></li><li class="sidebar-item__anchor" title="Conclusion"><a href="/guides/development-vagrant/#conclusion">Conclusion</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/dependency-management/">Dependency Management</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="require with expression"><a href="/guides/dependency-management/#require-with-expression">require with expression</a></li><li class="sidebar-item__anchor" title="require.context"><a href="/guides/dependency-management/#requirecontext">require.context</a></li><li class="sidebar-item__anchor" title="context module API"><a href="/guides/dependency-management/#context-module-api">context module API</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/installation/">Installation</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Prerequisites"><a href="/guides/installation/#prerequisites">Prerequisites</a></li><li class="sidebar-item__anchor" title="Local Installation"><a href="/guides/installation/#local-installation">Local Installation</a></li><li class="sidebar-item__anchor" title="Global Installation"><a href="/guides/installation/#global-installation">Global Installation</a></li><li class="sidebar-item__anchor" title="Bleeding Edge"><a href="/guides/installation/#bleeding-edge">Bleeding Edge</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/scaffolding/">Scaffolding</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Creating a scaffold"><a href="/guides/scaffolding/#creating-a-scaffold">Creating a scaffold</a></li><li class="sidebar-item__anchor" title="Writing a scaffold"><a href="/guides/scaffolding/#writing-a-scaffold">Writing a scaffold</a></li><li class="sidebar-item__anchor" title="Running a scaffold"><a href="/guides/scaffolding/#running-a-scaffold">Running a scaffold</a></li><li class="sidebar-item__anchor" title="Running a scaffold locally"><a href="/guides/scaffolding/#running-a-scaffold-locally">Running a scaffold locally</a></li><li class="sidebar-item__anchor" title="Running a scaffold from npm"><a href="/guides/scaffolding/#running-a-scaffold-from-npm">Running a scaffold from npm</a></li><li class="sidebar-item__anchor" title="API"><a href="/guides/scaffolding/#api">API</a></li><li class="sidebar-item__anchor" title="Required"><a href="/guides/scaffolding/#required">Required</a></li><li class="sidebar-item__anchor" title="Optional"><a href="/guides/scaffolding/#optional">Optional</a></li><li class="sidebar-item__anchor" title="opts.env.configuration"><a href="/guides/scaffolding/#optsenvconfigurationrequired">opts.env.configuration</a></li><li class="sidebar-item__anchor" title="opts.env.configuration.myObj"><a href="/guides/scaffolding/#optsenvconfigurationmyobj-required">opts.env.configuration.myObj</a></li><li class="sidebar-item__anchor" title="myObj.webpackOptions"><a href="/guides/scaffolding/#myobjwebpackoptions-required">myObj.webpackOptions</a></li><li class="sidebar-item__anchor" title="writing"><a href="/guides/scaffolding/#writing-required">writing</a></li><li class="sidebar-item__anchor" title="myObj.merge"><a href="/guides/scaffolding/#myobjmerge-optional">myObj.merge</a></li><li class="sidebar-item__anchor" title="myObj.topScope"><a href="/guides/scaffolding/#myobjtopscopeoptional">myObj.topScope</a></li><li class="sidebar-item__anchor" title="myObj.configName"><a href="/guides/scaffolding/#myobjconfignameoptional">myObj.configName</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/hot-module-replacement/">Hot Module Replacement</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Enabling HMR"><a href="/guides/hot-module-replacement/#enabling-hmr">Enabling HMR</a></li><li class="sidebar-item__anchor" title="Via the Node.js API"><a href="/guides/hot-module-replacement/#via-the-nodejs-api">Via the Node.js API</a></li><li class="sidebar-item__anchor" title="Gotchas"><a href="/guides/hot-module-replacement/#gotchas">Gotchas</a></li><li class="sidebar-item__anchor" title="HMR with Stylesheets"><a href="/guides/hot-module-replacement/#hmr-with-stylesheets">HMR with Stylesheets</a></li><li class="sidebar-item__anchor" title="Other Code and Frameworks"><a href="/guides/hot-module-replacement/#other-code-and-frameworks">Other Code and Frameworks</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/tree-shaking/">Tree Shaking</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Add a Utility"><a href="/guides/tree-shaking/#add-a-utility">Add a Utility</a></li><li class="sidebar-item__anchor" title="Mark the file as side-effect-free"><a href="/guides/tree-shaking/#mark-the-file-as-side-effect-free">Mark the file as side-effect-free</a></li><li class="sidebar-item__anchor" title="Clarifying tree shaking and "><a href="/guides/tree-shaking/#clarifying-tree-shaking-and-sideeffects">Clarifying tree shaking and </a></li><li class="sidebar-item__anchor" title="Minify the Output"><a href="/guides/tree-shaking/#minify-the-output">Minify the Output</a></li><li class="sidebar-item__anchor" title="Conclusion"><a href="/guides/tree-shaking/#conclusion">Conclusion</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/production/">Production</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Setup"><a href="/guides/production/#setup">Setup</a></li><li class="sidebar-item__anchor" title="NPM Scripts"><a href="/guides/production/#npm-scripts">NPM Scripts</a></li><li class="sidebar-item__anchor" title="Specify the Mode"><a href="/guides/production/#specify-the-mode">Specify the Mode</a></li><li class="sidebar-item__anchor" title="Minification"><a href="/guides/production/#minification">Minification</a></li><li class="sidebar-item__anchor" title="Source Mapping"><a href="/guides/production/#source-mapping">Source Mapping</a></li><li class="sidebar-item__anchor" title="Minimize CSS"><a href="/guides/production/#minimize-css">Minimize CSS</a></li><li class="sidebar-item__anchor" title="CLI Alternatives"><a href="/guides/production/#cli-alternatives">CLI Alternatives</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/lazy-loading/">Lazy Loading</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Example"><a href="/guides/lazy-loading/#example">Example</a></li><li class="sidebar-item__anchor" title="Frameworks"><a href="/guides/lazy-loading/#frameworks">Frameworks</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/shimming/">Shimming</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Shimming Globals"><a href="/guides/shimming/#shimming-globals">Shimming Globals</a></li><li class="sidebar-item__anchor" title="Granular Shimming"><a href="/guides/shimming/#granular-shimming">Granular Shimming</a></li><li class="sidebar-item__anchor" title="Global Exports"><a href="/guides/shimming/#global-exports">Global Exports</a></li><li class="sidebar-item__anchor" title="Loading Polyfills"><a href="/guides/shimming/#loading-polyfills">Loading Polyfills</a></li><li class="sidebar-item__anchor" title="Further Optimizations"><a href="/guides/shimming/#further-optimizations">Further Optimizations</a></li><li class="sidebar-item__anchor" title="Node Built-Ins"><a href="/guides/shimming/#node-built-ins">Node Built-Ins</a></li><li class="sidebar-item__anchor" title="Other Utilities"><a href="/guides/shimming/#other-utilities">Other Utilities</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/typescript/">TypeScript</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Basic Setup"><a href="/guides/typescript/#basic-setup">Basic Setup</a></li><li class="sidebar-item__anchor" title="Loader"><a href="/guides/typescript/#loader">Loader</a></li><li class="sidebar-item__anchor" title="Source Maps"><a href="/guides/typescript/#source-maps">Source Maps</a></li><li class="sidebar-item__anchor" title="Using Third Party Libraries"><a href="/guides/typescript/#using-third-party-libraries">Using Third Party Libraries</a></li><li class="sidebar-item__anchor" title="Importing Other Assets"><a href="/guides/typescript/#importing-other-assets">Importing Other Assets</a></li><li class="sidebar-item__anchor" title="Build Performance"><a href="/guides/typescript/#build-performance">Build Performance</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/progressive-web-application/">Progressive Web Application</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="We Don&#x27;t Work Offline Now"><a href="/guides/progressive-web-application/#we-dont-work-offline-now">We Don&#x27;t Work Offline Now</a></li><li class="sidebar-item__anchor" title="Adding Workbox"><a href="/guides/progressive-web-application/#adding-workbox">Adding Workbox</a></li><li class="sidebar-item__anchor" title="Registering Our Service Worker"><a href="/guides/progressive-web-application/#registering-our-service-worker">Registering Our Service Worker</a></li><li class="sidebar-item__anchor" title="Conclusion"><a href="/guides/progressive-web-application/#conclusion">Conclusion</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/public-path/">Public Path</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Use Cases"><a href="/guides/public-path/#use-cases">Use Cases</a></li><li class="sidebar-item__anchor" title="Environment Based"><a href="/guides/public-path/#environment-based">Environment Based</a></li><li class="sidebar-item__anchor" title="On The Fly"><a href="/guides/public-path/#on-the-fly">On The Fly</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/integrations/">Integrations</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="NPM Scripts"><a href="/guides/integrations/#npm-scripts">NPM Scripts</a></li><li class="sidebar-item__anchor" title="Grunt"><a href="/guides/integrations/#grunt">Grunt</a></li><li class="sidebar-item__anchor" title="Gulp"><a href="/guides/integrations/#gulp">Gulp</a></li><li class="sidebar-item__anchor" title="Mocha"><a href="/guides/integrations/#mocha">Mocha</a></li><li class="sidebar-item__anchor" title="Karma"><a href="/guides/integrations/#karma">Karma</a></li></ul></div></div><div><div class="sidebar-item  "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/entry-advanced/">Advanced entry</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Multiple file types per entry"><a href="/guides/entry-advanced/#multiple-file-types-per-entry">Multiple file types per entry</a></li></ul></div></div><div><div class="sidebar-item sidebar-item--open "><i class="sidebar-item__toggle icon-chevron-right"></i><a class="sidebar-item__title" href="/guides/printable/">Printable</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Guides"><a href="/guides/printable/#guides">Guides</a></li><li class="sidebar-item__anchor" title="Getting Started"><a href="/guides/printable/#getting-started">Getting Started</a></li><li class="sidebar-item__anchor" title="Basic Setup"><a href="/guides/printable/#basic-setup">Basic Setup</a></li><li class="sidebar-item__anchor" title="Creating a Bundle"><a href="/guides/printable/#creating-a-bundle">Creating a Bundle</a></li><li class="sidebar-item__anchor" title="Modules"><a href="/guides/printable/#modules">Modules</a></li><li class="sidebar-item__anchor" title="Using a Configuration"><a href="/guides/printable/#using-a-configuration">Using a Configuration</a></li><li class="sidebar-item__anchor" title="NPM Scripts"><a href="/guides/printable/#npm-scripts">NPM Scripts</a></li><li class="sidebar-item__anchor" title="Conclusion"><a href="/guides/printable/#conclusion">Conclusion</a></li><li class="sidebar-item__anchor" title="Asset Management"><a href="/guides/printable/#asset-management">Asset Management</a></li><li class="sidebar-item__anchor" title="Setup"><a href="/guides/printable/#setup">Setup</a></li><li class="sidebar-item__anchor" title="Loading CSS"><a href="/guides/printable/#loading-css">Loading CSS</a></li><li class="sidebar-item__anchor" title="Loading Images"><a href="/guides/printable/#loading-images">Loading Images</a></li><li class="sidebar-item__anchor" title="Loading Fonts"><a href="/guides/printable/#loading-fonts">Loading Fonts</a></li><li class="sidebar-item__anchor" title="Loading Data"><a href="/guides/printable/#loading-data">Loading Data</a></li><li class="sidebar-item__anchor" title="Global Assets"><a href="/guides/printable/#global-assets">Global Assets</a></li><li class="sidebar-item__anchor" title="Wrapping up"><a href="/guides/printable/#wrapping-up">Wrapping up</a></li><li class="sidebar-item__anchor" title="Next guide"><a href="/guides/printable/#next-guide">Next guide</a></li><li class="sidebar-item__anchor" title="Further Reading"><a href="/guides/printable/#further-reading">Further Reading</a></li><li class="sidebar-item__anchor" title="Output Management"><a href="/guides/printable/#output-management">Output Management</a></li><li class="sidebar-item__anchor" title="Preparation"><a href="/guides/printable/#preparation">Preparation</a></li><li class="sidebar-item__anchor" title="Setting up HtmlWebpackPlugin"><a href="/guides/printable/#setting-up-htmlwebpackplugin">Setting up HtmlWebpackPlugin</a></li><li class="sidebar-item__anchor" title="Cleaning up the "><a href="/guides/printable/#cleaning-up-the-dist-folder">Cleaning up the </a></li><li class="sidebar-item__anchor" title="The Manifest"><a href="/guides/printable/#the-manifest">The Manifest</a></li><li class="sidebar-item__anchor" title="Conclusion"><a href="/guides/printable/#conclusion-1">Conclusion</a></li><li class="sidebar-item__anchor" title="Development"><a href="/guides/printable/#development">Development</a></li><li class="sidebar-item__anchor" title="Using source maps"><a href="/guides/printable/#using-source-maps">Using source maps</a></li><li class="sidebar-item__anchor" title="Choosing a Development Tool"><a href="/guides/printable/#choosing-a-development-tool">Choosing a Development Tool</a></li><li class="sidebar-item__anchor" title="Using Watch Mode"><a href="/guides/printable/#using-watch-mode">Using Watch Mode</a></li><li class="sidebar-item__anchor" title="Using webpack-dev-server"><a href="/guides/printable/#using-webpack-dev-server">Using webpack-dev-server</a></li><li class="sidebar-item__anchor" title="Using webpack-dev-middleware"><a href="/guides/printable/#using-webpack-dev-middleware">Using webpack-dev-middleware</a></li><li class="sidebar-item__anchor" title="Adjusting Your Text Editor"><a href="/guides/printable/#adjusting-your-text-editor">Adjusting Your Text Editor</a></li><li class="sidebar-item__anchor" title="Conclusion"><a href="/guides/printable/#conclusion-2">Conclusion</a></li><li class="sidebar-item__anchor" title="Code Splitting"><a href="/guides/printable/#code-splitting">Code Splitting</a></li><li class="sidebar-item__anchor" title="Entry Points"><a href="/guides/printable/#entry-points">Entry Points</a></li><li class="sidebar-item__anchor" title="Prevent Duplication"><a href="/guides/printable/#prevent-duplication">Prevent Duplication</a></li><li class="sidebar-item__anchor" title="Dynamic Imports"><a href="/guides/printable/#dynamic-imports">Dynamic Imports</a></li><li class="sidebar-item__anchor" title="Prefetching/Preloading modules"><a href="/guides/printable/#prefetchingpreloading-modules">Prefetching/Preloading modules</a></li><li class="sidebar-item__anchor" title="Bundle Analysis"><a href="/guides/printable/#bundle-analysis">Bundle Analysis</a></li><li class="sidebar-item__anchor" title="Next Steps"><a href="/guides/printable/#next-steps">Next Steps</a></li><li class="sidebar-item__anchor" title="Caching"><a href="/guides/printable/#caching">Caching</a></li><li class="sidebar-item__anchor" title="Output Filenames"><a href="/guides/printable/#output-filenames">Output Filenames</a></li><li class="sidebar-item__anchor" title="Extracting Boilerplate"><a href="/guides/printable/#extracting-boilerplate">Extracting Boilerplate</a></li><li class="sidebar-item__anchor" title="Module Identifiers"><a href="/guides/printable/#module-identifiers">Module Identifiers</a></li><li class="sidebar-item__anchor" title="Conclusion"><a href="/guides/printable/#conclusion-3">Conclusion</a></li><li class="sidebar-item__anchor" title="Authoring Libraries"><a href="/guides/printable/#authoring-libraries">Authoring Libraries</a></li><li class="sidebar-item__anchor" title="Authoring a Library"><a href="/guides/printable/#authoring-a-library">Authoring a Library</a></li><li class="sidebar-item__anchor" title="Base Configuration"><a href="/guides/printable/#base-configuration">Base Configuration</a></li><li class="sidebar-item__anchor" title="Externalize Lodash"><a href="/guides/printable/#externalize-lodash">Externalize Lodash</a></li><li class="sidebar-item__anchor" title="External Limitations"><a href="/guides/printable/#external-limitations">External Limitations</a></li><li class="sidebar-item__anchor" title="Expose the Library"><a href="/guides/printable/#expose-the-library">Expose the Library</a></li><li class="sidebar-item__anchor" title="Final Steps"><a href="/guides/printable/#final-steps">Final Steps</a></li><li class="sidebar-item__anchor" title="Environment Variables"><a href="/guides/printable/#environment-variables">Environment Variables</a></li><li class="sidebar-item__anchor" title="Build Performance"><a href="/guides/printable/#build-performance">Build Performance</a></li><li class="sidebar-item__anchor" title="General"><a href="/guides/printable/#general">General</a></li><li class="sidebar-item__anchor" title="Stay Up to Date"><a href="/guides/printable/#stay-up-to-date">Stay Up to Date</a></li><li class="sidebar-item__anchor" title="Loaders"><a href="/guides/printable/#loaders">Loaders</a></li><li class="sidebar-item__anchor" title="Bootstrap"><a href="/guides/printable/#bootstrap">Bootstrap</a></li><li class="sidebar-item__anchor" title="Resolving"><a href="/guides/printable/#resolving">Resolving</a></li><li class="sidebar-item__anchor" title="Dlls"><a href="/guides/printable/#dlls">Dlls</a></li><li class="sidebar-item__anchor" title="Smaller = Faster"><a href="/guides/printable/#smaller--faster">Smaller = Faster</a></li><li class="sidebar-item__anchor" title="Worker Pool"><a href="/guides/printable/#worker-pool">Worker Pool</a></li><li class="sidebar-item__anchor" title="Persistent cache"><a href="/guides/printable/#persistent-cache">Persistent cache</a></li><li class="sidebar-item__anchor" title="Custom plugins/loaders"><a href="/guides/printable/#custom-pluginsloaders">Custom plugins/loaders</a></li><li class="sidebar-item__anchor" title="Progress plugin"><a href="/guides/printable/#progress-plugin">Progress plugin</a></li><li class="sidebar-item__anchor" title="Development"><a href="/guides/printable/#development-1">Development</a></li><li class="sidebar-item__anchor" title="Incremental Builds"><a href="/guides/printable/#incremental-builds">Incremental Builds</a></li><li class="sidebar-item__anchor" title="Compile in Memory"><a href="/guides/printable/#compile-in-memory">Compile in Memory</a></li><li class="sidebar-item__anchor" title="stats.toJson speed"><a href="/guides/printable/#statstojson-speed">stats.toJson speed</a></li><li class="sidebar-item__anchor" title="Devtool"><a href="/guides/printable/#devtool">Devtool</a></li><li class="sidebar-item__anchor" title="Avoid Production Specific Tooling"><a href="/guides/printable/#avoid-production-specific-tooling">Avoid Production Specific Tooling</a></li><li class="sidebar-item__anchor" title="Minimal Entry Chunk"><a href="/guides/printable/#minimal-entry-chunk">Minimal Entry Chunk</a></li><li class="sidebar-item__anchor" title="Avoid Extra Optimization Steps"><a href="/guides/printable/#avoid-extra-optimization-steps">Avoid Extra Optimization Steps</a></li><li class="sidebar-item__anchor" title="Output Without Path Info"><a href="/guides/printable/#output-without-path-info">Output Without Path Info</a></li><li class="sidebar-item__anchor" title="Node.js Versions 8.9.10-9.11.1"><a href="/guides/printable/#nodejs-versions-8910-9111">Node.js Versions 8.9.10-9.11.1</a></li><li class="sidebar-item__anchor" title="TypeScript Loader"><a href="/guides/printable/#typescript-loader">TypeScript Loader</a></li><li class="sidebar-item__anchor" title="Production"><a href="/guides/printable/#production">Production</a></li><li class="sidebar-item__anchor" title="Multiple Compilations"><a href="/guides/printable/#multiple-compilations">Multiple Compilations</a></li><li class="sidebar-item__anchor" title="Source Maps"><a href="/guides/printable/#source-maps">Source Maps</a></li><li class="sidebar-item__anchor" title="Specific Tooling Issues"><a href="/guides/printable/#specific-tooling-issues">Specific Tooling Issues</a></li><li class="sidebar-item__anchor" title="Babel"><a href="/guides/printable/#babel">Babel</a></li><li class="sidebar-item__anchor" title="TypeScript"><a href="/guides/printable/#typescript">TypeScript</a></li><li class="sidebar-item__anchor" title="Sass"><a href="/guides/printable/#sass">Sass</a></li><li class="sidebar-item__anchor" title="Content Security Policies"><a href="/guides/printable/#content-security-policies">Content Security Policies</a></li><li class="sidebar-item__anchor" title="Examples"><a href="/guides/printable/#examples">Examples</a></li><li class="sidebar-item__anchor" title="Enabling CSP"><a href="/guides/printable/#enabling-csp">Enabling CSP</a></li><li class="sidebar-item__anchor" title="Development - Vagrant"><a href="/guides/printable/#development---vagrant">Development - Vagrant</a></li><li class="sidebar-item__anchor" title="Configuring the Project"><a href="/guides/printable/#configuring-the-project">Configuring the Project</a></li><li class="sidebar-item__anchor" title="Running the Server"><a href="/guides/printable/#running-the-server">Running the Server</a></li><li class="sidebar-item__anchor" title="Advanced Usage with nginx"><a href="/guides/printable/#advanced-usage-with-nginx">Advanced Usage with nginx</a></li><li class="sidebar-item__anchor" title="Conclusion"><a href="/guides/printable/#conclusion-4">Conclusion</a></li><li class="sidebar-item__anchor" title="Dependency Management"><a href="/guides/printable/#dependency-management">Dependency Management</a></li><li class="sidebar-item__anchor" title="require with expression"><a href="/guides/printable/#require-with-expression">require with expression</a></li><li class="sidebar-item__anchor" title="require.context"><a href="/guides/printable/#requirecontext">require.context</a></li><li class="sidebar-item__anchor" title="context module API"><a href="/guides/printable/#context-module-api">context module API</a></li><li class="sidebar-item__anchor" title="Installation"><a href="/guides/printable/#installation">Installation</a></li><li class="sidebar-item__anchor" title="Prerequisites"><a href="/guides/printable/#prerequisites">Prerequisites</a></li><li class="sidebar-item__anchor" title="Local Installation"><a href="/guides/printable/#local-installation">Local Installation</a></li><li class="sidebar-item__anchor" title="Global Installation"><a href="/guides/printable/#global-installation">Global Installation</a></li><li class="sidebar-item__anchor" title="Bleeding Edge"><a href="/guides/printable/#bleeding-edge">Bleeding Edge</a></li><li class="sidebar-item__anchor" title="Scaffolding"><a href="/guides/printable/#scaffolding">Scaffolding</a></li><li class="sidebar-item__anchor" title="Creating a scaffold"><a href="/guides/printable/#creating-a-scaffold">Creating a scaffold</a></li><li class="sidebar-item__anchor" title="Writing a scaffold"><a href="/guides/printable/#writing-a-scaffold">Writing a scaffold</a></li><li class="sidebar-item__anchor" title="Running a scaffold"><a href="/guides/printable/#running-a-scaffold">Running a scaffold</a></li><li class="sidebar-item__anchor" title="Running a scaffold locally"><a href="/guides/printable/#running-a-scaffold-locally">Running a scaffold locally</a></li><li class="sidebar-item__anchor" title="Running a scaffold from npm"><a href="/guides/printable/#running-a-scaffold-from-npm">Running a scaffold from npm</a></li><li class="sidebar-item__anchor" title="API"><a href="/guides/printable/#api">API</a></li><li class="sidebar-item__anchor" title="Required"><a href="/guides/printable/#required">Required</a></li><li class="sidebar-item__anchor" title="Optional"><a href="/guides/printable/#optional">Optional</a></li><li class="sidebar-item__anchor" title="opts.env.configuration"><a href="/guides/printable/#optsenvconfigurationrequired">opts.env.configuration</a></li><li class="sidebar-item__anchor" title="opts.env.configuration.myObj"><a href="/guides/printable/#optsenvconfigurationmyobj-required">opts.env.configuration.myObj</a></li><li class="sidebar-item__anchor" title="myObj.webpackOptions"><a href="/guides/printable/#myobjwebpackoptions-required">myObj.webpackOptions</a></li><li class="sidebar-item__anchor" title="writing"><a href="/guides/printable/#writing-required">writing</a></li><li class="sidebar-item__anchor" title="myObj.merge"><a href="/guides/printable/#myobjmerge-optional">myObj.merge</a></li><li class="sidebar-item__anchor" title="myObj.topScope"><a href="/guides/printable/#myobjtopscopeoptional">myObj.topScope</a></li><li class="sidebar-item__anchor" title="myObj.configName"><a href="/guides/printable/#myobjconfignameoptional">myObj.configName</a></li><li class="sidebar-item__anchor" title="Hot Module Replacement"><a href="/guides/printable/#hot-module-replacement">Hot Module Replacement</a></li><li class="sidebar-item__anchor" title="Enabling HMR"><a href="/guides/printable/#enabling-hmr">Enabling HMR</a></li><li class="sidebar-item__anchor" title="Via the Node.js API"><a href="/guides/printable/#via-the-nodejs-api">Via the Node.js API</a></li><li class="sidebar-item__anchor" title="Gotchas"><a href="/guides/printable/#gotchas">Gotchas</a></li><li class="sidebar-item__anchor" title="HMR with Stylesheets"><a href="/guides/printable/#hmr-with-stylesheets">HMR with Stylesheets</a></li><li class="sidebar-item__anchor" title="Other Code and Frameworks"><a href="/guides/printable/#other-code-and-frameworks">Other Code and Frameworks</a></li><li class="sidebar-item__anchor" title="Tree Shaking"><a href="/guides/printable/#tree-shaking">Tree Shaking</a></li><li class="sidebar-item__anchor" title="Add a Utility"><a href="/guides/printable/#add-a-utility">Add a Utility</a></li><li class="sidebar-item__anchor" title="Mark the file as side-effect-free"><a href="/guides/printable/#mark-the-file-as-side-effect-free">Mark the file as side-effect-free</a></li><li class="sidebar-item__anchor" title="Clarifying tree shaking and "><a href="/guides/printable/#clarifying-tree-shaking-and-sideeffects">Clarifying tree shaking and </a></li><li class="sidebar-item__anchor" title="Minify the Output"><a href="/guides/printable/#minify-the-output">Minify the Output</a></li><li class="sidebar-item__anchor" title="Conclusion"><a href="/guides/printable/#conclusion-5">Conclusion</a></li><li class="sidebar-item__anchor" title="Production"><a href="/guides/printable/#production-1">Production</a></li><li class="sidebar-item__anchor" title="Setup"><a href="/guides/printable/#setup-1">Setup</a></li><li class="sidebar-item__anchor" title="NPM Scripts"><a href="/guides/printable/#npm-scripts-1">NPM Scripts</a></li><li class="sidebar-item__anchor" title="Specify the Mode"><a href="/guides/printable/#specify-the-mode">Specify the Mode</a></li><li class="sidebar-item__anchor" title="Minification"><a href="/guides/printable/#minification">Minification</a></li><li class="sidebar-item__anchor" title="Source Mapping"><a href="/guides/printable/#source-mapping">Source Mapping</a></li><li class="sidebar-item__anchor" title="Minimize CSS"><a href="/guides/printable/#minimize-css">Minimize CSS</a></li><li class="sidebar-item__anchor" title="CLI Alternatives"><a href="/guides/printable/#cli-alternatives">CLI Alternatives</a></li><li class="sidebar-item__anchor" title="Lazy Loading"><a href="/guides/printable/#lazy-loading">Lazy Loading</a></li><li class="sidebar-item__anchor" title="Example"><a href="/guides/printable/#example">Example</a></li><li class="sidebar-item__anchor" title="Frameworks"><a href="/guides/printable/#frameworks">Frameworks</a></li><li class="sidebar-item__anchor" title="Shimming"><a href="/guides/printable/#shimming">Shimming</a></li><li class="sidebar-item__anchor" title="Shimming Globals"><a href="/guides/printable/#shimming-globals">Shimming Globals</a></li><li class="sidebar-item__anchor" title="Granular Shimming"><a href="/guides/printable/#granular-shimming">Granular Shimming</a></li><li class="sidebar-item__anchor" title="Global Exports"><a href="/guides/printable/#global-exports">Global Exports</a></li><li class="sidebar-item__anchor" title="Loading Polyfills"><a href="/guides/printable/#loading-polyfills">Loading Polyfills</a></li><li class="sidebar-item__anchor" title="Further Optimizations"><a href="/guides/printable/#further-optimizations">Further Optimizations</a></li><li class="sidebar-item__anchor" title="Node Built-Ins"><a href="/guides/printable/#node-built-ins">Node Built-Ins</a></li><li class="sidebar-item__anchor" title="Other Utilities"><a href="/guides/printable/#other-utilities">Other Utilities</a></li><li class="sidebar-item__anchor" title="TypeScript"><a href="/guides/printable/#typescript-1">TypeScript</a></li><li class="sidebar-item__anchor" title="Basic Setup"><a href="/guides/printable/#basic-setup-1">Basic Setup</a></li><li class="sidebar-item__anchor" title="Loader"><a href="/guides/printable/#loader">Loader</a></li><li class="sidebar-item__anchor" title="Source Maps"><a href="/guides/printable/#source-maps-1">Source Maps</a></li><li class="sidebar-item__anchor" title="Using Third Party Libraries"><a href="/guides/printable/#using-third-party-libraries">Using Third Party Libraries</a></li><li class="sidebar-item__anchor" title="Importing Other Assets"><a href="/guides/printable/#importing-other-assets">Importing Other Assets</a></li><li class="sidebar-item__anchor" title="Build Performance"><a href="/guides/printable/#build-performance-1">Build Performance</a></li><li class="sidebar-item__anchor" title="Progressive Web Application"><a href="/guides/printable/#progressive-web-application">Progressive Web Application</a></li><li class="sidebar-item__anchor" title="We Don&#x27;t Work Offline Now"><a href="/guides/printable/#we-dont-work-offline-now">We Don&#x27;t Work Offline Now</a></li><li class="sidebar-item__anchor" title="Adding Workbox"><a href="/guides/printable/#adding-workbox">Adding Workbox</a></li><li class="sidebar-item__anchor" title="Registering Our Service Worker"><a href="/guides/printable/#registering-our-service-worker">Registering Our Service Worker</a></li><li class="sidebar-item__anchor" title="Conclusion"><a href="/guides/printable/#conclusion-6">Conclusion</a></li><li class="sidebar-item__anchor" title="Public Path"><a href="/guides/printable/#public-path">Public Path</a></li><li class="sidebar-item__anchor" title="Use Cases"><a href="/guides/printable/#use-cases">Use Cases</a></li><li class="sidebar-item__anchor" title="Environment Based"><a href="/guides/printable/#environment-based">Environment Based</a></li><li class="sidebar-item__anchor" title="On The Fly"><a href="/guides/printable/#on-the-fly">On The Fly</a></li><li class="sidebar-item__anchor" title="Integrations"><a href="/guides/printable/#integrations">Integrations</a></li><li class="sidebar-item__anchor" title="NPM Scripts"><a href="/guides/printable/#npm-scripts-2">NPM Scripts</a></li><li class="sidebar-item__anchor" title="Grunt"><a href="/guides/printable/#grunt">Grunt</a></li><li class="sidebar-item__anchor" title="Gulp"><a href="/guides/printable/#gulp">Gulp</a></li><li class="sidebar-item__anchor" title="Mocha"><a href="/guides/printable/#mocha">Mocha</a></li><li class="sidebar-item__anchor" title="Karma"><a href="/guides/printable/#karma">Karma</a></li><li class="sidebar-item__anchor" title="Advanced entry"><a href="/guides/printable/#advanced-entry">Advanced entry</a></li><li class="sidebar-item__anchor" title="Multiple file types per entry"><a href="/guides/printable/#multiple-file-types-per-entry">Multiple file types per entry</a></li></ul></div></div></div></nav><section class="page"><div class="page-links"><a class="page-links__link" href="https://github.com/webpack/webpack.js.org/edit/master/src/content/guides/printable.md">Edit Document<i class="page-links__icon icon-edit"></i></a><span class="page-links__gap">|</span><button class="page-links__link page-links__print as-link" title="Print this page">Print Document<img src="/96ccbfac58b65e83657a220603e00abe.svg"/></button></div><div class="markdown"><h1>Printable</h1><div><h1 id="guides">Guides<a href="#guides" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>This section contains guides for understanding and mastering the wide variety of tools and features that webpack offers. The first is a simple guide that takes you through <a href="/guides/getting-started/">getting started</a>.</p>
<p>The guides get more advanced as you go on. Most serve as a starting point, and once completed you should feel more comfortable diving into the actual <a href="/configuration/">documentation</a>.</p>
<blockquote class="warning">
<p>The output shown from running webpack in the guides may differ slightly from the output of newer versions. This is to be expected. As long as the bundles look similar and run correctly, then there shouldn't be any issues. If you do come across an example that seems to be broken by a new version, please <a href="https://github.com/webpack/webpack.js.org/issues/new/choose">create an issue</a> and we will do our best to resolve the discrepancy.</p>
</blockquote>
<h1 id="getting-started">Getting Started<a href="#getting-started" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>webpack is used to compile JavaScript modules. Once <a href="/guides/installation">installed</a>, you can interface with webpack either from its <a href="/api/cli">CLI</a> or <a href="/api/node">API</a>. If you're still new to webpack, please read through the <a href="/concepts">core concepts</a> and <a href="/comparison">this comparison</a> to learn why you might use it over the other tools that are out in the community.</p>
<h2 id="basic-setup">Basic Setup<a href="#basic-setup" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>First let's create a directory, initialize npm, <a href="/guides/installation/#local-installation">install webpack locally</a>, and install the webpack-cli (the tool used to run webpack on the command line):</p>
<pre><code class="hljs language-bash"><span class="token function">mkdir</span> webpack-demo
<span class="token function">cd</span> webpack-demo
<span class="token function">npm</span> init -y
<span class="token function">npm</span> <span class="token function">install</span> webpack@4.x  webpack-cli@3.x --save-dev</code></pre>
<blockquote class="tip">
<p>Throughout the Guides we will use <code>diff</code> blocks to show you what changes we're making to directories, files, and code.</p>
</blockquote>
<p>Now we'll create the following directory structure, files and their contents:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">  webpack-demo
  |- package.json
<span class="token inserted">+ |- index.html</span>
<span class="token inserted">+ |- /src</span>
<span class="token inserted">+   |- index.js</span></code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-javascript"><span class="token keyword">function</span> <span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Lodash, currently included via a script, is required for this line to work</span>
  element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Hello'</span><span class="token punctuation">,</span> <span class="token string">'webpack'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> element<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><strong>index.html</strong></p>
<pre><code class="hljs language-html"><span class="token doctype">&#x3C;!doctype html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>html</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>title</span><span class="token punctuation">></span></span>Getting Started<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://unpkg.com/lodash@4.16.6<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./src/index.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>html</span><span class="token punctuation">></span></span></code></pre>
<p>We also need to adjust our <code>package.json</code> file in order to make sure we mark our package as <code>private</code>, as well as removing the <code>main</code> entry. This is to prevent an accidental publish of your code.</p>
<blockquote class="tip">
<p>If you want to learn more about the inner workings of <code>package.json</code>, then we recommend reading the <a href="https://docs.npmjs.com/files/package.json">npm documentation</a>.</p>
</blockquote>
<p><strong>package.json</strong></p>
<pre><code class="hljs language-diff">  {
    "name": "webpack-demo",
    "version": "1.0.0",
    "description": "",
<span class="token inserted">+   "private": true,</span>
<span class="token deleted">-   "main": "index.js",</span>
    "scripts": {
      "test": "echo \"Error: no test specified\" &#x26;&#x26; exit 1"
    },
    "keywords": [],
    "author": "",
    "license": "ISC",
    "devDependencies": {
      "webpack": "^4.20.2",
      "webpack-cli": "^3.1.2"
    },
    "dependencies": {}
  }</code></pre>
<p>In this example, there are implicit dependencies between the <code>&#x3C;script></code> tags. Our <code>index.js</code> file depends on <code>lodash</code> being included in the page before it runs. This is because <code>index.js</code> never explicitly declared a need for <code>lodash</code>; it just assumes that the global variable <code>_</code> exists.</p>
<p>There are problems with managing JavaScript projects this way:</p>
<ul>
<li>It is not immediately apparent that the script depends on an external library.</li>
<li>If a dependency is missing, or included in the wrong order, the application will not function properly.</li>
<li>If a dependency is included but not used, the browser will be forced to download unnecessary code.</li>
</ul>
<p>Let's use webpack to manage these scripts instead.</p>
<h2 id="creating-a-bundle">Creating a Bundle<a href="#creating-a-bundle" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>First we'll tweak our directory structure slightly, separating the "source" code (<code>/src</code>) from our "distribution" code (<code>/dist</code>). The "source" code is the code that we'll write and edit. The "distribution" code is the minimized and optimized <code>output</code> of our build process that will eventually be loaded in the browser. Tweak the directory structure as follows:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">  webpack-demo
  |- package.json
<span class="token inserted">+ |- /dist</span>
<span class="token inserted">+   |- index.html</span>
<span class="token deleted">- |- index.html</span>
  |- /src
    |- index.js</code></pre>
<p>To bundle the <code>lodash</code> dependency with <code>index.js</code>, we'll need to install the library locally:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save lodash</code></pre>
<blockquote class="tip">
<p>When installing a package that will be bundled into your production bundle, you should use <code>npm install --save</code>. If you're installing a package for development purposes (e.g. a linter, testing libraries, etc.) then you should use <code>npm install --save-dev</code>. More information can be found in the <a href="https://docs.npmjs.com/cli/install">npm documentation</a>.</p>
</blockquote>
<p>Now, lets import <code>lodash</code> in our script:</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token inserted">+ import _ from 'lodash';</span>
<span class="token inserted">+</span>
  function component() {
    const element = document.createElement('div');

<span class="token deleted">-   // Lodash, currently included via a script, is required for this line to work</span>
    element.innerHTML = _.join(['Hello', 'webpack'], ' ');

    return element;
  }

  document.body.appendChild(component());</code></pre>
<p>Now, since we'll be bundling our scripts, we have to update our <code>index.html</code> file. Let's remove the lodash <code>&#x3C;script></code>, as we now <code>import</code> it, and modify the other <code>&#x3C;script></code> tag to load the bundle, instead of the raw <code>/src</code> file:</p>
<p><strong>dist/index.html</strong></p>
<pre><code class="hljs language-diff">  &#x3C;!doctype html>
  &#x3C;html>
   &#x3C;head>
     &#x3C;title>Getting Started&#x3C;/title>
<span class="token deleted">-    &#x3C;script src="https://unpkg.com/lodash@4.16.6">&#x3C;/script></span>
   &#x3C;/head>
   &#x3C;body>
<span class="token deleted">-    &#x3C;script src="./src/index.js">&#x3C;/script></span>
<span class="token inserted">+    &#x3C;script src="main.js">&#x3C;/script></span>
   &#x3C;/body>
  &#x3C;/html></code></pre>
<p>In this setup, <code>index.js</code> explicitly requires <code>lodash</code> to be present, and binds it as <code>_</code> (no global scope pollution). By stating what dependencies a module needs, webpack can use this information to build a dependency graph. It then uses the graph to generate an optimized bundle where scripts will be executed in the correct order.</p>
<p>With that said, let's run <code>npx webpack</code>, which will take our script at <code>src/index.js</code> as the <a href="/concepts/entry-points">entry point</a>, and will generate <code>dist/main.js</code> as the <a href="/concepts/output">output</a>. The <code>npx</code> command, which ships with Node 8.2/npm 5.2.0 or higher, runs the webpack binary (<code>./node_modules/.bin/webpack</code>) of the webpack package we installed in the beginning:</p>
<pre><code class="hljs language-bash">npx webpack

<span class="token punctuation">..</span>.
Built at: 13/06/2018 11:52:07
  Asset      Size  Chunks             Chunk Names
main.js  70.4 KiB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
<span class="token punctuation">..</span>.

WARNING <span class="token keyword">in</span> configuration
The <span class="token string">'mode'</span> option has not been set, webpack will fallback to <span class="token string">'production'</span> <span class="token keyword">for</span> this value. Set <span class="token string">'mode'</span> option to <span class="token string">'development'</span> or <span class="token string">'production'</span> to <span class="token function">enable</span> defaults <span class="token keyword">for</span> each environment.
You can also <span class="token keyword">set</span> it to <span class="token string">'none'</span> to disable any default behavior. Learn more: https://webpack.js.org/configuration/mode/</code></pre>
<blockquote class="tip">
<p>Your output may vary a bit, but if the build is successful then you are good to go. Also, don't worry about the warning, we'll tackle that later.</p>
</blockquote>
<p>Open <code>index.html</code> in your browser and, if everything went right, you should see the following text: 'Hello webpack'.</p>
<blockquote class="warning">
<p>If you are getting a syntax error in the middle of minified JavaScript when opening <code>index.html</code> in the browser, set <a href="/configuration/mode/#mode-development"><code>development mode</code></a> and run <code>npx webpack</code> again. This is related to running <code>npx webpack</code> on latest Node.js (v12.5+) instead of <a href="https://nodejs.org/en/">LTS version</a>.</p>
</blockquote>
<h2 id="modules">Modules<a href="#modules" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import"><code>import</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export"><code>export</code></a> statements have been standardized in <a href="https://babeljs.io/docs/en/learn/">ES2015</a>. Although they are not supported in most browsers yet, webpack does support them out of the box.</p>
<p>Behind the scenes, webpack actually "transpiles" the code so that older browsers can also run it. If you inspect <code>dist/main.js</code>, you might be able to see how webpack does this, it's quite ingenious! Besides <code>import</code> and <code>export</code>, webpack supports various other module syntaxes as well, see <a href="/api/module-methods">Module API</a> for more information.</p>
<p>Note that webpack will not alter any code other than <code>import</code> and <code>export</code> statements. If you are using other <a href="http://es6-features.org/">ES2015 features</a>, make sure to <a href="/loaders/#transpiling">use a transpiler</a> such as <a href="https://babeljs.io/">Babel</a> or <a href="https://buble.surge.sh/guide/">Bublé</a> via webpack's <a href="/concepts/loaders/">loader system</a>.</p>
<h2 id="using-a-configuration">Using a Configuration<a href="#using-a-configuration" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>As of version 4, webpack doesn't require any configuration, but most projects will need a more complex setup, which is why webpack supports a <a href="/concepts/configuration">configuration file</a>. This is much more efficient than having to manually type in a lot of commands in the terminal, so let's create one:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">  webpack-demo
  |- package.json
<span class="token inserted">+ |- webpack.config.js</span>
  |- /dist
    |- index.html
  |- /src
    |- index.js</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'main.js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>Now, let's run the build again but instead using our new configuration file:</p>
<pre><code class="hljs language-bash">npx webpack --config webpack.config.js

<span class="token punctuation">..</span>.
  Asset      Size  Chunks             Chunk Names
main.js  70.4 KiB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
<span class="token punctuation">..</span>.

WARNING <span class="token keyword">in</span> configuration
The <span class="token string">'mode'</span> option has not been set, webpack will fallback to <span class="token string">'production'</span> <span class="token keyword">for</span> this value. Set <span class="token string">'mode'</span> option to <span class="token string">'development'</span> or <span class="token string">'production'</span> to <span class="token function">enable</span> defaults <span class="token keyword">for</span> each environment.
You can also <span class="token keyword">set</span> it to <span class="token string">'none'</span> to disable any default behavior. Learn more: https://webpack.js.org/configuration/mode/</code></pre>
<blockquote class="tip">
<p>If a <code>webpack.config.js</code> is present, the <code>webpack</code> command picks it up by default. We use the <code>--config</code> option here only to show that you can pass a config of any name. This will be useful for more complex configurations that need to be split into multiple files.</p>
</blockquote>
<p>A configuration file allows far more flexibility than simple CLI usage. We can specify loader rules, plugins, resolve options and many other enhancements this way. See the <a href="/configuration">configuration documentation</a> to learn more.</p>
<h2 id="npm-scripts">NPM Scripts<a href="#npm-scripts" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Given it's not particularly fun to run a local copy of webpack from the CLI, we can set up a little shortcut. Let's adjust our <em>package.json</em> by adding an <a href="https://docs.npmjs.com/misc/scripts">npm script</a>:</p>
<p><strong>package.json</strong></p>
<pre><code class="hljs language-diff">  {
    "name": "webpack-demo",
    "version": "1.0.0",
    "description": "",
    "scripts": {
<span class="token deleted">-      "test": "echo \"Error: no test specified\" &#x26;&#x26; exit 1"</span>
<span class="token inserted">+      "test": "echo \"Error: no test specified\" &#x26;&#x26; exit 1",</span>
<span class="token inserted">+      "build": "webpack"</span>
    },
    "keywords": [],
    "author": "",
    "license": "ISC",
    "devDependencies": {
      "webpack": "^4.20.2",
      "webpack-cli": "^3.1.2"
    },
    "dependencies": {
      "lodash": "^4.17.5"
    }
  }</code></pre>
<p>Now the <code>npm run build</code> command can be used in place of the <code>npx</code> command we used earlier. Note that within <code>scripts</code> we can reference locally installed npm packages by name the same way we did with <code>npx</code>. This convention is the standard in most npm-based projects because it allows all contributors to use the same set of common scripts (each with flags like <code>--config</code> if necessary).</p>
<p>Now run the following command and see if your script alias works:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> run build

<span class="token punctuation">..</span>.
  Asset      Size  Chunks             Chunk Names
main.js  70.4 KiB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
<span class="token punctuation">..</span>.

WARNING <span class="token keyword">in</span> configuration
The <span class="token string">'mode'</span> option has not been set, webpack will fallback to <span class="token string">'production'</span> <span class="token keyword">for</span> this value. Set <span class="token string">'mode'</span> option to <span class="token string">'development'</span> or <span class="token string">'production'</span> to <span class="token function">enable</span> defaults <span class="token keyword">for</span> each environment.
You can also <span class="token keyword">set</span> it to <span class="token string">'none'</span> to disable any default behavior. Learn more: https://webpack.js.org/configuration/mode/.</code></pre>
<blockquote class="tip">
<p>Custom parameters can be passed to webpack by adding two dashes between the <code>npm run build</code> command and your parameters, e.g. <code>npm run build -- --colors</code>.</p>
</blockquote>
<h2 id="conclusion">Conclusion<a href="#conclusion" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Now that you have a basic build together you should move on to the next guide <a href="/guides/asset-management"><code>Asset Management</code></a> to learn how to manage assets like images and fonts with webpack. At this point, your project should look like this:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">webpack-demo
|- package.json
|- webpack.config.js
|- /dist
  |- main.js
  |- index.html
|- /src
  |- index.js
|- /node_modules</code></pre>
<blockquote class="tip">
<p>If you're using npm 5, you'll probably also see a <code>package-lock.json</code> file in your directory.</p>
</blockquote>
<p>If you want to learn more about webpack's design, you can check out the <a href="/concepts">basic concepts</a> and <a href="/configuration">configuration</a> pages. Furthermore, the <a href="/api">API</a> section digs into the various interfaces webpack offers.</p>
<h1 id="asset-management">Asset Management<a href="#asset-management" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>If you've been following the guides from the start, you will now have a small project that shows "Hello webpack". Now let's try to incorporate some other assets, like images, to see how they can be handled.</p>
<p>Prior to webpack, front-end developers would use tools like grunt and gulp to process these assets and move them from their <code>/src</code> folder into their <code>/dist</code> or <code>/build</code> directory. The same idea was used for JavaScript modules, but tools like webpack will <strong>dynamically bundle</strong> all dependencies (creating what's known as a <a href="/concepts/dependency-graph">dependency graph</a>). This is great because every module now <em>explicitly states its dependencies</em> and we'll avoid bundling modules that aren't in use.</p>
<p>One of the coolest webpack features is that you can also <em>include any other type of file</em>, besides JavaScript, for which there is a loader. This means that the same benefits listed above for JavaScript (e.g. explicit dependencies) can be applied to everything used in building a website or web app. Let's start with CSS, as you may already be familiar with that setup.</p>
<h2 id="setup">Setup<a href="#setup" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Let's make a minor change to our project before we get started:</p>
<p><strong>dist/index.html</strong></p>
<pre><code class="hljs language-diff">  &#x3C;!doctype html>
  &#x3C;html>
    &#x3C;head>
<span class="token deleted">-    &#x3C;title>Getting Started&#x3C;/title></span>
<span class="token inserted">+    &#x3C;title>Asset Management&#x3C;/title></span>
    &#x3C;/head>
    &#x3C;body>
<span class="token deleted">-     &#x3C;script src="main.js">&#x3C;/script></span>
<span class="token inserted">+     &#x3C;script src="bundle.js">&#x3C;/script></span>
    &#x3C;/body>
  &#x3C;/html></code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');

  module.exports = {
    entry: './src/index.js',
    output: {
<span class="token deleted">-     filename: 'main.js',</span>
<span class="token inserted">+     filename: 'bundle.js',</span>
      path: path.resolve(__dirname, 'dist'),
    },
  };</code></pre>
<h2 id="loading-css">Loading CSS<a href="#loading-css" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>In order to <code>import</code> a CSS file from within a JavaScript module, you need to install and add the <a href="/loaders/style-loader">style-loader</a> and <a href="/loaders/css-loader">css-loader</a> to your <a href="/configuration/module"><code>module</code> configuration</a>:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev style-loader css-loader</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');

  module.exports = {
    entry: './src/index.js',
    output: {
      filename: 'bundle.js',
      path: path.resolve(__dirname, 'dist'),
    },
<span class="token inserted">+   module: {</span>
<span class="token inserted">+     rules: [</span>
<span class="token inserted">+       {</span>
<span class="token inserted">+         test: /\.css$/,</span>
<span class="token inserted">+         use: [</span>
<span class="token inserted">+           'style-loader',</span>
<span class="token inserted">+           'css-loader',</span>
<span class="token inserted">+         ],</span>
<span class="token inserted">+       },</span>
<span class="token inserted">+     ],</span>
<span class="token inserted">+   },</span>
  };</code></pre>
<blockquote class="tip">
<p>webpack uses a regular expression to determine which files it should look for and serve to a specific loader. In this case, any file that ends with <code>.css</code> will be served to the <code>style-loader</code> and the <code>css-loader</code>.</p>
</blockquote>
<p>This enables you to <code>import './style.css'</code> into the file that depends on that styling. Now, when that module is run, a <code>&#x3C;style></code> tag with the stringified css will be inserted into the <code>&#x3C;head></code> of your html file.</p>
<p>Let's try it out by adding a new <code>style.css</code> file to our project and import it in our <code>index.js</code>:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">  webpack-demo
  |- package.json
  |- webpack.config.js
  |- /dist
    |- bundle.js
    |- index.html
  |- /src
<span class="token inserted">+   |- style.css</span>
    |- index.js
  |- /node_modules</code></pre>
<p><strong>src/style.css</strong></p>
<pre><code class="hljs language-css"><span class="token selector">.hello</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff">  import _ from 'lodash';
<span class="token inserted">+ import './style.css';</span>

  function component() {
    const element = document.createElement('div');

    // Lodash, now imported by this script
    element.innerHTML = _.join(['Hello', 'webpack'], ' ');
<span class="token inserted">+   element.classList.add('hello');</span>

    return element;
  }

  document.body.appendChild(component());</code></pre>
<p>Now run your build command:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> run build

<span class="token punctuation">..</span>.
    Asset      Size  Chunks             Chunk Names
bundle.js  76.4 KiB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
Entrypoint main <span class="token operator">=</span> bundle.js
<span class="token punctuation">..</span>.</code></pre>
<p>Open up <code>index.html</code> in your browser again and you should see that <code>Hello webpack</code> is now styled in red. To see what webpack did, inspect the page (don't view the page source, as it won't show you the result, because the <code>&#x3C;style></code> tag is dynamically created by JavaScript) and look at the page's head tags. It should contain the style block that we imported in <code>index.js</code>.</p>
<p>Note that you can, and in most cases should, <a href="/plugins/mini-css-extract-plugin/#minimizing-for-production">minimize css</a> for better load times in production. On top of that, loaders exist for pretty much any flavor of CSS you can think of -- <a href="/loaders/postcss-loader">postcss</a>, <a href="/loaders/sass-loader">sass</a>, and <a href="/loaders/less-loader">less</a> to name a few.</p>
<h2 id="loading-images">Loading Images<a href="#loading-images" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>So now we're pulling in our CSS, but what about our images like backgrounds and icons? Using the <a href="/loaders/file-loader">file-loader</a> we can easily incorporate those in our system as well:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev file-loader</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');

  module.exports = {
    entry: './src/index.js',
    output: {
      filename: 'bundle.js',
      path: path.resolve(__dirname, 'dist'),
    },
    module: {
      rules: [
        {
          test: /\.css$/,
          use: [
            'style-loader',
            'css-loader'
          ],
        },
<span class="token inserted">+       {</span>
<span class="token inserted">+         test: /\.(png|svg|jpg|gif)$/,</span>
<span class="token inserted">+         use: [</span>
<span class="token inserted">+           'file-loader',</span>
<span class="token inserted">+         ],</span>
<span class="token inserted">+       },</span>
      ],
    },
  };</code></pre>
<p>Now, when you <code>import MyImage from './my-image.png'</code>, that image will be processed and added to your <code>output</code> directory <em>and</em> the <code>MyImage</code> variable will contain the final url of that image after processing. When using the <a href="/loaders/css-loader">css-loader</a>, as shown above, a similar process will occur for <code>url('./my-image.png')</code> within your CSS. The loader will recognize this is a local file, and replace the <code>'./my-image.png'</code> path with the final path to the image in your <code>output</code> directory. The <a href="/loaders/html-loader">html-loader</a> handles <code>&#x3C;img src="./my-image.png" /></code> in the same manner.</p>
<p>Let's add an image to our project and see how this works, you can use any image you like:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">  webpack-demo
  |- package.json
  |- webpack.config.js
  |- /dist
    |- bundle.js
    |- index.html
  |- /src
<span class="token inserted">+   |- icon.png</span>
    |- style.css
    |- index.js
  |- /node_modules</code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff">  import _ from 'lodash';
  import './style.css';
<span class="token inserted">+ import Icon from './icon.png';</span>

  function component() {
    const element = document.createElement('div');

    // Lodash, now imported by this script
    element.innerHTML = _.join(['Hello', 'webpack'], ' ');
    element.classList.add('hello');

<span class="token inserted">+   // Add the image to our existing div.</span>
<span class="token inserted">+   const myIcon = new Image();</span>
<span class="token inserted">+   myIcon.src = Icon;</span>
<span class="token inserted">+</span>
<span class="token inserted">+   element.appendChild(myIcon);</span>

    return element;
  }

  document.body.appendChild(component());</code></pre>
<p><strong>src/style.css</strong></p>
<pre><code class="hljs language-diff">  .hello {
    color: red;
<span class="token inserted">+   background: url('./icon.png');</span>
  }</code></pre>
<p>Let's create a new build and open up the index.html file again:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> run build

<span class="token punctuation">..</span>.
                               Asset      Size  Chunks                    Chunk Names
da4574bb234ddc4bb47cbe1ca4b20303.png  3.01 MiB          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>
                           bundle.js  76.7 KiB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>         main
Entrypoint main <span class="token operator">=</span> bundle.js
<span class="token punctuation">..</span>.</code></pre>
<p>If all went well, you should now see your icon as a repeating background, as well as an <code>img</code> element beside our <code>Hello webpack</code> text. If you inspect this element, you'll see that the actual filename has changed to something like <code>5c999da72346a995e7e2718865d019c8.png</code>. This means webpack found our file in the <code>src</code> folder and processed it!</p>
<blockquote class="tip">
<p>A logical next step from here is minifying and optimizing your images. Check out the <a href="https://github.com/tcoopman/image-webpack-loader">image-webpack-loader</a> and <a href="/loaders/url-loader">url-loader</a> for more on how you can enhance your image loading process.</p>
</blockquote>
<h2 id="loading-fonts">Loading Fonts<a href="#loading-fonts" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>So what about other assets like fonts? The file and url loaders will take any file you load through them and output it to your build directory. This means we can use them for any kind of file, including fonts. Let's update our <code>webpack.config.js</code> to handle font files:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');

  module.exports = {
    entry: './src/index.js',
    output: {
      filename: 'bundle.js',
      path: path.resolve(__dirname, 'dist'),
    },
    module: {
      rules: [
        {
          test: /\.css$/,
          use: [
            'style-loader',
            'css-loader'
          ],
        },
        {
          test: /\.(png|svg|jpg|gif)$/,
          use: [
            'file-loader',
          ],
        },
<span class="token inserted">+       {</span>
<span class="token inserted">+         test: /\.(woff|woff2|eot|ttf|otf)$/,</span>
<span class="token inserted">+         use: [</span>
<span class="token inserted">+           'file-loader',</span>
<span class="token inserted">+         ],</span>
<span class="token inserted">+       },</span>
      ],
    },
  };</code></pre>
<p>Add some font files to your project:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">  webpack-demo
  |- package.json
  |- webpack.config.js
  |- /dist
    |- bundle.js
    |- index.html
  |- /src
<span class="token inserted">+   |- my-font.woff</span>
<span class="token inserted">+   |- my-font.woff2</span>
    |- icon.png
    |- style.css
    |- index.js
  |- /node_modules</code></pre>
<p>With the loader configured and fonts in place, you can incorporate them via an <code>@font-face</code> declaration. The local <code>url(...)</code> directive will be picked up by webpack just as it was with the image:</p>
<p><strong>src/style.css</strong></p>
<pre><code class="hljs language-diff"><span class="token inserted">+ @font-face {</span>
<span class="token inserted">+   font-family: 'MyFont';</span>
<span class="token inserted">+   src:  url('./my-font.woff2') format('woff2'),</span>
<span class="token inserted">+         url('./my-font.woff') format('woff');</span>
<span class="token inserted">+   font-weight: 600;</span>
<span class="token inserted">+   font-style: normal;</span>
<span class="token inserted">+ }</span>

  .hello {
    color: red;
<span class="token inserted">+   font-family: 'MyFont';</span>
    background: url('./icon.png');
  }</code></pre>
<p>Now run a new build and let's see if webpack handled our fonts:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> run build

<span class="token punctuation">..</span>.
                                 Asset      Size  Chunks                    Chunk Names
5439466351d432b73fdb518c6ae9654a.woff2  19.5 KiB          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
 387c65cc923ad19790469cfb5b7cb583.woff  23.4 KiB          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
  da4574bb234ddc4bb47cbe1ca4b20303.png  3.01 MiB          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>
                             bundle.js    77 KiB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>         main
Entrypoint main <span class="token operator">=</span> bundle.js
<span class="token punctuation">..</span>.</code></pre>
<p>Open up <code>index.html</code> again and see if our <code>Hello webpack</code> text has changed to the new font. If all is well, you should see the changes.</p>
<h2 id="loading-data">Loading Data<a href="#loading-data" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Another useful asset that can be loaded is data, like JSON files, CSVs, TSVs, and XML. Support for JSON is actually built-in, similar to NodeJS, meaning <code>import Data from './data.json'</code> will work by default. To import CSVs, TSVs, and XML you could use the <a href="https://github.com/theplatapi/csv-loader">csv-loader</a> and <a href="https://github.com/gisikw/xml-loader">xml-loader</a>. Let's handle loading all three:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev csv-loader xml-loader</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');

  module.exports = {
    entry: './src/index.js',
    output: {
      filename: 'bundle.js',
      path: path.resolve(__dirname, 'dist'),
    },
    module: {
      rules: [
        {
          test: /\.css$/,
          use: [
            'style-loader',
            'css-loader'
          ],
        },
        {
          test: /\.(png|svg|jpg|gif)$/,
          use: [
            'file-loader',
          ],
        },
        {
          test: /\.(woff|woff2|eot|ttf|otf)$/,
          use: [
            'file-loader',
          ],
        },
<span class="token inserted">+       {</span>
<span class="token inserted">+         test: /\.(csv|tsv)$/,</span>
<span class="token inserted">+         use: [</span>
<span class="token inserted">+           'csv-loader',</span>
<span class="token inserted">+         ],</span>
<span class="token inserted">+       },</span>
<span class="token inserted">+       {</span>
<span class="token inserted">+         test: /\.xml$/,</span>
<span class="token inserted">+         use: [</span>
<span class="token inserted">+           'xml-loader',</span>
<span class="token inserted">+         ],</span>
<span class="token inserted">+       },</span>
      ],
    },
  };</code></pre>
<p>Add some data files to your project:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">  webpack-demo
  |- package.json
  |- webpack.config.js
  |- /dist
    |- bundle.js
    |- index.html
  |- /src
<span class="token inserted">+   |- data.xml</span>
    |- my-font.woff
    |- my-font.woff2
    |- icon.png
    |- style.css
    |- index.js
  |- /node_modules</code></pre>
<p><strong>src/data.xml</strong></p>
<pre><code class="hljs language-xml"><span class="token prolog">&#x3C;?xml version="1.0" encoding="UTF-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>note</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>to</span><span class="token punctuation">></span></span>Mary<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>to</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>from</span><span class="token punctuation">></span></span>John<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>from</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>heading</span><span class="token punctuation">></span></span>Reminder<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>heading</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>body</span><span class="token punctuation">></span></span>Call Cindy on Tuesday<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>note</span><span class="token punctuation">></span></span></code></pre>
<p>Now you can <code>import</code> any one of those four types of data (JSON, CSV, TSV, XML) and the <code>Data</code> variable you import it to will contain parsed JSON for easy consumption:</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff">  import _ from 'lodash';
  import './style.css';
  import Icon from './icon.png';
<span class="token inserted">+ import Data from './data.xml';</span>

  function component() {
    const element = document.createElement('div');

    // Lodash, now imported by this script
    element.innerHTML = _.join(['Hello', 'webpack'], ' ');
    element.classList.add('hello');

    // Add the image to our existing div.
    const myIcon = new Image();
    myIcon.src = Icon;

    element.appendChild(myIcon);

<span class="token inserted">+   console.log(Data);</span>

    return element;
  }

  document.body.appendChild(component());</code></pre>
<p>Re-run the <code>npm run build</code> command and open <code>index.html</code>. If you look at the console in your developer tools, you should be able to see your imported data being logged to the console!</p>
<blockquote class="tip">
<p>This can be especially helpful when implementing some sort of data visualization using a tool like <a href="https://github.com/d3">d3</a>. Instead of making an ajax request and parsing the data at runtime you can load it into your module during the build process so that the parsed data is ready to go as soon as the module hits the browser.</p>
</blockquote>
<h2 id="global-assets">Global Assets<a href="#global-assets" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The coolest part of everything mentioned above is that loading assets this way allows you to group modules and assets together in a more intuitive way. Instead of relying on a global <code>/assets</code> directory that contains everything, you can group assets with the code that uses them. For example, a structure like this can be very useful:</p>
<pre><code class="hljs language-diff"><span class="token deleted">- |- /assets</span>
<span class="token inserted">+ |– /components</span>
<span class="token inserted">+ |  |– /my-component</span>
<span class="token inserted">+ |  |  |– index.jsx</span>
<span class="token inserted">+ |  |  |– index.css</span>
<span class="token inserted">+ |  |  |– icon.svg</span>
<span class="token inserted">+ |  |  |– img.png</span></code></pre>
<p>This setup makes your code a lot more portable as everything that is closely coupled now lives together. Let's say you want to use <code>/my-component</code> in another project, simply copy or move it into the <code>/components</code> directory over there. As long as you've installed any <em>external dependencies</em> and your <em>configuration has the same loaders</em> defined, you should be good to go.</p>
<p>However, let's say you're locked into your old ways or you have some assets that are shared between multiple components (views, templates, modules, etc.). It's still possible to store these assets in a base directory and even use <a href="/configuration/resolve/#resolvealias">aliasing</a> to make them easier to <code>import</code>.</p>
<h2 id="wrapping-up">Wrapping up<a href="#wrapping-up" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>For the next guides we won't be using all the different assets we've used in this guide, so let's do some cleanup so we're prepared for the next piece of the guides <a href="https://webpack.js.org/guides/output-management/">Output Management</a>:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">  webpack-demo
  |- package.json
  |- webpack.config.js
  |- /dist
    |- bundle.js
    |- index.html
  |- /src
<span class="token deleted">-   |- data.xml</span>
<span class="token deleted">-   |- my-font.woff</span>
<span class="token deleted">-   |- my-font.woff2</span>
<span class="token deleted">-   |- icon.png</span>
<span class="token deleted">-   |- style.css</span>
    |- index.js
  |- /node_modules</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');

  module.exports = {
    entry: './src/index.js',
    output: {
      filename: 'bundle.js',
      path: path.resolve(__dirname, 'dist'),
    },
<span class="token deleted">-   module: {</span>
<span class="token deleted">-     rules: [</span>
<span class="token deleted">-       {</span>
<span class="token deleted">-         test: /\.css$/,</span>
<span class="token deleted">-         use: [</span>
<span class="token deleted">-           'style-loader',</span>
<span class="token deleted">-           'css-loader',</span>
<span class="token deleted">-         ],</span>
<span class="token deleted">-       },</span>
<span class="token deleted">-       {</span>
<span class="token deleted">-         test: /\.(png|svg|jpg|gif)$/,</span>
<span class="token deleted">-         use: [</span>
<span class="token deleted">-           'file-loader',</span>
<span class="token deleted">-         ],</span>
<span class="token deleted">-       },</span>
<span class="token deleted">-       {</span>
<span class="token deleted">-         test: /\.(woff|woff2|eot|ttf|otf)$/,</span>
<span class="token deleted">-         use: [</span>
<span class="token deleted">-           'file-loader',</span>
<span class="token deleted">-         ],</span>
<span class="token deleted">-       },</span>
<span class="token deleted">-       {</span>
<span class="token deleted">-         test: /\.(csv|tsv)$/,</span>
<span class="token deleted">-         use: [</span>
<span class="token deleted">-           'csv-loader',</span>
<span class="token deleted">-         ],</span>
<span class="token deleted">-       },</span>
<span class="token deleted">-       {</span>
<span class="token deleted">-         test: /\.xml$/,</span>
<span class="token deleted">-         use: [</span>
<span class="token deleted">-           'xml-loader',</span>
<span class="token deleted">-         ],</span>
<span class="token deleted">-       },</span>
<span class="token deleted">-     ],</span>
<span class="token deleted">-   },</span>
  };</code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff">  import _ from 'lodash';
<span class="token deleted">- import './style.css';</span>
<span class="token deleted">- import Icon from './icon.png';</span>
<span class="token deleted">- import Data from './data.xml';</span>
<span class="token deleted">-</span>
  function component() {
    const element = document.createElement('div');
<span class="token deleted">-</span>
<span class="token deleted">-   // Lodash, now imported by this script</span>
    element.innerHTML = _.join(['Hello', 'webpack'], ' ');
<span class="token deleted">-   element.classList.add('hello');</span>
<span class="token deleted">-</span>
<span class="token deleted">-   // Add the image to our existing div.</span>
<span class="token deleted">-   const myIcon = new Image();</span>
<span class="token deleted">-   myIcon.src = Icon;</span>
<span class="token deleted">-</span>
<span class="token deleted">-   element.appendChild(myIcon);</span>
<span class="token deleted">-</span>
<span class="token deleted">-   console.log(Data);</span>

    return element;
  }

  document.body.appendChild(component());</code></pre>
<h2 id="next-guide">Next guide<a href="#next-guide" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Let's move on to <a href="https://webpack.js.org/guides/output-management/">Output Management</a></p>
<h2 id="further-reading">Further Reading<a href="#further-reading" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<ul>
<li><a href="https://survivejs.com/webpack/loading/fonts/">Loading Fonts</a> on SurviveJS</li>
</ul>
<h1 id="output-management">Output Management<a href="#output-management" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<blockquote class="tip">
<p>This guide extends on code examples found in the <a href="/guides/asset-management"><code>Asset Management</code></a> guide.</p>
</blockquote>
<p>So far we've manually included all our assets in our <code>index.html</code> file, but as your application grows and once you start <a href="/guides/caching">using hashes in filenames</a> and outputting <a href="/guides/code-splitting">multiple bundles</a>, it will be difficult to keep managing your <code>index.html</code> file manually. However, a few plugins exist that will make this process much easier to manage.</p>
<h2 id="preparation">Preparation<a href="#preparation" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>First, let's adjust our project a little bit:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">  webpack-demo
  |- package.json
  |- webpack.config.js
  |- /dist
  |- /src
    |- index.js
<span class="token inserted">+   |- print.js</span>
  |- /node_modules</code></pre>
<p>Let's add some logic to our <code>src/print.js</code> file:</p>
<p><strong>src/print.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">printMe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I get called from print.js!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>And use that function in our <code>src/index.js</code> file:</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff">  import _ from 'lodash';
<span class="token inserted">+ import printMe from './print.js';</span>

  function component() {
    const element = document.createElement('div');
<span class="token inserted">+   const btn = document.createElement('button');</span>

    element.innerHTML = _.join(['Hello', 'webpack'], ' ');

<span class="token inserted">+   btn.innerHTML = 'Click me and check the console!';</span>
<span class="token inserted">+   btn.onclick = printMe;</span>
<span class="token inserted">+</span>
<span class="token inserted">+   element.appendChild(btn);</span>

    return element;
  }

  document.body.appendChild(component());</code></pre>
<p>Let's also update our <code>dist/index.html</code> file, in preparation for webpack to split out entries:</p>
<p><strong>dist/index.html</strong></p>
<pre><code class="hljs language-diff">  &#x3C;!doctype html>
  &#x3C;html>
    &#x3C;head>
<span class="token deleted">-     &#x3C;title>Asset Management&#x3C;/title></span>
<span class="token inserted">+     &#x3C;title>Output Management&#x3C;/title></span>
<span class="token inserted">+     &#x3C;script src="./print.bundle.js">&#x3C;/script></span>
    &#x3C;/head>
    &#x3C;body>
<span class="token deleted">-     &#x3C;script src="./bundle.js">&#x3C;/script></span>
<span class="token inserted">+     &#x3C;script src="./app.bundle.js">&#x3C;/script></span>
    &#x3C;/body>
  &#x3C;/html></code></pre>
<p>Now adjust the config. We'll be adding our <code>src/print.js</code> as a new entry point (<code>print</code>) and we'll change the output as well, so that it will dynamically generate bundle names, based on the entry point names:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');

  module.exports = {
<span class="token deleted">-   entry: './src/index.js',</span>
<span class="token inserted">+   entry: {</span>
<span class="token inserted">+     app: './src/index.js',</span>
<span class="token inserted">+     print: './src/print.js',</span>
<span class="token inserted">+   },</span>
    output: {
<span class="token deleted">-     filename: 'bundle.js',</span>
<span class="token inserted">+     filename: '[name].bundle.js',</span>
      path: path.resolve(__dirname, 'dist'),
    },
  };</code></pre>
<p>Let's run <code>npm run build</code> and see what this generates:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
          Asset     Size  Chunks                    Chunk Names
  app.bundle.js   545 kB    0, 1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  app
print.bundle.js  2.74 kB       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>         print
<span class="token punctuation">..</span>.</code></pre>
<p>We can see that webpack generates our <code>print.bundle.js</code> and <code>app.bundle.js</code> files, which we also specified in our <code>index.html</code> file. if you open <code>index.html</code> in your browser, you can see what happens when you click the button.</p>
<p>But what would happen if we changed the name of one of our entry points, or even added a new one? The generated bundles would be renamed on a build, but our <code>index.html</code> file would still reference the old names. Let's fix that with the <a href="/plugins/html-webpack-plugin"><code>HtmlWebpackPlugin</code></a>.</p>
<h2 id="setting-up-htmlwebpackplugin">Setting up HtmlWebpackPlugin<a href="#setting-up-htmlwebpackplugin" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>First install the plugin and adjust the <code>webpack.config.js</code> file:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev html-webpack-plugin</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');
<span class="token inserted">+ const HtmlWebpackPlugin = require('html-webpack-plugin');</span>

  module.exports = {
    entry: {
      app: './src/index.js',
      print: './src/print.js',
    },
<span class="token inserted">+   plugins: [</span>
<span class="token inserted">+     new HtmlWebpackPlugin({</span>
<span class="token inserted">+       title: 'Output Management',</span>
<span class="token inserted">+     }),</span>
<span class="token inserted">+   ],</span>
    output: {
      filename: '[name].bundle.js',
      path: path.resolve(__dirname, 'dist'),
    },
  };</code></pre>
<p>Before we do a build, you should know that the <code>HtmlWebpackPlugin</code> by default will generate its own <code>index.html</code> file, even though we already have one in the <code>dist/</code> folder. This means that it will replace our <code>index.html</code> file with a newly generated one. Let's see what happens when we do an <code>npm run build</code>:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
           Asset       Size  Chunks                    Chunk Names
 print.bundle.js     544 kB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  print
   app.bundle.js    2.81 kB       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>         app
      index.html  249 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.</code></pre>
<p>If you open <code>index.html</code> in your code editor, you'll see that the <code>HtmlWebpackPlugin</code> has created an entirely new file for you and that all the bundles are automatically added.</p>
<p>If you want to learn more about all the features and options that the <code>HtmlWebpackPlugin</code> provides, then you should read up on it on the <a href="https://github.com/jantimon/html-webpack-plugin"><code>HtmlWebpackPlugin</code></a> repo.</p>
<p>You can also take a look at <a href="https://github.com/jaketrent/html-webpack-template"><code>html-webpack-template</code></a> which provides a couple of extra features in addition to the default template.</p>
<h2 id="cleaning-up-the-dist-folder">Cleaning up the <code>/dist</code> folder<a href="#cleaning-up-the-dist-folder" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>As you might have noticed over the past guides and code example, our <code>/dist</code> folder has become quite cluttered. Webpack will generate the files and put them in the <code>/dist</code> folder for you, but it doesn't keep track of which files are actually in use by your project.</p>
<p>In general it's good practice to clean the <code>/dist</code> folder before each build, so that only used files will be generated. Let's take care of that.</p>
<p>A popular plugin to manage this is the <a href="https://www.npmjs.com/package/clean-webpack-plugin"><code>clean-webpack-plugin</code></a> so let's install and configure it.</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev clean-webpack-plugin</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');
  const HtmlWebpackPlugin = require('html-webpack-plugin');
<span class="token inserted">+ const { CleanWebpackPlugin } = require('clean-webpack-plugin');</span>

  module.exports = {
    entry: {
      app: './src/index.js',
      print: './src/print.js',
    },
    plugins: [
<span class="token inserted">+     new CleanWebpackPlugin(),</span>
      new HtmlWebpackPlugin({
        title: 'Output Management',
      }),
    ],
    output: {
      filename: '[name].bundle.js',
      path: path.resolve(__dirname, 'dist'),
    },
  };</code></pre>
<p>Now run an <code>npm run build</code> and inspect the <code>/dist</code> folder. If everything went well you should now only see the files generated from the build and no more old files!</p>
<h2 id="the-manifest">The Manifest<a href="#the-manifest" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>You might be wondering how webpack and its plugins seem to "know" what files are being generated. The answer is in the manifest that webpack keeps to track how all the modules map to the output bundles. If you're interested in managing webpack's <a href="/configuration/output"><code>output</code></a> in other ways, the manifest would be a good place to start.</p>
<p>The manifest data can be extracted into a json file for easy consumption using the <a href="https://github.com/danethurber/webpack-manifest-plugin"><code>WebpackManifestPlugin</code></a>.</p>
<p>We won't go through a full example of how to use this plugin within your projects, but you can read up on <a href="/concepts/manifest">the concept page</a> and the <a href="/guides/caching">caching guide</a> to find out how this ties into long term caching.</p>
<h2 id="conclusion-1">Conclusion<a href="#conclusion-1" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Now that you've learned about dynamically adding bundles to your HTML, let's dive into the <a href="/guides/development">development guide</a>. Or, if you want to dig into more advanced topics, we would recommend heading over to the <a href="/guides/code-splitting">code splitting guide</a>.</p>
<h1 id="development">Development<a href="#development" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<blockquote class="tip">
<p>This guide extends on code examples found in the <a href="/guides/output-management">Output Management</a> guide.</p>
</blockquote>
<p>If you've been following the guides, you should have a solid understanding of some of the webpack basics. Before we continue, let's look into setting up a development environment to make our lives a little easier.</p>
<blockquote class="warning">
<p>The tools in this guide are <strong>only meant for development</strong>, please <strong>avoid</strong> using them in production!</p>
</blockquote>
<p>Let's start by setting <a href="/configuration/mode/#mode-development"><code>mode</code> to <code>'development'</code></a>.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');
  const HtmlWebpackPlugin = require('html-webpack-plugin');
  const { CleanWebpackPlugin } = require('clean-webpack-plugin');

  module.exports = {
<span class="token inserted">+   mode: 'development',</span>
    entry: {
      app: './src/index.js',
      print: './src/print.js',
    },
    plugins: [
      // new CleanWebpackPlugin(['dist/*']) for &#x3C; v2 versions of CleanWebpackPlugin
      new CleanWebpackPlugin(),
      new HtmlWebpackPlugin({
        title: 'Development',
      }),
    ],
    output: {
      filename: '[name].bundle.js',
      path: path.resolve(__dirname, 'dist'),
    },
  };</code></pre>
<h2 id="using-source-maps">Using source maps<a href="#using-source-maps" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>When webpack bundles your source code, it can become difficult to track down errors and warnings to their original location. For example, if you bundle three source files (<code>a.js</code>, <code>b.js</code>, and <code>c.js</code>) into one bundle (<code>bundle.js</code>) and one of the source files contains an error, the stack trace will simply point to <code>bundle.js</code>. This isn't always helpful as you probably want to know exactly which source file the error came from.</p>
<p>In order to make it easier to track down errors and warnings, JavaScript offers <a href="http://blog.teamtreehouse.com/introduction-source-maps">source maps</a>, which map your compiled code back to your original source code. If an error originates from <code>b.js</code>, the source map will tell you exactly that.</p>
<p>There are a lot of <a href="/configuration/devtool">different options</a> available when it comes to source maps. Be sure to check them out so you can configure them to your needs.</p>
<p>For this guide, let's use the <code>inline-source-map</code> option, which is good for illustrative purposes (though not for production):</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');
  const HtmlWebpackPlugin = require('html-webpack-plugin');
  const { CleanWebpackPlugin } = require('clean-webpack-plugin');

  module.exports = {
    mode: 'development',
    entry: {
      app: './src/index.js',
      print: './src/print.js',
    },
<span class="token inserted">+   devtool: 'inline-source-map',</span>
    plugins: [
      new CleanWebpackPlugin(),
      new HtmlWebpackPlugin({
        title: 'Development',
      }),
    ],
    output: {
      filename: '[name].bundle.js',
      path: path.resolve(__dirname, 'dist'),
    },
  };</code></pre>
<p>Now let's make sure we have something to debug, so let's create an error in our <code>print.js</code> file:</p>
<p><strong>src/print.js</strong></p>
<pre><code class="hljs language-diff">  export default function printMe() {
<span class="token deleted">-   console.log('I get called from print.js!');</span>
<span class="token inserted">+   cosnole.log('I get called from print.js!');</span>
  }</code></pre>
<p>Run an <code>npm run build</code>, it should compile to something like this:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
          Asset       Size  Chunks                    Chunk Names
  app.bundle.js    1.44 MB    0, 1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  app
print.bundle.js    6.43 kB       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>         print
     index.html  248 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.</code></pre>
<p>Now open the resulting <code>index.html</code> file in your browser. Click the button and look in your console where the error is displayed. The error should say something like this:</p>
<pre><code class="hljs language-bash">Uncaught ReferenceError: cosnole is not defined
   at HTMLButtonElement.printMe <span class="token punctuation">(</span>print.js:2<span class="token punctuation">)</span></code></pre>
<p>We can see that the error also contains a reference to the file (<code>print.js</code>) and line number (2) where the error occurred. This is great because now we know exactly where to look in order to fix the issue.</p>
<h2 id="choosing-a-development-tool">Choosing a Development Tool<a href="#choosing-a-development-tool" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<blockquote class="warning">
<p>Some text editors have a "safe write" function that might interfere with some of the following tools. Read <a href="#adjusting-your-text-editor">Adjusting Your Text Editor</a> for a solution to these issues.</p>
</blockquote>
<p>It quickly becomes a hassle to manually run <code>npm run build</code> every time you want to compile your code.</p>
<p>There are a couple of different options available in webpack that help you automatically compile your code whenever it changes:</p>
<ol>
<li>webpack's Watch Mode</li>
<li>webpack-dev-server</li>
<li>webpack-dev-middleware</li>
</ol>
<p>In most cases, you probably would want to use <code>webpack-dev-server</code>, but let's explore all of the above options.</p>
<h3 id="using-watch-mode">Using Watch Mode<a href="#using-watch-mode" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>You can instruct webpack to "watch" all files within your dependency graph for changes. If one of these files is updated, the code will be recompiled so you don't have to run the full build manually.</p>
<p>Let's add an npm script that will start webpack's Watch Mode:</p>
<p><strong>package.json</strong></p>
<pre><code class="hljs language-diff">  {
    "name": "webpack-demo",
    "version": "1.0.0",
    "description": "",
    "scripts": {
      "test": "echo \"Error: no test specified\" &#x26;&#x26; exit 1",
<span class="token inserted">+     "watch": "webpack --watch",</span>
      "build": "webpack"
    },
    "keywords": [],
    "author": "",
    "license": "ISC",
    "devDependencies": {
      "clean-webpack-plugin": "^2.0.0",
      "css-loader": "^0.28.4",
      "csv-loader": "^2.1.1",
      "file-loader": "^0.11.2",
      "html-webpack-plugin": "^2.29.0",
      "style-loader": "^0.18.2",
      "webpack": "^4.30.0",
      "xml-loader": "^1.2.1"
    }
  }</code></pre>
<p>Now run <code>npm run watch</code> from the command line and see how webpack compiles your code.
You can see that it doesn't exit the command line because the script is currently watching your files.</p>
<p>Now, while webpack is watching your files, let's remove the error we introduced earlier:</p>
<p><strong>src/print.js</strong></p>
<pre><code class="hljs language-diff">  export default function printMe() {
<span class="token deleted">-   cosnole.log('I get called from print.js!');</span>
<span class="token inserted">+   console.log('I get called from print.js!');</span>
  }</code></pre>
<p>Now save your file and check the terminal window. You should see that webpack automatically recompiles the changed module!</p>
<p>The only downside is that you have to refresh your browser in order to see the changes. It would be much nicer if that would happen automatically as well, so let's try <code>webpack-dev-server</code> which will do exactly that.</p>
<h3 id="using-webpack-dev-server">Using webpack-dev-server<a href="#using-webpack-dev-server" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>The <code>webpack-dev-server</code> provides you with a simple web server and the ability to use live reloading. Let's set it up:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack-dev-server</code></pre>
<p>Change your config file to tell the dev server where to look for files:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');
  const HtmlWebpackPlugin = require('html-webpack-plugin');
  const { CleanWebpackPlugin } = require('clean-webpack-plugin');

  module.exports = {
    mode: 'development',
    entry: {
      app: './src/index.js',
      print: './src/print.js',
    },
    devtool: 'inline-source-map',
<span class="token inserted">+   devServer: {</span>
<span class="token inserted">+     contentBase: './dist',</span>
<span class="token inserted">+   },</span>
    plugins: [
      // new CleanWebpackPlugin(['dist/*']) for &#x3C; v2 versions of CleanWebpackPlugin
      new CleanWebpackPlugin(),
      new HtmlWebpackPlugin({
        title: 'Development',
      }),
    ],
    output: {
      filename: '[name].bundle.js',
      path: path.resolve(__dirname, 'dist'),
    },
  };</code></pre>
<p>This tells <code>webpack-dev-server</code> to serve the files from the <code>dist</code> directory on <code>localhost:8080</code>.</p>
<blockquote class="warning">
<p>webpack-dev-server doesn't write any output files after compiling. Instead, it keeps bundle files in memory and serves them as if they were real files mounted at the server's root path. If your page expects to find the bundle files on a different path, you can change this with the <a href="/configuration/dev-server/#devserverpublicpath-"><code>publicPath</code></a> option in the dev server's configuration.</p>
</blockquote>
<p>Let's add a script to easily run the dev server as well:</p>
<p><strong>package.json</strong></p>
<pre><code class="hljs language-diff">  {
    "name": "development",
    "version": "1.0.0",
    "description": "",
    "private": true,
    "scripts": {
      "test": "echo \"Error: no test specified\" &#x26;&#x26; exit 1",
      "watch": "webpack --watch",
<span class="token inserted">+     "start": "webpack-dev-server --open",</span>
      "build": "webpack"
    },
    "keywords": [],
    "author": "",
    "license": "ISC",
    "devDependencies": {
      "clean-webpack-plugin": "^2.0.0",
      "css-loader": "^0.28.4",
      "csv-loader": "^2.1.1",
      "express": "^4.15.3",
      "file-loader": "^0.11.2",
      "html-webpack-plugin": "^2.29.0",
      "style-loader": "^0.18.2",
      "webpack": "^4.30.0",
      "webpack-dev-server": "^3.8.0",
      "xml-loader": "^1.2.1"
    }
  }</code></pre>
<p>Now we can run <code>npm start</code> from the command line and we will see our browser automatically loading up our page. If you now change any of the source files and save them, the web server will automatically reload after the code has been compiled. Give it a try!</p>
<p>The <code>webpack-dev-server</code> comes with many configurable options. Head over to the <a href="/configuration/dev-server">documentation</a> to learn more.</p>
<blockquote class="tip">
<p>Now that your server is working, you might want to give <a href="/guides/hot-module-replacement">Hot Module Replacement</a> a try!</p>
</blockquote>
<h3 id="using-webpack-dev-middleware">Using webpack-dev-middleware<a href="#using-webpack-dev-middleware" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>webpack-dev-middleware</code> is a wrapper that will emit files processed by webpack to a server. This is used in <code>webpack-dev-server</code> internally, however it's available as a separate package to allow more custom setups if desired. We'll take a look at an example that combines <code>webpack-dev-middleware</code> with an express server.</p>
<p>Let's install <code>express</code> and <code>webpack-dev-middleware</code> so we can get started:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev express webpack-dev-middleware</code></pre>
<p>Now we need to make some adjustments to our webpack configuration file in order to make sure the middleware will function correctly:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');
  const HtmlWebpackPlugin = require('html-webpack-plugin');
  const { CleanWebpackPlugin } = require('clean-webpack-plugin');

  module.exports = {
    mode: 'development',
    entry: {
      app: './src/index.js',
      print: './src/print.js',
    },
    devtool: 'inline-source-map',
    devServer: {
      contentBase: './dist',
    },
    plugins: [
      new CleanWebpackPlugin(),
      new HtmlWebpackPlugin({
        title: 'Output Management',
      }),
    ],
    output: {
      filename: '[name].bundle.js',
      path: path.resolve(__dirname, 'dist'),
<span class="token inserted">+     publicPath: '/',</span>
    },
  };</code></pre>
<p>The <code>publicPath</code> will be used within our server script as well in order to make sure files are served correctly on <code>http://localhost:3000</code>. We'll specify the port number later. The next step is setting up our custom <code>express</code> server:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">  webpack-demo
  |- package.json
  |- webpack.config.js
<span class="token inserted">+ |- server.js</span>
  |- /dist
  |- /src
    |- index.js
    |- print.js
  |- /node_modules</code></pre>
<p><strong>server.js</strong></p>
<pre><code class="hljs language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpackDevMiddleware <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-dev-middleware'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.config.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Tell express to use the webpack-dev-middleware and use the webpack.config.js</span>
<span class="token comment">// configuration file as a base.</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">webpackDevMiddleware</span><span class="token punctuation">(</span>compiler<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  publicPath<span class="token punctuation">:</span> config<span class="token punctuation">.</span>output<span class="token punctuation">.</span>publicPath<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Serve the files on port 3000.</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Example app listening on port 3000!\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Now add an npm script to make it a little easier to run the server:</p>
<p><strong>package.json</strong></p>
<pre><code class="hljs language-diff">  {
    "name": "development",
    "version": "1.0.0",
    "description": "",
    "private": true,
    "scripts": {
      "test": "echo \"Error: no test specified\" &#x26;&#x26; exit 1",
      "watch": "webpack --watch",
      "start": "webpack-dev-server --open",
<span class="token inserted">+     "server": "node server.js",</span>
      "build": "webpack"
    },
    "keywords": [],
    "author": "",
    "license": "ISC",
    "devDependencies": {
      "clean-webpack-plugin": "^2.0.0",
      "css-loader": "^0.28.4",
      "csv-loader": "^2.1.1",
      "express": "^4.15.3",
      "file-loader": "^0.11.2",
      "html-webpack-plugin": "^2.29.0",
      "style-loader": "^0.18.2",
      "webpack": "^4.30.0",
      "webpack-dev-middleware": "^1.12.0",
      "webpack-dev-server": "^3.8.0",
      "xml-loader": "^1.2.1"
    }
  }</code></pre>
<p>Now in your terminal run <code>npm run server</code>, it should give you an output similar to this:</p>
<pre><code class="hljs language-bash">Example app listening on port 3000<span class="token operator">!</span>
<span class="token punctuation">..</span>.
          Asset       Size  Chunks                    Chunk Names
  app.bundle.js    1.44 MB    0, 1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  app
print.bundle.js    6.57 kB       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>         print
     index.html  306 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.
webpack: Compiled successfully.</code></pre>
<p>Now fire up your browser and go to <code>http://localhost:3000</code>. You should see your webpack app running and functioning!</p>
<blockquote class="tip">
<p>If you would like to know more about how Hot Module Replacement works, we recommend you read the <a href="/guides/hot-module-replacement/">Hot Module Replacement</a> guide.</p>
</blockquote>
<h2 id="adjusting-your-text-editor">Adjusting Your Text Editor<a href="#adjusting-your-text-editor" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>When using automatic compilation of your code, you could run into issues when saving your files. Some editors have a "safe write" feature that can potentially interfere with recompilation.</p>
<p>To disable this feature in some common editors, see the list below:</p>
<ul>
<li><strong>Sublime Text 3</strong>: Add <code>atomic_save: 'false'</code> to your user preferences.</li>
<li><strong>JetBrains IDEs (e.g. WebStorm)</strong>: Uncheck "Use safe write" in <code>Preferences > Appearance &#x26; Behavior > System Settings</code>.</li>
<li><strong>Vim</strong>: Add <code>:set backupcopy=yes</code> to your settings.</li>
</ul>
<h2 id="conclusion-2">Conclusion<a href="#conclusion-2" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Now that you've learned how to automatically compile your code and run a simple development server, you can check out the next guide, which will cover <a href="/guides/hot-module-replacement">Hot Module Replacement</a>.</p>
<h1 id="code-splitting">Code Splitting<a href="#code-splitting" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<blockquote class="tip">
<p>This guide extends the examples provided in <a href="/guides/getting-started">Getting Started</a> and <a href="/guides/output-management">Output Management</a>. Please make sure you are at least familiar with the examples provided in them.</p>
</blockquote>
<p>Code splitting is one of the most compelling features of webpack. This feature allows you to split your code into various bundles which can then be loaded on demand or in parallel. It can be used to achieve smaller bundles and control resource load prioritization which, if used correctly, can have a major impact on load time.</p>
<p>There are three general approaches to code splitting available:</p>
<ul>
<li>Entry Points: Manually split code using <a href="/configuration/entry-context"><code>entry</code></a> configuration.</li>
<li>Prevent Duplication: Use the <a href="/plugins/split-chunks-plugin/"><code>SplitChunksPlugin</code></a> to dedupe and split chunks.</li>
<li>Dynamic Imports: Split code via inline function calls within modules.</li>
</ul>
<h2 id="entry-points">Entry Points<a href="#entry-points" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>This is by far the easiest and most intuitive way to split code. However, it is more manual and has some pitfalls we will go over. Let's take a look at how we might split another module from the main bundle:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">webpack-demo
|- package.json
|- webpack.config.js
|- /dist
|- /src
  |- index.js
<span class="token inserted">+ |- another-module.js</span>
|- /node_modules</code></pre>
<p><strong>another-module.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
  _<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Another'</span><span class="token punctuation">,</span> <span class="token string">'module'</span><span class="token punctuation">,</span> <span class="token string">'loaded!'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">const path = require('path');

module.exports = {
  mode: 'development',
  entry: {
    index: './src/index.js',
<span class="token inserted">+   another: './src/another-module.js',</span>
  },
  output: {
    filename: '[name].bundle.js',
    path: path.resolve(__dirname, 'dist'),
  },
};</code></pre>
<p>This will yield the following build result:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
            Asset     Size   Chunks             Chunk Names
another.bundle.js  550 KiB  another  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  another
  index.bundle.js  550 KiB    index  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  index
Entrypoint index <span class="token operator">=</span> index.bundle.js
Entrypoint another <span class="token operator">=</span> another.bundle.js
<span class="token punctuation">..</span>.</code></pre>
<p>As mentioned there are some pitfalls to this approach:</p>
<ul>
<li>If there are any duplicated modules between entry chunks they will be included in both bundles.</li>
<li>It isn't as flexible and can't be used to dynamically split code with the core application logic.</li>
</ul>
<p>The first of these two points is definitely an issue for our example, as <code>lodash</code> is also imported within <code>./src/index.js</code> and will thus be duplicated in both bundles. Let's remove this duplication by using the <a href="/plugins/split-chunks-plugin/"><code>SplitChunksPlugin</code></a>.</p>
<h2 id="prevent-duplication">Prevent Duplication<a href="#prevent-duplication" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The <a href="/plugins/split-chunks-plugin/"><code>SplitChunksPlugin</code></a> allows us to extract common dependencies into an existing entry chunk or an entirely new chunk. Let's use this to de-duplicate the <code>lodash</code> dependency from the previous example:</p>
<blockquote class="warning">
<p>The <code>CommonsChunkPlugin</code> has been removed in webpack v4 legato. To learn how chunks are treated in the latest version, check out the <a href="/plugins/split-chunks-plugin/"><code>SplitChunksPlugin</code></a>.</p>
</blockquote>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');

  module.exports = {
    mode: 'development',
    entry: {
      index: './src/index.js',
      another: './src/another-module.js',
    },
    output: {
      filename: '[name].bundle.js',
      path: path.resolve(__dirname, 'dist'),
    },
<span class="token inserted">+   optimization: {</span>
<span class="token inserted">+     splitChunks: {</span>
<span class="token inserted">+       chunks: 'all',</span>
<span class="token inserted">+     },</span>
<span class="token inserted">+   },</span>
  };</code></pre>
<p>With the <a href="/plugins/split-chunks-plugin/#optimizationsplitchunks"><code>optimization.splitChunks</code></a> configuration option in place, we should now see the duplicate dependency removed from our <code>index.bundle.js</code> and <code>another.bundle.js</code>. The plugin should notice that we've separated <code>lodash</code> out to a separate chunk and remove the dead weight from our main bundle. Let's do an <code>npm run build</code> to see if it worked:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
                          Asset      Size                 Chunks             Chunk Names
              another.bundle.js  5.95 KiB                another  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  another
                index.bundle.js  5.89 KiB                  index  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  index
vendors~another~index.bundle.js   547 KiB  vendors~another~index  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  vendors~another~index
Entrypoint index <span class="token operator">=</span> vendors~another~index.bundle.js index.bundle.js
Entrypoint another <span class="token operator">=</span> vendors~another~index.bundle.js another.bundle.js
<span class="token punctuation">..</span>.</code></pre>
<p>Here are some other useful plugins and loaders provided by the community for splitting code:</p>
<ul>
<li><a href="/plugins/mini-css-extract-plugin"><code>mini-css-extract-plugin</code></a>: Useful for splitting CSS out from the main application.</li>
<li><a href="/loaders/bundle-loader"><code>bundle-loader</code></a>: Used to split code and lazy load the resulting bundles.</li>
<li><a href="https://github.com/gaearon/promise-loader"><code>promise-loader</code></a>: Similar to the <code>bundle-loader</code> but uses promises.</li>
</ul>
<h2 id="dynamic-imports">Dynamic Imports<a href="#dynamic-imports" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Two similar techniques are supported by webpack when it comes to dynamic code splitting. The first and recommended approach is to use the <a href="/api/module-methods/#import-1"><code>import()</code> syntax</a> that conforms to the <a href="https://github.com/tc39/proposal-dynamic-import">ECMAScript proposal</a> for dynamic imports. The legacy, webpack-specific approach is to use <a href="/api/module-methods/#requireensure"><code>require.ensure</code></a>. Let's try using the first of these two approaches...</p>
<blockquote class="warning">
<p><code>import()</code> calls use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promises</a> internally. If you use <code>import()</code> with older browsers, remember to shim <code>Promise</code> using a polyfill such as <a href="https://github.com/stefanpenner/es6-promise">es6-promise</a> or <a href="https://github.com/taylorhakes/promise-polyfill">promise-polyfill</a>.</p>
</blockquote>
<p>Before we start, let's remove the extra <a href="/concepts/entry-points/"><code>entry</code></a> and <a href="/plugins/split-chunks-plugin"><code>optimization.splitChunks</code></a> from our config as they won't be needed for this next demonstration:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');

  module.exports = {
    mode: 'development',
    entry: {
      index: './src/index.js',
<span class="token deleted">-     another: './src/another-module.js',</span>
    },
    output: {
      filename: '[name].bundle.js',
<span class="token inserted">+     chunkFilename: '[name].bundle.js',</span>
      publicPath: 'dist/',
      path: path.resolve(__dirname, 'dist'),
    },
<span class="token deleted">-   optimization: {</span>
<span class="token deleted">-     splitChunks: {</span>
<span class="token deleted">-       chunks: 'all',</span>
<span class="token deleted">-     },</span>
<span class="token deleted">-   },</span>
  };</code></pre>
<p>Note the use of <code>chunkFilename</code>, which determines the name of non-entry chunk files. For more information on <code>chunkFilename</code>, see <a href="/configuration/output/#outputchunkfilename">output documentation</a>. We'll also update our project to remove the now unused files:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">webpack-demo
|- package.json
|- webpack.config.js
|- /dist
|- /src
  |- index.js
<span class="token deleted">- |- another-module.js</span>
|- /node_modules</code></pre>
<p>Now, instead of statically importing <code>lodash</code>, we'll use dynamic importing to separate a chunk:</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token deleted">- import _ from 'lodash';</span>
<span class="token deleted">-</span>
<span class="token deleted">- function component() {</span>
<span class="token inserted">+ function getComponent() {</span>
<span class="token deleted">-   const element = document.createElement('div');</span>
<span class="token deleted">-</span>
<span class="token deleted">-   // Lodash, now imported by this script</span>
<span class="token deleted">-   element.innerHTML = _.join(['Hello', 'webpack'], ' ');</span>
<span class="token inserted">+   return import(/* webpackChunkName: "lodash" */ 'lodash').then(({ default: _ }) => {</span>
<span class="token inserted">+     const element = document.createElement('div');</span>
<span class="token inserted">+</span>
<span class="token inserted">+     element.innerHTML = _.join(['Hello', 'webpack'], ' ');</span>
<span class="token inserted">+</span>
<span class="token inserted">+     return element;</span>
<span class="token inserted">+</span>
<span class="token inserted">+   }).catch(error => 'An error occurred while loading the component');</span>
  }

<span class="token deleted">- document.body.appendChild(component());</span>
<span class="token inserted">+ getComponent().then(component => {</span>
<span class="token inserted">+   document.body.appendChild(component);</span>
<span class="token inserted">+ })</span></code></pre>
<p>The reason we need <code>default</code> is that since webpack 4, when importing a CommonJS module, the import will no longer resolve to the value of <code>module.exports</code>, it will instead create an artificial namespace object for the CommonJS module. For more information on the reason behind this, read <a href="https://medium.com/webpack/webpack-4-import-and-commonjs-d619d626b655">webpack 4: import() and CommonJs</a></p>
<p>Note the use of <code>webpackChunkName</code> in the comment. This will cause our separate bundle to be named <code>lodash.bundle.js</code> instead of just <code>[id].bundle.js</code>. For more information on <code>webpackChunkName</code> and the other available options, see the <a href="/api/module-methods/#import-1"><code>import()</code> documentation</a>. Let's run webpack to see <code>lodash</code> separated out to a separate bundle:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
                   Asset      Size          Chunks             Chunk Names
         index.bundle.js  7.88 KiB           index  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  index
vendors~lodash.bundle.js   547 KiB  vendors~lodash  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  vendors~lodash
Entrypoint index <span class="token operator">=</span> index.bundle.js
<span class="token punctuation">..</span>.</code></pre>
<p>As <code>import()</code> returns a promise, it can be used with <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function"><code>async</code> functions</a>. However, this requires using a pre-processor like Babel and the <a href="https://babeljs.io/docs/plugins/syntax-dynamic-import/#installation">Syntax Dynamic Import Babel Plugin</a>. Here's how it would simplify the code:</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token deleted">- function getComponent() {</span>
<span class="token inserted">+ async function getComponent() {</span>
<span class="token deleted">-   return import(/* webpackChunkName: "lodash" */ 'lodash').then(({ default: _ }) => {</span>
<span class="token deleted">-     const element = document.createElement('div');</span>
<span class="token deleted">-</span>
<span class="token deleted">-     element.innerHTML = _.join(['Hello', 'webpack'], ' ');</span>
<span class="token deleted">-</span>
<span class="token deleted">-     return element;</span>
<span class="token deleted">-</span>
<span class="token deleted">-   }).catch(error => 'An error occurred while loading the component');</span>
<span class="token inserted">+   const element = document.createElement('div');</span>
<span class="token inserted">+   const { default: _ } = await import(/* webpackChunkName: "lodash" */ 'lodash');</span>
<span class="token inserted">+</span>
<span class="token inserted">+   element.innerHTML = _.join(['Hello', 'webpack'], ' ');</span>
<span class="token inserted">+</span>
<span class="token inserted">+   return element;</span>
  }

  getComponent().then(component => {
    document.body.appendChild(component);
  });</code></pre>
<blockquote class="tip">
<p>It is possible to provide a <a href="/api/module-methods/#dynamic-expressions-in-import">dynamic expression</a> to <code>import()</code> when you might need to import specific module based on a computed variable later.</p>
</blockquote>
<h2 id="prefetchingpreloading-modules">Prefetching/Preloading modules<a href="#prefetchingpreloading-modules" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>webpack 4.6.0+ adds support for prefetching and preloading.</p>
<p>Using these inline directives while declaring your imports allows webpack to output “Resource Hint” which tells the browser that for:</p>
<ul>
<li>prefetch: resource is probably needed for some navigation in the future</li>
<li>preload: resource might be needed during the current navigation</li>
</ul>
<p>Simple prefetch example can be having a <code>HomePage</code> component, which renders a <code>LoginButton</code> component which then on demand loads a <code>LoginModal</code> component after being clicked.</p>
<p><strong>LoginButton.js</strong></p>
<pre><code class="hljs language-js"><span class="token comment">//...</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackPrefetch: true */</span> <span class="token string">'LoginModal'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>This will result in <code>&#x3C;link rel="prefetch" href="login-modal-chunk.js"></code> being appended in the head of the page, which will instruct the browser to prefetch in idle time the <code>login-modal-chunk.js</code> file.</p>
<blockquote class="tip">
<p>webpack will add the prefetch hint once the parent chunk has been loaded.</p>
</blockquote>
<p>Preload directive has a bunch of differences compared to prefetch:</p>
<ul>
<li>A preloaded chunk starts loading in parallel to the parent chunk. A prefetched chunk starts after the parent chunk finishes loading.</li>
<li>A preloaded chunk has medium priority and is instantly downloaded. A prefetched chunk is downloaded while the browser is idle.</li>
<li>A preloaded chunk should be instantly requested by the parent chunk. A prefetched chunk can be used anytime in the future.</li>
<li>Browser support is different.</li>
</ul>
<p>Simple preload example can be having a <code>Component</code> which always depends on a big library that should be in a separate chunk.</p>
<p>Let's imagine a component <code>ChartComponent</code> which needs huge <code>ChartingLibrary</code>. It displays a <code>LoadingIndicator</code> when rendered and instantly does an on demand import of <code>ChartingLibrary</code>:</p>
<p><strong>ChartComponent.js</strong></p>
<pre><code class="hljs language-js"><span class="token comment">//...</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackPreload: true */</span> <span class="token string">'ChartingLibrary'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>When a page which uses the <code>ChartComponent</code> is requested, the charting-library-chunk is also requested via <code>&#x3C;link rel="preload"></code>. Assuming the page-chunk is smaller and finishes faster, the page will be displayed with a <code>LoadingIndicator</code>, until the already requested <code>charting-library-chunk</code> finishes. This will give a little load time boost since it only needs one round-trip instead of two. Especially in high-latency environments.</p>
<blockquote class="tip">
<p>Using webpackPreload incorrectly can actually hurt performance, so be careful when using it.</p>
</blockquote>
<h2 id="bundle-analysis">Bundle Analysis<a href="#bundle-analysis" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Once you start splitting your code, it can be useful to analyze the output to check where modules have ended up. The <a href="https://github.com/webpack/analyse">official analyze tool</a> is a good place to start. There are some other community-supported options out there as well:</p>
<ul>
<li><a href="https://alexkuz.github.io/webpack-chart/">webpack-chart</a>: Interactive pie chart for webpack stats.</li>
<li><a href="https://chrisbateman.github.io/webpack-visualizer/">webpack-visualizer</a>: Visualize and analyze your bundles to see which modules are taking up space and which might be duplicates.</li>
<li><a href="https://github.com/webpack-contrib/webpack-bundle-analyzer">webpack-bundle-analyzer</a>: A plugin and CLI utility that represents bundle content as a convenient interactive zoomable treemap.</li>
<li><a href="https://webpack.jakoblind.no/optimize">webpack bundle optimize helper</a>: This tool will analyze your bundle and give you actionable suggestions on what to improve to reduce your bundle size.</li>
<li><a href="https://github.com/bundle-stats/bundle-stats">bundle-stats</a>: Generate a bundle report(bundle size, assets, modules) and compare the results between different builds.</li>
</ul>
<h2 id="next-steps">Next Steps<a href="#next-steps" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>See <a href="/guides/lazy-loading/">Lazy Loading</a> for a more concrete example of how <code>import()</code> can be used in a real application and <a href="/guides/caching/">Caching</a> to learn how to split code more effectively.</p>
<h1 id="caching">Caching<a href="#caching" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<blockquote class="tip">
<p>The examples in this guide stem from <a href="/guides/getting-started">getting started</a>, <a href="/guides/output-management">output management</a> and <a href="/guides/code-splitting">code splitting</a>.</p>
</blockquote>
<p>So we're using webpack to bundle our modular application which yields a deployable <code>/dist</code> directory. Once the contents of <code>/dist</code> have been deployed to a server, clients (typically browsers) will hit that server to grab the site and its assets. The last step can be time consuming, which is why browsers use a technique called <a href="https://searchstorage.techtarget.com/definition/cache">caching</a>. This allows sites to load faster with less unnecessary network traffic. However, it can also cause headaches when you need new code to be picked up.</p>
<p>This guide focuses on the configuration needed to ensure files produced by webpack compilation can remain cached unless their content has changed.</p>
<h2 id="output-filenames">Output Filenames<a href="#output-filenames" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>We can use the <code>output.filename</code> <a href="/configuration/output/#outputfilename">substitutions</a> setting to define the names of our output files. webpack provides a method of templating the filenames using bracketed strings called <strong>substitutions</strong>. The <code>[contenthash]</code> substitution will add a unique hash based on the content of an asset. When the asset's content changes, <code>[contenthash]</code> will change as well.</p>
<p>Let's get our project set up using the example from <a href="/guides/getting-started">getting started</a> with the <code>plugins</code> from <a href="/guides/output-management">output management</a>, so we don't have to deal with maintaining our <code>index.html</code> file manually:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">webpack-demo
|- package.json
|- webpack.config.js
|- /dist
|- /src
  |- index.js
|- /node_modules</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');
  const { CleanWebpackPlugin } = require('clean-webpack-plugin');
  const HtmlWebpackPlugin = require('html-webpack-plugin');

  module.exports = {
    entry: './src/index.js',
    plugins: [
      // new CleanWebpackPlugin(['dist/*']) for &#x3C; v2 versions of CleanWebpackPlugin
      new CleanWebpackPlugin(),
      new HtmlWebpackPlugin({
<span class="token deleted">-       title: 'Output Management',</span>
<span class="token inserted">+       title: 'Caching',</span>
      }),
    ],
    output: {
<span class="token deleted">-     filename: 'bundle.js',</span>
<span class="token inserted">+     filename: '[name].[contenthash].js',</span>
      path: path.resolve(__dirname, 'dist'),
    },
  };</code></pre>
<p>Running our build script, <code>npm run build</code>, with this configuration should produce the following output:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
                       Asset       Size  Chunks                    Chunk Names
main.7e2c49a622975ebd9b7e.js     544 kB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  main
                  index.html  197 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.</code></pre>
<p>As you can see the bundle's name now reflects its content (via the hash). If we run another build without making any changes, we'd expect that filename to stay the same. However, if we were to run it again, we may find that this is not the case:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
                       Asset       Size  Chunks                    Chunk Names
main.205199ab45963f6a62ec.js     544 kB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  main
                  index.html  197 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.</code></pre>
<p>This is because webpack includes certain boilerplate, specifically the runtime and manifest, in the entry chunk.</p>
<blockquote class="warning">
<p>Output may differ depending on your current webpack version. Newer versions may not have all the same issues with hashing as some older versions, but we still recommend the following steps to be safe.</p>
</blockquote>
<h2 id="extracting-boilerplate">Extracting Boilerplate<a href="#extracting-boilerplate" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>As we learned in <a href="/guides/code-splitting">code splitting</a>, the <a href="/plugins/split-chunks-plugin/"><code>SplitChunksPlugin</code></a> can be used to split modules out into separate bundles. webpack provides an optimization feature to split runtime code into a separate chunk using the <a href="/configuration/optimization/#optimizationruntimechunk"><code>optimization.runtimeChunk</code></a> option. Set it to <code>single</code> to create a single runtime bundle for all chunks:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');
  const { CleanWebpackPlugin } = require('clean-webpack-plugin');
  const HtmlWebpackPlugin = require('html-webpack-plugin');

  module.exports = {
    entry: './src/index.js',
    plugins: [
      // new CleanWebpackPlugin(['dist/*']) for &#x3C; v2 versions of CleanWebpackPlugin
      new CleanWebpackPlugin(),
      new HtmlWebpackPlugin({
        title: 'Caching',
      }),
    ],
    output: {
      filename: '[name].[contenthash].js',
      path: path.resolve(__dirname, 'dist'),
    },
<span class="token inserted">+   optimization: {</span>
<span class="token inserted">+     runtimeChunk: 'single',</span>
<span class="token inserted">+   },</span>
  };</code></pre>
<p>Let's run another build to see the extracted <code>runtime</code> bundle:</p>
<pre><code class="hljs language-bash">Hash: 82c9c385607b2150fab2
Version: webpack 4.12.0
Time: 3027ms
                          Asset       Size  Chunks             Chunk Names
runtime.cc17ae2a94ec771e9221.js   1.42 KiB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  runtime
   main.e81de2cf758ada72f306.js   69.5 KiB       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
                     index.html  275 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">[</span>1<span class="token punctuation">]</span> <span class="token punctuation">(</span>webpack<span class="token punctuation">)</span>/buildin/module.js 497 bytes <span class="token punctuation">{</span>1<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
<span class="token punctuation">[</span>2<span class="token punctuation">]</span> <span class="token punctuation">(</span>webpack<span class="token punctuation">)</span>/buildin/global.js 489 bytes <span class="token punctuation">{</span>1<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
<span class="token punctuation">[</span>3<span class="token punctuation">]</span> ./src/index.js 309 bytes <span class="token punctuation">{</span>1<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
    + 1 hidden module</code></pre>
<p>It's also good practice to extract third-party libraries, such as <code>lodash</code> or <code>react</code>, to a separate <code>vendor</code> chunk as they are less likely to change than our local source code. This step will allow clients to request even less from the server to stay up to date.
This can be done by using the <a href="/plugins/split-chunks-plugin/#splitchunkscachegroups"><code>cacheGroups</code></a> option of the <a href="/plugins/split-chunks-plugin/"><code>SplitChunksPlugin</code></a> demonstrated in <a href="/plugins/split-chunks-plugin/#split-chunks-example-2">Example 2 of SplitChunksPlugin</a>. Lets add <code>optimization.splitChunks</code> with <code>cacheGroups</code> with next params and build:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');
  const { CleanWebpackPlugin } = require('clean-webpack-plugin');
  const HtmlWebpackPlugin = require('html-webpack-plugin');

  module.exports = {
    entry: './src/index.js',
    plugins: [
      // new CleanWebpackPlugin(['dist/*']) for &#x3C; v2 versions of CleanWebpackPlugin
      new CleanWebpackPlugin(),
      new HtmlWebpackPlugin({
        title: 'Caching',
      }),
    ],
    output: {
      filename: '[name].[contenthash].js',
      path: path.resolve(__dirname, 'dist'),
    },
    optimization: {
      runtimeChunk: 'single',
<span class="token inserted">+     splitChunks: {</span>
<span class="token inserted">+       cacheGroups: {</span>
<span class="token inserted">+         vendor: {</span>
<span class="token inserted">+           test: /[\\/]node_modules[\\/]/,</span>
<span class="token inserted">+           name: 'vendors',</span>
<span class="token inserted">+           chunks: 'all',</span>
<span class="token inserted">+         },</span>
<span class="token inserted">+       },</span>
<span class="token inserted">+     },</span>
    },
  };</code></pre>
<p>Let's run another build to see our new <code>vendor</code> bundle:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
                          Asset       Size  Chunks             Chunk Names
runtime.cc17ae2a94ec771e9221.js   1.42 KiB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  runtime
vendors.a42c3ca0d742766d7a28.js   69.4 KiB       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  vendors
   main.abf44fedb7d11d4312d7.js  240 bytes       2  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
                     index.html  353 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.</code></pre>
<p>We can now see that our <code>main</code> bundle does not contain <code>vendor</code> code from <code>node_modules</code> directory and is down in size to <code>240 bytes</code>!</p>
<h2 id="module-identifiers">Module Identifiers<a href="#module-identifiers" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Let's add another module, <code>print.js</code>, to our project:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">webpack-demo
|- package.json
|- webpack.config.js
|- /dist
|- /src
  |- index.js
<span class="token inserted">+ |- print.js</span>
|- /node_modules</code></pre>
<p><strong>print.js</strong></p>
<pre><code class="hljs language-diff"><span class="token inserted">+ export default function print(text) {</span>
<span class="token inserted">+   console.log(text);</span>
<span class="token inserted">+ };</span></code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff">  import _ from 'lodash';
<span class="token inserted">+ import Print from './print';</span>

  function component() {
    const element = document.createElement('div');

    // Lodash, now imported by this script
    element.innerHTML = _.join(['Hello', 'webpack'], ' ');
<span class="token inserted">+   element.onclick = Print.bind(null, 'Hello webpack!');</span>

    return element;
  }

  document.body.appendChild(component());</code></pre>
<p>Running another build, we would expect only our <code>main</code> bundle's hash to change, however...</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
                           Asset       Size  Chunks                    Chunk Names
  runtime.1400d5af64fc1b7b3a45.js    5.85 kB      0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>         runtime
  vendor.a7561fb0e9a071baadb9.js     541 kB       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  vendor
    main.b746e3eb72875af2caa9.js    1.22 kB       2  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>         main
                      index.html  352 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.</code></pre>
<p>... we can see that all three have. This is because each <a href="/api/module-variables/#moduleid-commonjs"><code>module.id</code></a> is incremented based on resolving order by default. Meaning when the order of resolving is changed, the IDs will be changed as well. So, to recap:</p>
<ul>
<li>The <code>main</code> bundle changed because of its new content.</li>
<li>The <code>vendor</code> bundle changed because its <code>module.id</code> was changed.</li>
<li>And, the <code>runtime</code> bundle changed because it now contains a reference to a new module.</li>
</ul>
<p>The first and last are expected, it's the <code>vendor</code> hash we want to fix. Let's use <a href="/configuration/optimization/#optimizationmoduleids"><code>optimization.moduleIds</code></a> with <code>'hashed'</code> option:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');
  const { CleanWebpackPlugin } = require('clean-webpack-plugin');
  const HtmlWebpackPlugin = require('html-webpack-plugin');

  module.exports = {
    entry: './src/index.js',
    plugins: [
      // new CleanWebpackPlugin(['dist/*']) for &#x3C; v2 versions of CleanWebpackPlugin
      new CleanWebpackPlugin(),
      new HtmlWebpackPlugin({
        title: 'Caching',
      }),
    ],
    output: {
      filename: '[name].[contenthash].js',
      path: path.resolve(__dirname, 'dist'),
    },
    optimization: {
<span class="token inserted">+     moduleIds: 'hashed',</span>
      runtimeChunk: 'single',
      splitChunks: {
        cacheGroups: {
          vendor: {
            test: /[\\/]node_modules[\\/]/,
            name: 'vendors',
            chunks: 'all',
          },
        },
      },
    },
  };</code></pre>
<p>Now, despite any new local dependencies, our <code>vendor</code> hash should stay consistent between builds:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
                          Asset       Size  Chunks             Chunk Names
   main.216e852f60c8829c2289.js  340 bytes       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
vendors.55e79e5927a639d21a1b.js   69.5 KiB       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  vendors
runtime.725a1a51ede5ae0cfde0.js   1.42 KiB       2  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  runtime
                     index.html  353 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
Entrypoint main <span class="token operator">=</span> runtime.725a1a51ede5ae0cfde0.js vendors.55e79e5927a639d21a1b.js main.216e852f60c8829c2289.js
<span class="token punctuation">..</span>.</code></pre>
<p>And let's modify our <code>src/index.js</code> to temporarily remove that extra dependency:</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff">  import _ from 'lodash';
<span class="token deleted">- import Print from './print';</span>
<span class="token inserted">+ // import Print from './print';</span>

  function component() {
    const element = document.createElement('div');

    // Lodash, now imported by this script
    element.innerHTML = _.join(['Hello', 'webpack'], ' ');
<span class="token deleted">-   element.onclick = Print.bind(null, 'Hello webpack!');</span>
<span class="token inserted">+   // element.onclick = Print.bind(null, 'Hello webpack!');</span>

    return element;
  }

  document.body.appendChild(component());</code></pre>
<p>And finally run our build again:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
                          Asset       Size  Chunks             Chunk Names
   main.ad717f2466ce655fff5c.js  274 bytes       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
vendors.55e79e5927a639d21a1b.js   69.5 KiB       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  vendors
runtime.725a1a51ede5ae0cfde0.js   1.42 KiB       2  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  runtime
                     index.html  353 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
Entrypoint main <span class="token operator">=</span> runtime.725a1a51ede5ae0cfde0.js vendors.55e79e5927a639d21a1b.js main.ad717f2466ce655fff5c.js
<span class="token punctuation">..</span>.</code></pre>
<p>We can see that both builds yielded <code>55e79e5927a639d21a1b</code> in the <code>vendor</code> bundle's filename.</p>
<h2 id="conclusion-3">Conclusion<a href="#conclusion-3" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Caching can be complicated, but the benefit to application or site users makes it worth the effort. See the <em>Further Reading</em> section below to learn more.</p>
<h1 id="authoring-libraries">Authoring Libraries<a href="#authoring-libraries" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>Aside from applications, webpack can also be used to bundle JavaScript libraries. The following guide is meant for library authors looking to streamline their bundling strategy.</p>
<h2 id="authoring-a-library">Authoring a Library<a href="#authoring-a-library" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Let's assume that you are writing a small library ,<code>webpack-numbers</code>, that allows users to convert the numbers 1 through 5 from their numeric representation to a textual one and vice-versa, e.g. 2 to 'two'.</p>
<p>The basic project structure may look like this:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff"><span class="token inserted">+  |- webpack.config.js</span>
<span class="token inserted">+  |- package.json</span>
<span class="token inserted">+  |- /src</span>
<span class="token inserted">+    |- index.js</span>
<span class="token inserted">+    |- ref.json</span></code></pre>
<p>Initialize npm, install webpack and lodash:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> init -y
<span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack lodash</code></pre>
<p><strong>src/ref.json</strong></p>
<pre><code class="hljs language-json"><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">"num"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">"word"</span><span class="token operator">:</span> <span class="token string">"One"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">"num"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">"word"</span><span class="token operator">:</span> <span class="token string">"Two"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">"num"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token property">"word"</span><span class="token operator">:</span> <span class="token string">"Three"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">"num"</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token property">"word"</span><span class="token operator">:</span> <span class="token string">"Four"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">"num"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token property">"word"</span><span class="token operator">:</span> <span class="token string">"Five"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">"num"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">"word"</span><span class="token operator">:</span> <span class="token string">"Zero"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span></code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> numRef <span class="token keyword">from</span> <span class="token string">'./ref.json'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">numToWord</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> _<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>numRef<span class="token punctuation">,</span> <span class="token punctuation">(</span>accum<span class="token punctuation">,</span> ref<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> ref<span class="token punctuation">.</span>num <span class="token operator">===</span> num <span class="token operator">?</span> ref<span class="token punctuation">.</span>word <span class="token punctuation">:</span> accum<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">wordToNum</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> _<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>numRef<span class="token punctuation">,</span> <span class="token punctuation">(</span>accum<span class="token punctuation">,</span> ref<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> ref<span class="token punctuation">.</span>word <span class="token operator">===</span> word <span class="token operator">&#x26;&#x26;</span> word<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> ref<span class="token punctuation">.</span>num <span class="token punctuation">:</span> accum<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>The usage specification for the library use will be as follows:</p>
<ul>
<li><strong>ES2015 module import:</strong></li>
</ul>
<pre><code class="hljs language-js"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> webpackNumbers <span class="token keyword">from</span> <span class="token string">'webpack-numbers'</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
webpackNumbers<span class="token punctuation">.</span><span class="token function">wordToNum</span><span class="token punctuation">(</span><span class="token string">'Two'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<ul>
<li><strong>CommonJS module require:</strong></li>
</ul>
<pre><code class="hljs language-js"><span class="token keyword">const</span> webpackNumbers <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-numbers'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
webpackNumbers<span class="token punctuation">.</span><span class="token function">wordToNum</span><span class="token punctuation">(</span><span class="token string">'Two'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<ul>
<li><strong>AMD module require:</strong></li>
</ul>
<pre><code class="hljs language-js"><span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'webpackNumbers'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>webpackNumbers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  webpackNumbers<span class="token punctuation">.</span><span class="token function">wordToNum</span><span class="token punctuation">(</span><span class="token string">'Two'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>The consumer also can use the library by loading it via a script tag:</p>
<pre><code class="hljs language-html"><span class="token doctype">&#x3C;!doctype html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>html</span><span class="token punctuation">></span></span>
  ...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://unpkg.com/webpack-numbers<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">
    <span class="token comment">// ...</span>
    <span class="token comment">// Global variable</span>
    webpackNumbers<span class="token punctuation">.</span><span class="token function">wordToNum</span><span class="token punctuation">(</span><span class="token string">'Five'</span><span class="token punctuation">)</span>
    <span class="token comment">// Property in the window object</span>
    window<span class="token punctuation">.</span>webpackNumbers<span class="token punctuation">.</span><span class="token function">wordToNum</span><span class="token punctuation">(</span><span class="token string">'Five'</span><span class="token punctuation">)</span>
    <span class="token comment">// ...</span>
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>html</span><span class="token punctuation">></span></span></code></pre>
<p>Note that we can also configure it to expose the library in the following ways:</p>
<ul>
<li>Property in the global object, for node.</li>
<li>Property in the <code>this</code> object.</li>
</ul>
<p>For full library configuration and code please refer to <a href="https://github.com/kalcifer/webpack-library-example">webpack-library-example</a>.</p>
<h2 id="base-configuration">Base Configuration<a href="#base-configuration" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Now let's bundle this library in a way that will achieve the following goals:</p>
<ul>
<li>Using <code>externals</code> to avoid bundling <code>lodash</code>, so the consumer is required to load it.</li>
<li>Setting the library name as <code>webpack-numbers</code>.</li>
<li>Exposing the library as a variable called <code>webpackNumbers</code>.</li>
<li>Being able to access the library inside Node.js.</li>
</ul>
<p>Also, the consumer should be able to access the library in the following ways:</p>
<ul>
<li>ES2015 module. i.e. <code>import webpackNumbers from 'webpack-numbers'</code>.</li>
<li>CommonJS module. i.e. <code>require('webpack-numbers')</code>.</li>
<li>Global variable when included through <code>script</code> tag.</li>
</ul>
<p>We can start with this basic webpack configuration:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token punctuation">:</span> <span class="token string">'webpack-numbers.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h2 id="externalize-lodash">Externalize Lodash<a href="#externalize-lodash" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Now, if you run <code>webpack</code>, you will find that a largish bundle is created. If you inspect the file, you'll see that lodash has been bundled along with your code. In this case, we'd prefer to treat <code>lodash</code> as a <code>peerDependency</code>. Meaning that the consumer should already have <code>lodash</code> installed. Hence you would want to give up control of this external library to the consumer of your library.</p>
<p>This can be done using the <code>externals</code> configuration:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');

  module.exports = {
    entry: './src/index.js',
    output: {
      path: path.resolve(__dirname, 'dist'),
      filename: 'webpack-numbers.js',
    },
<span class="token inserted">+   externals: {</span>
<span class="token inserted">+     lodash: {</span>
<span class="token inserted">+       commonjs: 'lodash',</span>
<span class="token inserted">+       commonjs2: 'lodash',</span>
<span class="token inserted">+       amd: 'lodash',</span>
<span class="token inserted">+       root: '_',</span>
<span class="token inserted">+     },</span>
<span class="token inserted">+   },</span>
  };</code></pre>
<p>This means that your library expects a dependency named <code>lodash</code> to be available in the consumer's environment.</p>
<blockquote class="tip">
<p>Note that if you only plan on using your library as a dependency in another webpack bundle, you may specify <code>externals</code> as an array.</p>
</blockquote>
<h2 id="external-limitations">External Limitations<a href="#external-limitations" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>For libraries that use several files from a dependency:</p>
<pre><code class="hljs language-js"><span class="token keyword">import</span> <span class="token constant">A</span> <span class="token keyword">from</span> <span class="token string">'library/one'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token constant">B</span> <span class="token keyword">from</span> <span class="token string">'library/two'</span><span class="token punctuation">;</span>

<span class="token comment">// ...</span></code></pre>
<p>You won't be able to exclude them from the bundle by specifying <code>library</code> in the externals. You'll either need to exclude them one by one or by using a regular expression.</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  externals<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token string">'library/one'</span><span class="token punctuation">,</span>
    <span class="token string">'library/two'</span><span class="token punctuation">,</span>
    <span class="token comment">// Everything that starts with "library/"</span>
    <span class="token operator">/</span><span class="token operator">^</span>library\<span class="token regex">/.+$/</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h2 id="expose-the-library">Expose the Library<a href="#expose-the-library" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>For widespread use of the library, we would like it to be compatible in different environments, i.e. CommonJS, AMD, Node.js and as a global variable. To make your library available for consumption, add the <code>library</code> property inside <code>output</code>:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');

  module.exports = {
    entry: './src/index.js',
    output: {
      path: path.resolve(__dirname, 'dist'),
      filename: 'webpack-numbers.js',
<span class="token inserted">+     library: 'webpackNumbers',</span>
    },
    externals: {
      lodash: {
        commonjs: 'lodash',
        commonjs2: 'lodash',
        amd: 'lodash',
        root: '_',
      },
    },
  };</code></pre>
<blockquote class="tip">
<p>Note that the <code>library</code> setup is tied to the <code>entry</code> configuration. For most libraries, specifying a single entry point is sufficient. While <a href="https://github.com/webpack/webpack/tree/master/examples/multi-part-library">multi-part libraries</a> are possible, it is simpler to expose partial exports through an <a href="https://stackoverflow.com/questions/34072598/es6-exporting-importing-in-index-file">index script</a> that serves as a single entry point. Using an <code>array</code> as an <code>entry</code> point for a library is <strong>not recommended</strong>.</p>
</blockquote>
<p>This exposes your library bundle available as a global variable named <code>webpackNumbers</code> when imported. To make the library compatible with other environments, add <code>libraryTarget</code> property to the config. This will add various options about how the library can be exposed.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');

  module.exports = {
    entry: './src/index.js',
    output: {
      path: path.resolve(__dirname, 'dist'),
      filename: 'webpack-numbers.js',
      library: 'webpackNumbers',
<span class="token inserted">+     libraryTarget: 'umd',</span>
    },
    externals: {
      lodash: {
        commonjs: 'lodash',
        commonjs2: 'lodash',
        amd: 'lodash',
        root: '_',
      },
    },
  };</code></pre>
<p>You can expose the library in the following ways:</p>
<ul>
<li>Variable: as a global variable made available by a <code>script</code> tag (<code>libraryTarget:'var'</code>).</li>
<li>This: available through the <code>this</code> object (<code>libraryTarget:'this'</code>).</li>
<li>Window: available through the <code>window</code> object, in the browser (<code>libraryTarget:'window'</code>).</li>
<li>UMD: available after AMD or CommonJS <code>require</code> (<code>libraryTarget:'umd'</code>).</li>
</ul>
<p>If <code>library</code> is set and <code>libraryTarget</code> is not, <code>libraryTarget</code> defaults to <code>var</code> as specified in the <a href="/configuration/output">output configuration documentation</a>. See <a href="/configuration/output/#outputlibrarytarget"><code>output.libraryTarget</code></a> there for a detailed list of all available options.</p>
<blockquote class="warning">
<p>With webpack 3.5.5, using <code>libraryTarget: { root:'_' }</code> doesn't work properly (as stated in <a href="https://github.com/webpack/webpack/issues/4824">issue 4824</a>). However, you can set <code>libraryTarget: { var: '_' }</code> to expect the library as a global variable.</p>
</blockquote>
<h3 id="final-steps">Final Steps<a href="#final-steps" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Optimize your output for production by following the steps mentioned in the <a href="/guides/production">production guide</a>. Let's also add the path to your generated bundle as the package's <code>main</code> field in with the <code>package.json</code></p>
<p><strong>package.json</strong></p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  ...
  <span class="token property">"main"</span><span class="token operator">:</span> <span class="token string">"dist/webpack-numbers.js"</span><span class="token punctuation">,</span>
  ...
<span class="token punctuation">}</span></code></pre>
<p>Or, to add it as a standard module as per <a href="https://github.com/dherman/defense-of-dot-js/blob/master/proposal.md#typical-usage">this guide</a>:</p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  ...
  <span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"src/index.js"</span><span class="token punctuation">,</span>
  ...
<span class="token punctuation">}</span></code></pre>
<p>The key <code>main</code> refers to the <a href="https://docs.npmjs.com/files/package.json#main">standard from <code>package.json</code></a>, and <code>module</code> to <a href="https://github.com/dherman/defense-of-dot-js/blob/master/proposal.md">a</a> <a href="https://github.com/rollup/rollup/wiki/pkg.module">proposal</a> to allow the JavaScript ecosystem upgrade to use ES2015 modules without breaking backwards compatibility.</p>
<blockquote class="warning">
<p>The <code>module</code> property should point to a script that utilizes ES2015 module syntax but no other syntax features that aren't yet supported by browsers or node. This enables webpack to parse the module syntax itself, allowing for lighter bundles via <a href="https://webpack.js.org/guides/tree-shaking/">tree shaking</a> if users are only consuming certain parts of the library.</p>
</blockquote>
<p>Now you can <a href="https://docs.npmjs.com/getting-started/publishing-npm-packages">publish it as an npm package</a> and find it at <a href="https://unpkg.com/#/">unpkg.com</a> to distribute it to your users.</p>
<blockquote class="tip">
<p>To expose stylesheets associated with your library, the <a href="/plugins/mini-css-extract-plugin"><code>MiniCssExtractPlugin</code></a> should be used. Users can then consume and load these as they would any other stylesheet.</p>
</blockquote>
<h1 id="environment-variables">Environment Variables<a href="#environment-variables" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>To disambiguate in your <code>webpack.config.js</code> between <a href="/guides/development">development</a> and <a href="/guides/production">production builds</a> you may use environment variables.</p>
<blockquote class="tip">
<p>webpack's environment variables are different from the <a href="https://en.wikipedia.org/wiki/Environment_variable">environment variables</a> of operating system shells like <code>bash</code> and <code>CMD.exe</code></p>
</blockquote>
<p>The webpack command line <a href="/api/cli/#environment-options">environment option</a> <code>--env</code> allows you to pass in as many environment variables as you like. Environment variables will be made accessible in your <code>webpack.config.js</code>. For example, <code>--env.production</code> or <code>--env.NODE_ENV=local</code> (<code>NODE_ENV</code> is conventionally used to define the environment type, see <a href="https://dzone.com/articles/what-you-should-know-about-node-env">here</a>.)</p>
<pre><code class="hljs language-bash">webpack --env.NODE_ENV<span class="token operator">=</span>local --env.production --progress</code></pre>
<blockquote class="tip">
<p>Setting up your <code>env</code> variable without assignment, <code>--env.production</code> sets <code>--env.production</code> to <code>true</code> by default. There are also other syntaxes that you can use. See the <a href="/api/cli/#environment-options">webpack CLI</a> documentation for more information.</p>
</blockquote>
<p>There is one change that you will have to make to your webpack config. Typically, <code>module.exports</code> points to the configuration object. To use the <code>env</code> variable, you must convert <code>module.exports</code> to a function:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> env <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// Use env.&#x3C;YOUR VARIABLE> here:</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'NODE_ENV: '</span><span class="token punctuation">,</span> env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'local'</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Production: '</span><span class="token punctuation">,</span> env<span class="token punctuation">.</span>production<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
      path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h1 id="build-performance">Build Performance<a href="#build-performance" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>This guide contains some useful tips for improving build/compilation performance.</p>
<hr>
<h2 id="general">General<a href="#general" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The following best practices should help, whether you're running build scripts in <a href="/guides/development">development</a> or <a href="/guides/production">production</a>.</p>
<h3 id="stay-up-to-date">Stay Up to Date<a href="#stay-up-to-date" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Use the latest webpack version. We are always making performance improvements. The latest stable version of webpack is:</p>
<p><a href="https://github.com/webpack/webpack/releases"><img src="https://img.shields.io/npm/v/webpack.svg?label=webpack&#x26;style=flat-square&#x26;maxAge=3600" alt="latest webpack version"></a></p>
<p>Staying up-to-date with <strong>Node.js</strong>  can also help with performance. On top of this, keeping your package manager (e.g. <code>npm</code> or <code>yarn</code>) up-to-date can also help. Newer versions create more efficient module trees and increase resolving speed.</p>
<h3 id="loaders">Loaders<a href="#loaders" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Apply loaders to the minimal number of modules necessary. Instead of:</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>Use the <code>include</code> field to only apply the loader modules that actually need to be transformed by it:</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        include<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h3 id="bootstrap">Bootstrap<a href="#bootstrap" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Each additional loader/plugin has a bootup time. Try to use as few tools as possible.</p>
<h3 id="resolving">Resolving<a href="#resolving" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>The following steps can increase resolving speed:</p>
<ul>
<li>Minimize the number of items in <code>resolve.modules</code>, <code>resolve.extensions</code>, <code>resolve.mainFiles</code>, <code>resolve.descriptionFiles</code>, as they increase the number of filesystem calls.</li>
<li>Set <code>resolve.symlinks: false</code> if you don't use symlinks (e.g. <code>npm link</code> or <code>yarn link</code>).</li>
<li>Set <code>resolve.cacheWithContext: false</code> if you use custom resolving plugins, that are not context specific.</li>
</ul>
<h3 id="dlls">Dlls<a href="#dlls" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Use the <code>DllPlugin</code> to move code that is changed less often into a separate compilation. This will improve the application's compilation speed, although it does increase complexity of the build process.</p>
<h3 id="smaller--faster">Smaller = Faster<a href="#smaller--faster" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Decrease the total size of the compilation to increase build performance. Try to keep chunks small.</p>
<ul>
<li>Use fewer/smaller libraries.</li>
<li>Use the <code>SplitChunksPlugin</code> in Multi-Page Applications.</li>
<li>Use the <code>SplitChunksPlugin</code> in <code>async</code> mode in Multi-Page Applications.</li>
<li>Remove unused code.</li>
<li>Only compile the part of the code you are currently developing on.</li>
</ul>
<h3 id="worker-pool">Worker Pool<a href="#worker-pool" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>The <code>thread-loader</code> can be used to offload expensive loaders to a worker pool.</p>
<blockquote class="warning">
<p>Don't use too many workers, as there is a boot overhead for the Node.js runtime and the loader. Minimize the module transfers between worker and main process. IPC is expensive.</p>
</blockquote>
<h3 id="persistent-cache">Persistent cache<a href="#persistent-cache" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Enable persistent caching with the <code>cache-loader</code>. Clear cache directory on <code>"postinstall"</code> in <code>package.json</code>.</p>
<h3 id="custom-pluginsloaders">Custom plugins/loaders<a href="#custom-pluginsloaders" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Profile them to not introduce a performance problem here.</p>
<h3 id="progress-plugin">Progress plugin<a href="#progress-plugin" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>It is possible to shorten build times by removing <code>progress-plugin</code> from webpack's configuration. Keep in mind, <code>progress-plugin</code> might not provide as much value for fast builds as well, so make sure you are leveraging the benefits of using it.</p>
<hr>
<h2 id="development-1">Development<a href="#development-1" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The following steps are especially useful in <em>development</em>.</p>
<h3 id="incremental-builds">Incremental Builds<a href="#incremental-builds" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Use webpack's watch mode. Don't use other tools to watch your files and invoke webpack. The built-in watch mode will keep track of timestamps and passes this information to the compilation for cache invalidation.</p>
<p>In some setups, watching falls back to polling mode. With many watched files, this can cause a lot of CPU load. In these cases, you can increase the polling interval with <code>watchOptions.poll</code>.</p>
<h3 id="compile-in-memory">Compile in Memory<a href="#compile-in-memory" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>The following utilities improve performance by compiling and serving assets in memory rather than writing to disk:</p>
<ul>
<li><code>webpack-dev-server</code></li>
<li><code>webpack-hot-middleware</code></li>
<li><code>webpack-dev-middleware</code></li>
</ul>
<h3 id="statstojson-speed">stats.toJson speed<a href="#statstojson-speed" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>webpack 4 outputs a large amount of data with its <code>stats.toJson()</code> by default. Avoid retrieving portions of the <code>stats</code> object unless necessary in the incremental step. <code>webpack-dev-server</code> after v3.1.3 contained a substantial performance fix to minimize the amount of data retrieved from the <code>stats</code> object per incremental build step.</p>
<h3 id="devtool">Devtool<a href="#devtool" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Be aware of the performance differences between the different <code>devtool</code> settings.</p>
<ul>
<li><code>"eval"</code> has the best performance, but doesn't assist you for transpiled code.</li>
<li>The <code>cheap-source-map</code> variants are more performant if you can live with the slightly worse mapping quality.</li>
<li>Use a <code>eval-source-map</code> variant for incremental builds.</li>
</ul>
<p>=> In most cases, <code>cheap-module-eval-source-map</code> is the best option.</p>
<h3 id="avoid-production-specific-tooling">Avoid Production Specific Tooling<a href="#avoid-production-specific-tooling" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Certain utilities, plugins, and loaders only make sense when building for production. For example, it usually doesn't make sense to minify and mangle your code with the <code>TerserPlugin</code> while in development. These tools should typically be excluded in development:</p>
<ul>
<li><code>TerserPlugin</code></li>
<li><code>ExtractTextPlugin</code></li>
<li><code>[hash]</code>/<code>[chunkhash]</code></li>
<li><code>AggressiveSplittingPlugin</code></li>
<li><code>AggressiveMergingPlugin</code></li>
<li><code>ModuleConcatenationPlugin</code></li>
</ul>
<h3 id="minimal-entry-chunk">Minimal Entry Chunk<a href="#minimal-entry-chunk" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>webpack only emits updated chunks to the filesystem. For some configuration options, (HMR, <code>[name]</code>/<code>[chunkhash]</code> in <code>output.chunkFilename</code>, <code>[hash]</code>) the entry chunk is invalidated in addition to the changed chunks.</p>
<p>Make sure the entry chunk is cheap to emit by keeping it small. The following code block extracts a chunk containing only the runtime with <em>all other chunks as children</em>:</p>
<pre><code class="hljs language-js"><span class="token keyword">new</span> <span class="token class-name">CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'manifest'</span><span class="token punctuation">,</span>
  minChunks<span class="token punctuation">:</span> <span class="token number">Infinity</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="avoid-extra-optimization-steps">Avoid Extra Optimization Steps<a href="#avoid-extra-optimization-steps" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>webpack does extra algorithmic work to optimize the output for size and load performance. These optimizations are performant for smaller codebases, but can be costly in larger ones:</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    removeAvailableModules<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    removeEmptyChunks<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    splitChunks<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h3 id="output-without-path-info">Output Without Path Info<a href="#output-without-path-info" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>webpack has the ability to generate path info in the output bundle. However, this puts garbage collection pressure on projects that bundle thousands of modules. Turn this off in the <code>options.output.pathinfo</code> setting:</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    pathinfo<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h3 id="nodejs-versions-8910-9111">Node.js Versions 8.9.10-9.11.1<a href="#nodejs-versions-8910-9111" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>There was a <a href="https://github.com/nodejs/node/issues/19769">performance regression</a> in Node.js versions 8.9.10 - 9.11.1 in the ES2015 <code>Map</code> and <code>Set</code> implementations. webpack uses those data structures liberally, so this regression affects compile times.</p>
<p>Earlier and later Node.js versions are not affected.</p>
<h3 id="typescript-loader">TypeScript Loader<a href="#typescript-loader" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Recently, <code>ts-loader</code> has started to consume the internal TypeScript watch mode APIs which dramatically decreases the number of modules to be rebuilt on each iteration. This <code>experimentalWatchApi</code> shares the same logic as the normal TypeScript watch mode itself and is quite stable for development use. Turn on <code>transpileOnly</code>, as well, for even faster incremental builds.</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.tsx?$/</span><span class="token punctuation">,</span>
  use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      loader<span class="token punctuation">:</span> <span class="token string">'ts-loader'</span><span class="token punctuation">,</span>
      options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        transpileOnly<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        experimentalWatchApi<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>Note: the <code>ts-loader</code> documentation suggests the use of <code>cache-loader</code>, but this actually slows the incremental builds down with disk writes.</p>
<p>To gain typechecking again, use the <a href="https://www.npmjs.com/package/fork-ts-checker-webpack-plugin"><code>ForkTsCheckerWebpackPlugin</code></a>.</p>
<p>There is a <a href="https://github.com/TypeStrong/ts-loader/tree/master/examples/fork-ts-checker-webpack-plugin">full example</a> on the ts-loader github repository.</p>
<hr>
<h2 id="production">Production<a href="#production" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The following steps are especially useful in <em>production</em>.</p>
<blockquote class="warning">
<p><strong>Don't sacrifice the quality of your application for small performance gains!</strong> Keep in mind that optimization quality is, in most cases, more important than build performance.</p>
</blockquote>
<h3 id="multiple-compilations">Multiple Compilations<a href="#multiple-compilations" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>When using multiple compilations, the following tools can help:</p>
<ul>
<li><a href="https://github.com/trivago/parallel-webpack"><code>parallel-webpack</code></a>: It allows for compilation in a worker pool.</li>
<li><code>cache-loader</code>: The cache can be shared between multiple compilations.</li>
</ul>
<h3 id="source-maps">Source Maps<a href="#source-maps" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Source maps are really expensive. Do you really need them?</p>
<hr>
<h2 id="specific-tooling-issues">Specific Tooling Issues<a href="#specific-tooling-issues" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The following tools have certain problems that can degrade build performance:</p>
<h3 id="babel">Babel<a href="#babel" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<ul>
<li>Minimize the number of preset/plugins</li>
</ul>
<h3 id="typescript">TypeScript<a href="#typescript" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<ul>
<li>Use the <code>fork-ts-checker-webpack-plugin</code> for typechecking in a separate process.</li>
<li>Configure loaders to skip typechecking.</li>
<li>Use the <code>ts-loader</code> in <code>happyPackMode: true</code> / <code>transpileOnly: true</code>.</li>
</ul>
<h3 id="sass">Sass<a href="#sass" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<ul>
<li><code>node-sass</code> has a bug which blocks threads from the Node.js thread pool. When using it with the <code>thread-loader</code> set <code>workerParallelJobs: 2</code>.</li>
</ul>
<h1 id="content-security-policies">Content Security Policies<a href="#content-security-policies" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>Webpack is capable of adding <code>nonce</code> to all scripts that it loads. To activate the feature set a <code>__webpack_nonce__</code> variable needs to be included in your entry script. A unique hash based nonce should be generated and provided for each unique page view this is why <code>__webpack_nonce__</code> is specified in the entry file and not in the configuration. Please note that <code>nonce</code> should always be a base64-encoded string.</p>
<h2 id="examples">Examples<a href="#examples" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>In the entry file:</p>
<pre><code class="hljs language-js"><span class="token comment">// ...</span>
__webpack_nonce__ <span class="token operator">=</span> <span class="token string">'c29tZSBjb29sIHN0cmluZyB3aWxsIHBvcCB1cCAxMjM='</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span></code></pre>
<h2 id="enabling-csp">Enabling CSP<a href="#enabling-csp" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Please note that CSPs are not enabled by default. A corresponding header <code>Content-Security-Policy</code> or meta tag <code>&#x3C;meta http-equiv="Content-Security-Policy" ...></code> needs to be sent with the document to instruct the browser to enable the CSP. Here's an example of what a CSP header including a CDN white-listed URL might look like:</p>
<pre><code class="hljs language-html">Content-Security-Policy: default-src 'self'; script-src 'self' https://trusted.cdn.com;</code></pre>
<p>For more information on CSP and <code>nonce</code> attribute, please refer to <strong>Further Reading</strong> section at the bottom of this page.</p>
<h1 id="development---vagrant">Development - Vagrant<a href="#development---vagrant" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>If you have a more advanced project and use <a href="https://www.vagrantup.com/">Vagrant</a> to run your development environment in a Virtual Machine, you'll often want to also run webpack in the VM.</p>
<h2 id="configuring-the-project">Configuring the Project<a href="#configuring-the-project" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>To start, make sure that the <code>Vagrantfile</code> has a static IP;</p>
<pre><code class="hljs language-ruby"><span class="token constant">Vagrant</span><span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token operator">|</span>config<span class="token operator">|</span>
  config<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>network <span class="token symbol">:private_network</span><span class="token punctuation">,</span> ip<span class="token punctuation">:</span> <span class="token string">"10.10.10.61"</span>
<span class="token keyword">end</span></code></pre>
<p>Next, install webpack and webpack-dev-server in your project;</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack webpack-dev-server</code></pre>
<p>Make sure to have a <code>webpack.config.js</code> file. If you haven't already, use this as a minimal example to get started:</p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  context<span class="token punctuation">:</span> __dirname<span class="token punctuation">,</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./app.js'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>And create an <code>index.html</code> file. The script tag should point to your bundle. If <code>output.filename</code> is not specified in the config, this will be <code>bundle.js</code>.</p>
<pre><code class="hljs language-html"><span class="token doctype">&#x3C;!doctype html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>html</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/bundle.js<span class="token punctuation">"</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h2</span><span class="token punctuation">></span></span>Heey!<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h2</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>html</span><span class="token punctuation">></span></span></code></pre>
<p>Note that you also need to create an <code>app.js</code> file.</p>
<h2 id="running-the-server">Running the Server<a href="#running-the-server" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Now, let's run the server:</p>
<pre><code class="hljs language-bash">webpack-dev-server --host 0.0.0.0 --public 10.10.10.61:8080 --watch-poll</code></pre>
<p>By default, the server will only be accessible from localhost. We'll be accessing it from our host PC, so we need to change <code>--host</code> to allow this.</p>
<p>webpack-dev-server will include a script in your bundle that connects to a WebSocket to reload when a change in any of your files occurs.
The <code>--public</code> flag makes sure the script knows where to look for the WebSocket. The server will use port <code>8080</code> by default, so we should also specify that here.</p>
<p><code>--watch-poll</code> makes sure that webpack can detect changes in your files. By default, webpack listens to events triggered by the filesystem, but VirtualBox has many problems with this.</p>
<p>The server should be accessible on <code>http://10.10.10.61:8080</code> now. If you make a change in <code>app.js</code>, it should live reload.</p>
<h2 id="advanced-usage-with-nginx">Advanced Usage with nginx<a href="#advanced-usage-with-nginx" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>To mimic a more production-like environment, it is also possible to proxy the webpack-dev-server with nginx.</p>
<p>In your nginx config file, add the following:</p>
<pre><code class="hljs language-nginx"><span class="token keyword">server</span> <span class="token punctuation">{</span>
  <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
    <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token punctuation">:</span><span class="token number">8080</span><span class="token punctuation">;</span>
    <span class="token keyword">proxy_http_version</span> <span class="token number">1.1</span><span class="token punctuation">;</span>
    <span class="token keyword">proxy_set_header</span> Upgrade <span class="token variable">$http_upgrade</span><span class="token punctuation">;</span>
    <span class="token keyword">proxy_set_header</span> Connection <span class="token string">"upgrade"</span><span class="token punctuation">;</span>
    <span class="token keyword">error_page</span> <span class="token number">502</span> @start<span class="token operator">-</span>webpack<span class="token operator">-</span>dev<span class="token operator">-</span><span class="token keyword">server</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">location</span> @start<span class="token operator">-</span>webpack<span class="token operator">-</span>dev<span class="token operator">-</span><span class="token keyword">server</span> <span class="token punctuation">{</span>
    <span class="token keyword">default_type</span> text<span class="token operator">/</span>plain<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">502</span> <span class="token string">"Please start the webpack-dev-server first."</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>The <code>proxy_set_header</code> lines are important, because they allow the WebSockets to work correctly.</p>
<p>The command to start webpack-dev-server can then be changed to this:</p>
<pre><code class="hljs language-bash">webpack-dev-server --public 10.10.10.61 --watch-poll</code></pre>
<p>This makes the server only accessible on <code>127.0.0.1</code>, which is fine because nginx takes care of making it available on your host PC.</p>
<h2 id="conclusion-4">Conclusion<a href="#conclusion-4" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>We made the Vagrant box accessible from a static IP, and then made webpack-dev-server publicly accessible so it is reachable from a browser. We then tackled a common problem that VirtualBox doesn't send out filesystem events, causing the server to not reload on file changes.</p>
<h1 id="dependency-management">Dependency Management<a href="#dependency-management" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<blockquote>
<p>es6 modules</p>
<p>commonjs</p>
<p>amd</p>
</blockquote>
<h2 id="require-with-expression">require with expression<a href="#require-with-expression" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>A context is created if your request contains expressions, so the <strong>exact</strong> module is not known on compile time.</p>
<p>Example:</p>
<pre><code class="hljs language-javascript"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./template/'</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'.ejs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>webpack parses the <code>require()</code> call and extracts some information:</p>
<pre><code class="hljs language-code">Directory: ./template
Regular expression: /^.*\.ejs$/
</code></pre>
<p><strong>context module</strong></p>
<p>A context module is generated. It contains references to <strong>all modules in that directory</strong> that can be required with a request matching the regular expression. The context module contains a map which translates requests to module ids.</p>
<p>Example:</p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">"./table.ejs"</span><span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
  <span class="token property">"./table-row.ejs"</span><span class="token operator">:</span> <span class="token number">43</span><span class="token punctuation">,</span>
  <span class="token property">"./directory/folder.ejs"</span><span class="token operator">:</span> <span class="token number">44</span>
<span class="token punctuation">}</span></code></pre>
<p>The context module also contains some runtime logic to access the map.</p>
<p>This means dynamic requires are supported but will cause all possible modules to be included in the bundle.</p>
<h2 id="requirecontext"><code>require.context</code><a href="#requirecontext" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>You can create your own context with the <code>require.context()</code> function.</p>
<p>It allows you to pass in a directory to search, a flag indicating whether subdirectories should be searched
too, and a regular expression to match files against.</p>
<p>webpack parses for <code>require.context()</code> in the code while building.</p>
<p>The syntax is as follows:</p>
<pre><code class="hljs language-javascript">require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span>directory<span class="token punctuation">,</span> useSubdirectories <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> regExp <span class="token operator">=</span> <span class="token regex">/^\.\/.*$/</span><span class="token punctuation">,</span> mode <span class="token operator">=</span> <span class="token string">'sync'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Examples:</p>
<pre><code class="hljs language-javascript">require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'./test'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token regex">/\.test\.js$/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// a context with files from the test directory that can be required with a request endings with `.test.js`.</span></code></pre>
<pre><code class="hljs language-javascript">require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'../'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token regex">/\.stories\.js$/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// a context with all files in the parent folder and descending folders ending with `.stories.js`.</span></code></pre>
<blockquote class="warning">
<p>The arguments passed to <code>require.context</code> must be literals!</p>
</blockquote>
<h3 id="context-module-api">context module API<a href="#context-module-api" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>A context module exports a (require) function that takes one argument: the request.</p>
<p>The exported function has 3 properties: <code>resolve</code>, <code>keys</code>, <code>id</code>.</p>
<ul>
<li><code>resolve</code> is a function and returns the module id of the parsed request.</li>
<li><code>keys</code> is a function that returns an array of all possible requests that the context module can handle.</li>
</ul>
<p>This can be useful if you want to require all files in a directory or matching a pattern, Example:</p>
<pre><code class="hljs language-javascript"><span class="token keyword">function</span> <span class="token function">importAll</span> <span class="token punctuation">(</span>r<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  r<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">importAll</span><span class="token punctuation">(</span>require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'../components/'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token regex">/\.js$/</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<pre><code class="hljs language-javascript"><span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">importAll</span> <span class="token punctuation">(</span>r<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  r<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>key <span class="token operator">=></span> cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">r</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">importAll</span><span class="token punctuation">(</span>require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'../components/'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token regex">/\.js$/</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// At build-time cache will be populated with all required modules.</span></code></pre>
<ul>
<li><code>id</code> is the module id of the context module. This may be useful for <code>module.hot.accept</code>.</li>
</ul>
<h1 id="installation">Installation<a href="#installation" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>This guide goes through the various methods used to install webpack.</p>
<h2 id="prerequisites">Prerequisites<a href="#prerequisites" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Before we begin, make sure you have a fresh version of <a href="https://nodejs.org/en/">Node.js</a> installed. The current Long Term Support (LTS) release is an ideal starting point. You may run into a variety of issues with the older versions as they may be missing functionality webpack and/or its related packages require.</p>
<h2 id="local-installation">Local Installation<a href="#local-installation" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The latest webpack release is:</p>
<p><a href="https://github.com/webpack/webpack/releases"><img src="https://img.shields.io/npm/v/webpack.svg?label=webpack&#x26;style=flat-square&#x26;maxAge=3600" alt="GitHub release"></a></p>
<p>To install the latest release or a specific version, run one of the following commands:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack
<span class="token comment"># or specific version</span>
<span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack@<span class="token operator">&#x3C;</span>version<span class="token operator">></span></code></pre>
<p>If you're using webpack v4 or later, you'll also need to install the <a href="/api/cli/">CLI</a>.</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack-cli</code></pre>
<p>Installing locally is what we recommend for most projects. This makes it easier to upgrade projects individually when breaking changes are introduced. Typically webpack is run via one or more <a href="https://docs.npmjs.com/misc/scripts">npm scripts</a> which will look for a webpack installation in your local <code>node_modules</code> directory:</p>
<pre><code class="hljs language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"webpack --config webpack.config.js"</span>
<span class="token punctuation">}</span></code></pre>
<blockquote class="tip">
<p>To run the local installation of webpack you can access its binary version as <code>node_modules/.bin/webpack</code>. Alternatively, if you are using npm v5.2.0 or greater, you can run 'npx webpack' to do it.</p>
</blockquote>
<h2 id="global-installation">Global Installation<a href="#global-installation" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The following NPM installation will make <code>webpack</code> available globally:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --global webpack</code></pre>
<blockquote class="warning">
<p>Note that this is <strong>not a recommended practice</strong>. Installing globally locks you down to a specific version of webpack and could fail in projects that use a different version.</p>
</blockquote>
<h2 id="bleeding-edge">Bleeding Edge<a href="#bleeding-edge" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>If you are enthusiastic about using the latest that webpack has to offer, you can install beta versions or even directly from the webpack repository using the following commands:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> webpack@beta
<span class="token comment"># or specific tag/branch</span>
<span class="token function">npm</span> <span class="token function">install</span> webpack/webpack<span class="token comment">#&#x3C;tagname/branchname></span></code></pre>
<blockquote class="warning">
<p>Take caution when installing these bleeding edge releases! They may still contain bugs and therefore should not be used in production.</p>
</blockquote>
<h1 id="scaffolding">Scaffolding<a href="#scaffolding" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>It can be hard to set up a complex webpack configuration for the first time. Writing advanced configurations to optimize performance is quite hard. The <code>init</code> feature is designed to support people that want to create their own configuration or initializing projects that other people create.</p>
<h2 id="creating-a-scaffold">Creating a scaffold<a href="#creating-a-scaffold" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Before writing a <code>webpack-cli</code> scaffold, think about what you're trying to achieve. Do you want a "general" scaffold that could be used by any project or type of app? Do you want something focused, like a scaffold that writes both your <code>webpack.config.js</code> and your framework code? It's also useful to think about the user experience for your scaffold.</p>
<p><code>webpack-cli</code> offers an interactive experience to customize the output accordingly. For example asking questions like: "What is your entry point?".</p>
<h3 id="writing-a-scaffold">Writing a scaffold<a href="#writing-a-scaffold" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>There are many resources where you can learn how to write a scaffold, you can start from <a href="/contribute/writing-a-scaffold/">Writing a Scaffold</a></p>
<p><code>webpack-scaffold</code> is a utility suite for creating scaffolds. It contains functions that could be used to create a scaffold.</p>
<h3 id="running-a-scaffold">Running a scaffold<a href="#running-a-scaffold" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>A scaffold can be executed using <code>webpack-cli init</code>:</p>
<pre><code class="hljs language-bash">webpack-cli init <span class="token operator">&#x3C;</span>your-scaffold<span class="token operator">></span></code></pre>
<h4 id="running-a-scaffold-locally">Running a scaffold locally<a href="#running-a-scaffold-locally" aria-hidden="true"><span class="icon icon-link"></span></a></h4>
<p>When the scaffold package is in your local file system you should point <code>init</code> to its path:</p>
<pre><code class="hljs language-bash">webpack-cli init path/to/your/scaffold</code></pre>
<p>Or you can create a global module and symlink to the local one:</p>
<ul>
<li>Using npm</li>
</ul>
<pre><code class="hljs language-bash"><span class="token function">cd</span> path/to/my-scaffold
<span class="token function">npm</span> <span class="token function">link</span>
webpack-cli init my-scaffold</code></pre>
<ul>
<li>Using yarn</li>
</ul>
<pre><code class="hljs language-bash"><span class="token function">cd</span> path/to/my-scaffold
yarn <span class="token function">link</span>
webpack-cli init my-scaffold</code></pre>
<h4 id="running-a-scaffold-from-npm">Running a scaffold from npm<a href="#running-a-scaffold-from-npm" aria-hidden="true"><span class="icon icon-link"></span></a></h4>
<p>If the package is available from npm, its name must begin with <code>webpack-scaffold</code> and can be used by running:</p>
<pre><code class="hljs language-bash">webpack-cli init webpack-scaffold-yourpackage</code></pre>
<h2 id="api">API<a href="#api" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>To create a <code>scaffold</code>, you must create a <a href="http://yeoman.io/authoring/"><code>yeoman-generator</code></a>. Thanks to it, you can optionally extend your generator to include methods from the <a href="http://yeoman.io/learning/">Yeoman API</a>. It's worth noting that we support all the properties of a regular webpack configuration. In order for us to do this, there's a thing you need to remember:</p>
<blockquote class="warning">
<p>Objects are made using strings, while strings are made using double strings. This means that in order for you to create a string, you have to wrap it inside another string for us to validate it correctly.</p>
</blockquote>
<h3 id="required">Required<a href="#required" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<ul>
<li><a href="#optsenvconfigurationrequired"><code>opts.env.configuration</code>(required)</a></li>
<li><a href="#optsenvconfigurationmyobj-required"><code>opts.env.configuration.myObj</code> (required)</a></li>
<li><a href="#myobjwebpackoptions-required"><code>myObj.webpackOptions</code> (required)</a></li>
<li><a href="#writing-required"><code>writing</code> (required)</a></li>
</ul>
<h3 id="optional">Optional<a href="#optional" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<ul>
<li><a href="#myobjmerge-optional">myObj.merge</a></li>
<li><a href="#myobjtopscopeoptional">myObj.topScope</a></li>
<li><a href="#myobjconfignameoptional">myObj.configName</a></li>
</ul>
<h3 id="optsenvconfigurationrequired"><code>opts.env.configuration</code>(required)<a href="#optsenvconfigurationrequired" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>object</code></p>
<p>This is the entry point your configuration, initialize it inside the constructor of your generator in order for the CLI to work:</p>
<pre><code class="hljs language-js"><span class="token keyword">class</span> <span class="token class-name">MyScaffold</span> <span class="token keyword">extends</span> <span class="token class-name">Generator</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> opts<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> opts<span class="token punctuation">)</span><span class="token punctuation">;</span>
    opts<span class="token punctuation">.</span>env<span class="token punctuation">.</span>configuration <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="optsenvconfigurationmyobj-required"><code>opts.env.configuration.myObj</code> (required)<a href="#optsenvconfigurationmyobj-required" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>object</code></p>
<p>This is your scaffold, you add the options that the CLI will transform into a webpack configuration here. You can have many different scaffolds named as you prefer, representing different configurations like <code>dev.config</code> or <code>prod.config</code>:</p>
<pre><code class="hljs language-js"><span class="token keyword">class</span> <span class="token class-name">MyScaffold</span> <span class="token keyword">extends</span> <span class="token class-name">Generator</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> opts<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> opts<span class="token punctuation">)</span><span class="token punctuation">;</span>
    opts<span class="token punctuation">.</span>env<span class="token punctuation">.</span>configuration <span class="token operator">=</span> <span class="token punctuation">{</span>
      dev<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      prod<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="myobjwebpackoptions-required"><code>myObj.webpackOptions</code> (required)<a href="#myobjwebpackoptions-required" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>object</code></p>
<p>This object has the same format as a regular webpack <a href="/configuration/">configuration</a>. Declare the properties that you want to scaffold here, e.g. <code>entry</code>, <code>output</code> and <code>context</code>. You can initialize this inside a yeoman method:</p>
<pre><code class="hljs language-js"><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>env<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span>dev<span class="token punctuation">.</span>webpackOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'\'app.js\''</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h3 id="writing-required"><code>writing</code> (required)<a href="#writing-required" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>function</code></p>
<p>For the scaffolding instance to run, you need to write your configuration to a <code>.yo-rc.json</code> file. This could be done using one of the lifecycles in the yeoman generator, such as the <code>writing</code> method:</p>
<pre><code class="hljs language-js"><span class="token keyword">class</span> <span class="token class-name">MyScaffold</span> <span class="token keyword">extends</span> <span class="token class-name">Generator</span> <span class="token punctuation">{</span>
  <span class="token function">writing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>config<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'configuration'</span><span class="token punctuation">,</span> myObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="myobjmerge-optional"><code>myObj.merge</code> (optional)<a href="#myobjmerge-optional" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>string</code></p>
<p>If you want to use <a href="https://github.com/survivejs/webpack-merge"><code>webpack-merge</code></a>, you can set the <code>merge</code> property of <code>myObj</code> to the name of the configuration you want to merge it with:</p>
<pre><code class="hljs language-js"><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>env<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span>dev<span class="token punctuation">.</span>merge <span class="token operator">=</span> <span class="token string">'myConfig'</span><span class="token punctuation">;</span></code></pre>
<h3 id="myobjtopscopeoptional"><code>myObj.topScope</code>(optional)<a href="#myobjtopscopeoptional" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>[string]</code></p>
<p>The <code>topScope</code> property is where you write all the code needed by your configuration, like module imports and functions/variables declarations:</p>
<pre><code class="hljs language-js"><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>env<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span>dev<span class="token punctuation">.</span>topScope <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">'const webpack = require("webpack");'</span><span class="token punctuation">,</span>
  <span class="token string">'const path = require("path");'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre>
<h3 id="myobjconfignameoptional"><code>myObj.configName</code>(optional)<a href="#myobjconfignameoptional" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p><code>string</code></p>
<p><code>configName</code> allows you to customize the name of your configuration file. For example you can name it <code>webpack.base.js</code> instead of the default <code>webpack.config.js</code>:</p>
<pre><code class="hljs language-js"><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>env<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span>dev<span class="token punctuation">.</span>configName <span class="token operator">=</span> <span class="token string">'base'</span><span class="token punctuation">;</span></code></pre>
<h1 id="hot-module-replacement">Hot Module Replacement<a href="#hot-module-replacement" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<blockquote class="tip">
<p>This guide extends on code examples found in the <a href="/guides/development">Development</a> guide.</p>
</blockquote>
<p>Hot Module Replacement (or HMR) is one of the most useful features offered by webpack. It allows all kinds of modules to be updated at runtime without the need for a full refresh. This page focuses on <strong>implementation</strong> while the <a href="/concepts/hot-module-replacement">concepts page</a> gives more details on how it works and why it's useful.</p>
<blockquote class="warning">
<p><strong>HMR</strong> is not intended for use in production, meaning it should only be used in development. See the <a href="/guides/production">building for production guide</a> for more information.</p>
</blockquote>
<h2 id="enabling-hmr">Enabling HMR<a href="#enabling-hmr" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>This feature is great for productivity. All we need to do is update our <a href="https://github.com/webpack/webpack-dev-server">webpack-dev-server</a> configuration, and use webpack's built-in HMR plugin. We'll also remove the entry point for <code>print.js</code> as it will now be consumed by the <code>index.js</code> module.</p>
<blockquote class="tip">
<p>If you took the route of using <code>webpack-dev-middleware</code> instead of <code>webpack-dev-server</code>, please use the <a href="https://github.com/webpack-contrib/webpack-hot-middleware"><code>webpack-hot-middleware</code></a> package to enable HMR on your custom server or application.</p>
</blockquote>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');
  const HtmlWebpackPlugin = require('html-webpack-plugin');
  const { CleanWebpackPlugin } = require('clean-webpack-plugin');

  module.exports = {
    entry: {
       app: './src/index.js',
<span class="token deleted">-      print: './src/print.js',</span>
    },
    devtool: 'inline-source-map',
    devServer: {
      contentBase: './dist',
<span class="token inserted">+     hot: true,</span>
    },
    plugins: [
      // new CleanWebpackPlugin(['dist/*']) for &#x3C; v2 versions of CleanWebpackPlugin
      new CleanWebpackPlugin(),
      new HtmlWebpackPlugin({
        title: 'Hot Module Replacement',
      }),
    ],
    output: {
      filename: '[name].bundle.js',
      path: path.resolve(__dirname, 'dist'),
    },
  };</code></pre>
<blockquote class="tip">
<p>You can use the CLI to modify the <a href="https://github.com/webpack/webpack-dev-server">webpack-dev-server</a> configuration with the following command: <code>webpack-dev-server --hotOnly</code>.</p>
</blockquote>
<p>Now let's update the <code>index.js</code> file so that when a change inside <code>print.js</code> is detected we tell webpack to accept the updated module.</p>
<p><strong>index.js</strong></p>
<pre><code class="hljs language-diff">  import _ from 'lodash';
  import printMe from './print.js';

  function component() {
    const element = document.createElement('div');
    const btn = document.createElement('button');

    element.innerHTML = _.join(['Hello', 'webpack'], ' ');

    btn.innerHTML = 'Click me and check the console!';
    btn.onclick = printMe;

    element.appendChild(btn);

    return element;
  }

  document.body.appendChild(component());
<span class="token inserted">+</span>
<span class="token inserted">+ if (module.hot) {</span>
<span class="token inserted">+   module.hot.accept('./print.js', function() {</span>
<span class="token inserted">+     console.log('Accepting the updated printMe module!');</span>
<span class="token inserted">+     printMe();</span>
<span class="token inserted">+   })</span>
<span class="token inserted">+ }</span></code></pre>
<p>Start changing the <code>console.log</code> statement in <code>print.js</code>, and you should see the following output in the browser console (don't worry about that <code>button.onclick = printMe</code> output for now, we will also update that part later).</p>
<p><strong>print.js</strong></p>
<pre><code class="hljs language-diff">  export default function printMe() {
<span class="token deleted">-   console.log('I get called from print.js!');</span>
<span class="token inserted">+   console.log('Updating print.js...');</span>
  }</code></pre>
<p><strong>console</strong></p>
<pre><code class="hljs language-diff">[HMR] Waiting for update signal from WDS...
main.js:4395 [WDS] Hot Module Replacement enabled.
<span class="token inserted">+ 2main.js:4395 [WDS] App updated. Recompiling...</span>
<span class="token inserted">+ main.js:4395 [WDS] App hot update...</span>
<span class="token inserted">+ main.js:4330 [HMR] Checking for updates on the server...</span>
<span class="token inserted">+ main.js:10024 Accepting the updated printMe module!</span>
<span class="token inserted">+ 0.4b8ee77….hot-update.js:10 Updating print.js...</span>
<span class="token inserted">+ main.js:4330 [HMR] Updated modules:</span>
<span class="token inserted">+ main.js:4330 [HMR]  - 20</span></code></pre>
<h2 id="via-the-nodejs-api">Via the Node.js API<a href="#via-the-nodejs-api" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>When using Webpack Dev Server with the Node.js API, don't put the dev server options on the webpack config object. Instead, pass them as a second parameter upon creation. For example:</p>
<p><code>new WebpackDevServer(compiler, options)</code></p>
<p>To enable HMR, you also need to modify your webpack configuration object to include the HMR entry points. The <code>webpack-dev-server</code> package includes a method called <code>addDevServerEntrypoints</code> which you can use to do this. Here's a small example of how that might look:</p>
<p><strong>dev-server.js</strong></p>
<pre><code class="hljs language-javascript"><span class="token keyword">const</span> webpackDevServer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-dev-server'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.config.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
  contentBase<span class="token punctuation">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span>
  hot<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  host<span class="token punctuation">:</span> <span class="token string">'localhost'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

webpackDevServer<span class="token punctuation">.</span><span class="token function">addDevServerEntrypoints</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">webpackDevServer</span><span class="token punctuation">(</span>compiler<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">,</span> <span class="token string">'localhost'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'dev server listening on port 5000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<blockquote class="tip">
<p>If you're <a href="/guides/development/#using-webpack-dev-middleware">using <code>webpack-dev-middleware</code></a>, check out the <a href="https://github.com/webpack-contrib/webpack-hot-middleware"><code>webpack-hot-middleware</code></a> package to enable HMR on your custom dev server.</p>
</blockquote>
<h2 id="gotchas">Gotchas<a href="#gotchas" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Hot Module Replacement can be tricky. To show this, let's go back to our working example. If you go ahead and click the button on the example page, you will realize the console is printing the old <code>printMe</code> function.</p>
<p>This is happening because the button's <code>onclick</code> event handler is still bound to the original <code>printMe</code> function.</p>
<p>To make this work with HMR we need to update that binding to the new <code>printMe</code> function using <code>module.hot.accept</code>:</p>
<p><strong>index.js</strong></p>
<pre><code class="hljs language-diff">  import _ from 'lodash';
  import printMe from './print.js';

  function component() {
    const element = document.createElement('div');
    const btn = document.createElement('button');

    element.innerHTML = _.join(['Hello', 'webpack'], ' ');

    btn.innerHTML = 'Click me and check the console!';
    btn.onclick = printMe;  // onclick event is bind to the original printMe function

    element.appendChild(btn);

    return element;
  }

<span class="token deleted">- document.body.appendChild(component());</span>
<span class="token inserted">+ let element = component(); // Store the element to re-render on print.js changes</span>
<span class="token inserted">+ document.body.appendChild(element);</span>

  if (module.hot) {
    module.hot.accept('./print.js', function() {
      console.log('Accepting the updated printMe module!');
<span class="token deleted">-     printMe();</span>
<span class="token inserted">+     document.body.removeChild(element);</span>
<span class="token inserted">+     element = component(); // Re-render the "component" to update the click handler</span>
<span class="token inserted">+     document.body.appendChild(element);</span>
    })
  }</code></pre>
<p>This is just one example, but there are many others that can easily trip people up. Luckily, there are a lot of loaders out there (some of which are mentioned below) that will make hot module replacement much easier.</p>
<h2 id="hmr-with-stylesheets">HMR with Stylesheets<a href="#hmr-with-stylesheets" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Hot Module Replacement with CSS is actually fairly straightforward with the help of the <code>style-loader</code>. This loader uses <code>module.hot.accept</code> behind the scenes to patch <code>&#x3C;style></code> tags when CSS dependencies are updated.</p>
<p>First let's install both loaders with the following command:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev style-loader css-loader</code></pre>
<p>Now let's update the configuration file to make use of the loader.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');
  const HtmlWebpackPlugin = require('html-webpack-plugin');
  const { CleanWebpackPlugin } = require('clean-webpack-plugin');

  module.exports = {
    entry: {
      app: './src/index.js',
    },
    devtool: 'inline-source-map',
    devServer: {
      contentBase: './dist',
      hot: true,
    },
<span class="token inserted">+   module: {</span>
<span class="token inserted">+     rules: [</span>
<span class="token inserted">+       {</span>
<span class="token inserted">+         test: /\.css$/,</span>
<span class="token inserted">+         use: ['style-loader', 'css-loader'],</span>
<span class="token inserted">+       },</span>
<span class="token inserted">+     ],</span>
<span class="token inserted">+   },</span>
    plugins: [
      // new CleanWebpackPlugin(['dist/*']) for &#x3C; v2 versions of CleanWebpackPlugin
      new CleanWebpackPlugin(),
      new HtmlWebpackPlugin({
        title: 'Hot Module Replacement',
      }),
    ],
    output: {
      filename: '[name].bundle.js',
      path: path.resolve(__dirname, 'dist'),
    },
  };</code></pre>
<p>Hot loading stylesheets is as easy as importing them into a module:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">  webpack-demo
  | - package.json
  | - webpack.config.js
  | - /dist
    | - bundle.js
  | - /src
    | - index.js
    | - print.js
<span class="token inserted">+   | - styles.css</span></code></pre>
<p><strong>styles.css</strong></p>
<pre><code class="hljs language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p><strong>index.js</strong></p>
<pre><code class="hljs language-diff">  import _ from 'lodash';
  import printMe from './print.js';
<span class="token inserted">+ import './styles.css';</span>

  function component() {
    const element = document.createElement('div');
    const btn = document.createElement('button');

    element.innerHTML = _.join(['Hello', 'webpack'], ' ');

    btn.innerHTML = 'Click me and check the console!';
    btn.onclick = printMe;  // onclick event is bind to the original printMe function

    element.appendChild(btn);

    return element;
  }

  let element = component();
  document.body.appendChild(element);

  if (module.hot) {
    module.hot.accept('./print.js', function() {
      console.log('Accepting the updated printMe module!');
      document.body.removeChild(element);
      element = component(); // Re-render the "component" to update the click handler
      document.body.appendChild(element);
    })
  }</code></pre>
<p>Change the style on <code>body</code> to <code>background: red;</code> and you should immediately see the page's background color change without a full refresh.</p>
<p><strong>styles.css</strong></p>
<pre><code class="hljs language-diff">  body {
<span class="token deleted">-   background: blue;</span>
<span class="token inserted">+   background: red;</span>
  }</code></pre>
<h2 id="other-code-and-frameworks">Other Code and Frameworks<a href="#other-code-and-frameworks" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>There are many other loaders and examples out in the community to make HMR interact smoothly with a variety of frameworks and libraries...</p>
<ul>
<li><a href="https://github.com/gaearon/react-hot-loader">React Hot Loader</a>: Tweak react components in real time.</li>
<li><a href="https://github.com/vuejs/vue-loader">Vue Loader</a>: This loader supports HMR for vue components out of the box.</li>
<li><a href="https://github.com/klazuka/elm-hot-webpack-loader">Elm Hot webpack Loader</a>: Supports HMR for the Elm programming language.</li>
<li><a href="https://github.com/gdi2290/angular-hmr">Angular HMR</a>: No loader necessary! A simple change to your main NgModule file is all that's required to have full control over the HMR APIs.</li>
<li><a href="https://github.com/sveltejs/svelte-loader">Svelte Loader</a>: This loader supports HMR for Svelte components out of the box.</li>
</ul>
<blockquote class="tip">
<p>If you know of any other loaders or plugins that help with or enhance HMR, please submit a pull request to add them to this list!</p>
</blockquote>
<h1 id="tree-shaking">Tree Shaking<a href="#tree-shaking" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p><em>Tree shaking</em> is a term commonly used in the JavaScript context for dead-code elimination. It relies on the <a href="http://exploringjs.com/es6/ch_modules.html#static-module-structure">static structure</a> of ES2015 module syntax, i.e. <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import"><code>import</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export"><code>export</code></a>. The name and concept have been popularized by the ES2015 module bundler <a href="https://github.com/rollup/rollup">rollup</a>.</p>
<p>The webpack 2 release came with built-in support for ES2015 modules (alias <em>harmony modules</em>) as well as unused module export detection. The new webpack 4 release expands on this capability with a way to provide hints to the compiler via the <code>"sideEffects"</code> <code>package.json</code> property to denote which files in your project are "pure" and therefore safe to prune if unused.</p>
<blockquote class="tip">
<p>The remainder of this guide will stem from <a href="/guides/getting-started">Getting Started</a>. If you haven't read through that guide already, please do so now.</p>
</blockquote>
<h2 id="add-a-utility">Add a Utility<a href="#add-a-utility" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Let's add a new utility file to our project, <code>src/math.js</code>, that exports two functions:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">webpack-demo
|- package.json
|- webpack.config.js
|- /dist
  |- bundle.js
  |- index.html
|- /src
  |- index.js
<span class="token inserted">+ |- math.js</span>
|- /node_modules</code></pre>
<p><strong>src/math.js</strong></p>
<pre><code class="hljs language-javascript"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">square</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">cube</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">*</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Set the <code>mode</code> configuration option to <a href="/configuration/mode/#mode-development">development</a> to make sure that the bundle is not minified:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">const path = require('path');

module.exports = {
  entry: './src/index.js',
  output: {
    filename: 'bundle.js',
    path: path.resolve(__dirname, 'dist'),
  },
<span class="token inserted">+ mode: 'development',</span>
<span class="token inserted">+ optimization: {</span>
<span class="token inserted">+   usedExports: true,</span>
<span class="token inserted">+ },</span>
};</code></pre>
<p>With that in place, let's update our entry script to utilize one of these new methods and remove <code>lodash</code> for simplicity:</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token deleted">- import _ from 'lodash';</span>
<span class="token inserted">+ import { cube } from './math.js';</span>

  function component() {
<span class="token deleted">-   const element = document.createElement('div');</span>
<span class="token inserted">+   const element = document.createElement('pre');</span>

<span class="token deleted">-   // Lodash, now imported by this script</span>
<span class="token deleted">-   element.innerHTML = _.join(['Hello', 'webpack'], ' ');</span>
<span class="token inserted">+   element.innerHTML = [</span>
<span class="token inserted">+     'Hello webpack!',</span>
<span class="token inserted">+     '5 cubed is equal to ' + cube(5)</span>
<span class="token inserted">+   ].join('\n\n');</span>

    return element;
  }

  document.body.appendChild(component());</code></pre>
<p>Note that we <strong>did not <code>import</code> the <code>square</code> method</strong> from the <code>src/math.js</code> module. That function is what's known as "dead code", meaning an unused <code>export</code> that should be dropped. Now let's run our npm script, <code>npm run build</code>, and inspect the output bundle:</p>
<p><strong>dist/bundle.js (around lines 90 - 100)</strong></p>
<pre><code class="hljs language-js"><span class="token comment">/* 1 */</span>
<span class="token comment">/***/</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> __webpack_exports__<span class="token punctuation">,</span> __webpack_require__<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token string">'use strict'</span><span class="token punctuation">;</span>
  <span class="token comment">/* unused harmony export square */</span>
  <span class="token comment">/* harmony export (immutable) */</span> __webpack_exports__<span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">]</span> <span class="token operator">=</span> cube<span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">square</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">cube</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Note the <code>unused harmony export square</code> comment above. If you look at the code below it, you'll notice that <code>square</code> is not being imported, however, it is still included in the bundle. We'll fix that in the next section.</p>
<h2 id="mark-the-file-as-side-effect-free">Mark the file as side-effect-free<a href="#mark-the-file-as-side-effect-free" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>In a 100% ESM module world, identifying side effects is straightforward. However, we aren't there just yet, so in the mean time it's necessary to provide hints to webpack's compiler on the "pureness" of your code.</p>
<p>The way this is accomplished is the <code>"sideEffects"</code> package.json property.</p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"your-project"</span><span class="token punctuation">,</span>
  <span class="token property">"sideEffects"</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span></code></pre>
<p>All the code noted above does not contain side effects, so we can simply mark the property as <code>false</code> to inform webpack that it can safely prune unused exports.</p>
<blockquote class="tip">
<p>A "side effect" is defined as code that performs a special behavior when imported, other than exposing one or more exports. An example of this are polyfills, which affect the global scope and usually do not provide an export.</p>
</blockquote>
<p>If your code did have some side effects though, an array can be provided instead:</p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"your-project"</span><span class="token punctuation">,</span>
  <span class="token property">"sideEffects"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"./src/some-side-effectful-file.js"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre>
<p>The array accepts relative, absolute, and glob patterns to the relevant files. It uses <a href="https://github.com/micromatch/micromatch#matching-features">micromatch</a> under the hood.</p>
<blockquote class="tip">
<p>Note that any imported file is subject to tree shaking. This means if you use something like <code>css-loader</code> in your project and import a CSS file, it needs to be added to the side effect list so it will not be unintentionally dropped in production mode:</p>
</blockquote>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"your-project"</span><span class="token punctuation">,</span>
  <span class="token property">"sideEffects"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"./src/some-side-effectful-file.js"</span><span class="token punctuation">,</span>
    <span class="token string">"*.css"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre>
<p>Finally, <code>"sideEffects"</code> can also be set from the <a href="/configuration/module/#modulerules"><code>module.rules</code> configuration option</a>.</p>
<h2 id="clarifying-tree-shaking-and-sideeffects">Clarifying tree shaking and <code>sideEffects</code><a href="#clarifying-tree-shaking-and-sideeffects" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The <a href="/configuration/optimization/#optimizationsideeffects"><code>sideEffects</code></a> and <a href="/configuration/optimization/#optimizationusedexports"><code>usedExports</code></a> (more known as tree shaking) optimizations are two different things.</p>
<p><strong><code>sideEffects</code> is much more effective</strong> since it allows to skip whole modules/files and the complete subtree.</p>
<p><code>usedExports</code> relies on <a href="https://github.com/terser-js/terser">terser</a> to detect side effects in statements. It is a difficult task in JavaScript and not as effective as straighforward <code>sideEffects</code> flag. It also can't skip subtree/dependencies since the spec says that side effects need to be evaluated. While exporting function works fine, React's Higher Order Components (HOC) are problematic in this regard.</p>
<p>Let's make an example:</p>
<pre><code class="hljs language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@shopify/polaris'</span><span class="token punctuation">;</span></code></pre>
<p>The pre-bundled version looks like this:</p>
<pre><code class="hljs language-javascript"><span class="token keyword">import</span> hoistStatics <span class="token keyword">from</span> <span class="token string">'hoist-non-react-statics'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Button</span><span class="token punctuation">(</span>_ref<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> _final <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _len <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">,</span> objs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>_len<span class="token punctuation">)</span><span class="token punctuation">,</span> _key <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> _key <span class="token operator">&#x3C;</span> _len<span class="token punctuation">;</span> _key<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    objs<span class="token punctuation">[</span>_key<span class="token punctuation">]</span> <span class="token operator">=</span> arguments<span class="token punctuation">[</span>_key<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> _i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _objs <span class="token operator">=</span> objs<span class="token punctuation">;</span> _i <span class="token operator">&#x3C;</span> _objs<span class="token punctuation">.</span>length<span class="token punctuation">;</span> _i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> obj <span class="token operator">=</span> _objs<span class="token punctuation">[</span>_i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token function">mergeRecursively</span><span class="token punctuation">(</span>_final<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> _final<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">withAppProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">addProvider</span><span class="token punctuation">(</span>WrappedComponent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> WithProvider <span class="token operator">=</span>
    <span class="token comment">/*#__PURE__*/</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span>_React$Component<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
      <span class="token keyword">return</span> WithProvider<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span>Component<span class="token punctuation">)</span><span class="token punctuation">;</span>

    WithProvider<span class="token punctuation">.</span>contextTypes <span class="token operator">=</span> WrappedComponent<span class="token punctuation">.</span>contextTypes <span class="token operator">?</span> <span class="token function">merge</span><span class="token punctuation">(</span>WrappedComponent<span class="token punctuation">.</span>contextTypes<span class="token punctuation">,</span> polarisAppProviderContextTypes<span class="token punctuation">)</span> <span class="token punctuation">:</span> polarisAppProviderContextTypes<span class="token punctuation">;</span>
    <span class="token keyword">var</span> FinalComponent <span class="token operator">=</span> <span class="token function">hoistStatics</span><span class="token punctuation">(</span>WithProvider<span class="token punctuation">,</span> WrappedComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> FinalComponent<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> Button$<span class="token number">1</span> <span class="token operator">=</span> <span class="token function">withAppProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span>Button<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...,</span>
  Button$<span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>When <code>Button</code> is unused you can effectively remove the <code>export { Button$1 };</code> which leaves all the remaining code. So the question is "Does this code have any side effects or can it be safely removed?". Difficult to say, especially because of this line <code>withAppProvider()(Button)</code>. <code>withAppProvider</code> is called and the return value is also called. Are there any side effects when calling <code>merge</code> or <code>hoistStatics</code>? Are there side effects when assigning <code>WithProvider.contextTypes</code> (Setter?) or when reading <code>WrappedComponent.contextTypes</code> (Getter?).</p>
<p>Terser actually tries to figure it out, but it doesn't know for sure in many cases. This doesn't mean that terser is not doing its job well because it can't figure it out. It's just too difficult to determine it reliably in a dynamic language like JavaScript.</p>
<p>But we can help terser by using the <code>/*#__PURE__*/</code> annotation. It flags a statement as side effect free. So a simple change would make it possible to tree-shake the code:</p>
<p><code>var Button$1 = /*#__PURE__*/ withAppProvider()(Button);</code></p>
<p>This would allow to remove this piece of code. But there are still questions with the imports which need to be included/evaluated because they could contain side effects.</p>
<p>To tackle this, we use the <a href="/guides/tree-shaking/#mark-the-file-as-side-effect-free"><code>"sideEffects"</code></a> property in <code>package.json</code>.</p>
<p>It's similar to <code>/*#__PURE__*/</code> but on a module level instead of a statement level. It says (<code>"sideEffects"</code> property): "If no direct export from a module flagged with no-sideEffects is used, the bundler can skip evaluating the module for side effects.".</p>
<p>In the Shopify's Polaris example, original modules look like this:</p>
<p><strong>index.js</strong></p>
<pre><code class="hljs language-javascript"><span class="token keyword">import</span> <span class="token string">'./configure'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'./types'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'./components'</span><span class="token punctuation">;</span></code></pre>
<p><strong>components/index.js</strong></p>
<pre><code class="hljs language-javascript"><span class="token comment">// ...</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> <span class="token keyword">default</span> <span class="token keyword">as</span> Breadcrumbs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./Breadcrumbs'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> <span class="token keyword">default</span> <span class="token keyword">as</span> Button<span class="token punctuation">,</span> buttonFrom<span class="token punctuation">,</span> buttonsFrom<span class="token punctuation">,</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./Button'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> <span class="token keyword">default</span> <span class="token keyword">as</span> ButtonGroup <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./ButtonGroup'</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span></code></pre>
<p><strong>package.json</strong></p>
<pre><code class="hljs language-json">// ...
<span class="token property">"sideEffects"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token string">"**/*.css"</span><span class="token punctuation">,</span>
  <span class="token string">"**/*.scss"</span><span class="token punctuation">,</span>
  <span class="token string">"./esnext/index.js"</span><span class="token punctuation">,</span>
  <span class="token string">"./esnext/configure.js"</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
// ...</code></pre>
<p>For <code>import { Button } from "@shopify/polaris";</code> this has the following implications:</p>
<ul>
<li>include it: include the module, evaluate it and continue analysing dependencies</li>
<li>skip over: don't include it, don't evaluate it but continue analysing dependencies</li>
<li>exclude it: don't include it, don't evaluate it and don't analyse dependencies</li>
</ul>
<p>Specifically per matching resource(s):</p>
<ul>
<li><code>index.js</code>: No direct export is used, but flagged with sideEffects -> include it</li>
<li><code>configure.js</code>: No export is used, but flagged with sideEffects -> include it</li>
<li><code>types/index.js</code>: No export is used, not flagged with sideEffects -> exclude it</li>
<li><code>components/index.js</code>: No direct export is used, not flagged with sideEffects, but reexported exports are used -> skip over</li>
<li><code>components/Breadcrumbs.js</code>: No export is used, not flagged with sideEffects -> exclude it. This also excluded all dependencies like <code>components/Breadcrumbs.css</code> even if they are flagged with sideEffects.</li>
<li><code>components/Button.js</code>: Direct export is used, not flagged with sideEffects -> include it</li>
<li><code>components/Button.css</code>: No export is used, but flagged with sideEffects -> include it</li>
</ul>
<p>In this case only 4 modules are included into the bundle:</p>
<ul>
<li><code>index.js</code>: pretty much empty</li>
<li><code>configure.js</code></li>
<li><code>components/Button.js</code></li>
<li><code>components/Button.css</code></li>
</ul>
<p>After this optimization, other optimizations can still apply. For example: <code>buttonFrom</code> and <code>buttonsFrom</code> exports from <code>Button.js</code> are unused too. <code>usedExports</code> optimization will pick it up and terser may be able to drop some statements from the module.</p>
<p>Module Concatenation also applies. So that these 4 modules plus the entry module (and probably more dependencies) can be concatenated. <strong><code>index.js</code> has no code generated in the end</strong>.</p>
<h2 id="minify-the-output">Minify the Output<a href="#minify-the-output" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>So we've cued up our "dead code" to be dropped by using the <code>import</code> and <code>export</code> syntax, but we still need to drop it from the bundle. To do that, set the <code>mode</code> configuration option to <a href="/configuration/mode/#mode-production"><code>production</code></a>.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">const path = require('path');

module.exports = {
  entry: './src/index.js',
  output: {
    filename: 'bundle.js',
    path: path.resolve(__dirname, 'dist'),
  },
<span class="token deleted">- mode: 'development',</span>
<span class="token deleted">- optimization: {</span>
<span class="token deleted">-   usedExports: true,</span>
<span class="token deleted">- }</span>
<span class="token inserted">+ mode: 'production',</span>
};</code></pre>
<blockquote class="tip">
<p>Note that the <code>--optimize-minimize</code> flag can be used to enable <code>TerserPlugin</code> as well.</p>
</blockquote>
<p>With that squared away, we can run another <code>npm run build</code> and see if anything has changed.</p>
<p>Notice anything different about <code>dist/bundle.js</code>? Clearly the whole bundle is now minified and mangled, but, if you look carefully, you won't see the <code>square</code> function included but will see a mangled version of the <code>cube</code> function (<code>function r(e){return e*e*e}n.a=r</code>). With minification and tree shaking, our bundle is now a few bytes smaller! While that may not seem like much in this contrived example, tree shaking can yield a significant decrease in bundle size when working on larger applications with complex dependency trees.</p>
<blockquote class="tip">
<p><a href="/plugins/module-concatenation-plugin">ModuleConcatenationPlugin</a> is needed for the tree shaking to work. It is added by <code>mode: "production"</code>. If you are not using it, remember to add the <a href="/plugins/module-concatenation-plugin">ModuleConcatenationPlugin</a> manually.</p>
</blockquote>
<h2 id="conclusion-5">Conclusion<a href="#conclusion-5" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>So, what we've learned is that in order to take advantage of <em>tree shaking</em>, you must...</p>
<ul>
<li>Use ES2015 module syntax (i.e. <code>import</code> and <code>export</code>).</li>
<li>Ensure no compilers transform your ES2015 module syntax into CommonJS modules (this is the default behavior of the popular Babel preset @babel/preset-env - see the <a href="https://babeljs.io/docs/en/babel-preset-env#modules">documentation</a> for more details).</li>
<li>Add a <code>"sideEffects"</code> property to your project's <code>package.json</code> file.</li>
<li>Use the <a href="/configuration/mode/#mode-production"><code>production</code></a> <code>mode</code> configuration option to enable <a href="/configuration/mode/#usage">various optimizations</a> including minification and tree shaking.</li>
</ul>
<p>You can imagine your application as a tree. The source code and libraries you actually use represent the green, living leaves of the tree. Dead code represents the brown, dead leaves of the tree that are consumed by autumn. In order to get rid of the dead leaves, you have to shake the tree, causing them to fall.</p>
<p>If you are interested in more ways to optimize your output, please jump to the next guide for details on building for <a href="/guides/production">production</a>.</p>
<h1 id="production-1">Production<a href="#production-1" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>In this guide, we'll dive into some of the best practices and utilities for building a production site or application.</p>
<blockquote class="tip">
<p>This walkthrough stems from <a href="/guides/tree-shaking">Tree Shaking</a> and <a href="/guides/development">Development</a>. Please ensure you are familiar with the concepts/setup introduced in those guides before continuing on.</p>
</blockquote>
<h2 id="setup-1">Setup<a href="#setup-1" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The goals of <em>development</em> and <em>production</em> builds differ greatly. In <em>development</em>, we want strong source mapping and a localhost server with live reloading or hot module replacement. In <em>production</em>, our goals shift to a focus on minified bundles, lighter weight source maps, and optimized assets to improve load time. With this logical separation at hand, we typically recommend writing <strong>separate webpack configurations</strong> for each environment.</p>
<p>While we will separate the <em>production</em> and <em>development</em> specific bits out, note that we'll still maintain a "common" configuration to keep things DRY. In order to merge these configurations together, we'll use a utility called <a href="https://github.com/survivejs/webpack-merge"><code>webpack-merge</code></a>. With the "common" configuration in place, we won't have to duplicate code within the environment-specific configurations.</p>
<p>Let's start by installing <code>webpack-merge</code> and splitting out the bits we've already worked on in previous guides:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack-merge</code></pre>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">  webpack-demo
  |- package.json
<span class="token deleted">- |- webpack.config.js</span>
<span class="token inserted">+ |- webpack.common.js</span>
<span class="token inserted">+ |- webpack.dev.js</span>
<span class="token inserted">+ |- webpack.prod.js</span>
  |- /dist
  |- /src
    |- index.js
    |- math.js
  |- /node_modules</code></pre>
<p><strong>webpack.common.js</strong></p>
<pre><code class="hljs language-diff"><span class="token inserted">+ const path = require('path');</span>
<span class="token inserted">+ const { CleanWebpackPlugin } = require('clean-webpack-plugin');</span>
<span class="token inserted">+ const HtmlWebpackPlugin = require('html-webpack-plugin');</span>
<span class="token inserted">+</span>
<span class="token inserted">+ module.exports = {</span>
<span class="token inserted">+   entry: {</span>
<span class="token inserted">+     app: './src/index.js',</span>
<span class="token inserted">+   },</span>
<span class="token inserted">+   plugins: [</span>
<span class="token inserted">+     // new CleanWebpackPlugin(['dist/*']) for &#x3C; v2 versions of CleanWebpackPlugin</span>
<span class="token inserted">+     new CleanWebpackPlugin(),</span>
<span class="token inserted">+     new HtmlWebpackPlugin({</span>
<span class="token inserted">+       title: 'Production',</span>
<span class="token inserted">+     }),</span>
<span class="token inserted">+   ],</span>
<span class="token inserted">+   output: {</span>
<span class="token inserted">+     filename: '[name].bundle.js',</span>
<span class="token inserted">+     path: path.resolve(__dirname, 'dist'),</span>
<span class="token inserted">+   },</span>
<span class="token inserted">+ };</span></code></pre>
<p><strong>webpack.dev.js</strong></p>
<pre><code class="hljs language-diff"><span class="token inserted">+ const merge = require('webpack-merge');</span>
<span class="token inserted">+ const common = require('./webpack.common.js');</span>
<span class="token inserted">+</span>
<span class="token inserted">+ module.exports = merge(common, {</span>
<span class="token inserted">+   mode: 'development',</span>
<span class="token inserted">+   devtool: 'inline-source-map',</span>
<span class="token inserted">+   devServer: {</span>
<span class="token inserted">+     contentBase: './dist',</span>
<span class="token inserted">+   },</span>
<span class="token inserted">+ });</span></code></pre>
<p><strong>webpack.prod.js</strong></p>
<pre><code class="hljs language-diff"><span class="token inserted">+ const merge = require('webpack-merge');</span>
<span class="token inserted">+ const common = require('./webpack.common.js');</span>
<span class="token inserted">+</span>
<span class="token inserted">+ module.exports = merge(common, {</span>
<span class="token inserted">+   mode: 'production',</span>
<span class="token inserted">+ });</span></code></pre>
<p>In <code>webpack.common.js</code>, we now have setup our <code>entry</code> and <code>output</code> configuration and we've included any plugins that are required for both environments. In <code>webpack.dev.js</code>, we've set <code>mode</code> to <code>development</code>. Also, we've added the recommended <code>devtool</code> for that environment (strong source mapping), as well as our simple <code>devServer</code> configuration. Finally, in <code>webpack.prod.js</code>,<code>mode</code> is set to <code>production</code> which loads <code>TerserPlugin</code> which was first introduced by the <a href="/guides/tree-shaking">tree shaking</a> guide.</p>
<p>Note the use of <code>merge()</code> in the environment-specific configurations to easily include our common configuration in <code>dev</code> and <code>prod</code>. The <code>webpack-merge</code> tool offers a variety of advanced features for merging but for our use case we won't need any of that.</p>
<h2 id="npm-scripts-1">NPM Scripts<a href="#npm-scripts-1" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Now, let's modify our npm scripts to use the new configuration files. For the <code>start</code> script, which runs <code>webpack-dev-server</code>, we will use <code>webpack.dev.js</code>, and for the <code>build</code> script, which runs <code>webpack</code> to create a production build, we will use <code>webpack.prod.js</code>:</p>
<p><strong>package.json</strong></p>
<pre><code class="hljs language-diff">  {
    "name": "development",
    "version": "1.0.0",
    "description": "",
    "main": "src/index.js",
    "scripts": {
<span class="token deleted">-     "start": "webpack-dev-server --open",</span>
<span class="token inserted">+     "start": "webpack-dev-server --open --config webpack.dev.js",</span>
<span class="token deleted">-     "build": "webpack"</span>
<span class="token inserted">+     "build": "webpack --config webpack.prod.js"</span>
    },
    "keywords": [],
    "author": "",
    "license": "ISC",
    "devDependencies": {
      "clean-webpack-plugin": "^0.1.17",
      "css-loader": "^0.28.4",
      "csv-loader": "^2.1.1",
      "express": "^4.15.3",
      "file-loader": "^0.11.2",
      "html-webpack-plugin": "^2.29.0",
      "style-loader": "^0.18.2",
      "webpack": "^4.30.0",
      "webpack-dev-middleware": "^1.12.0",
      "webpack-dev-server": "^2.9.1",
      "webpack-merge": "^4.1.0",
      "xml-loader": "^1.2.1"
    }
  }</code></pre>
<p>Feel free to run those scripts and see how the output changes as we continue adding to our <em>production</em> configuration.</p>
<h2 id="specify-the-mode">Specify the Mode<a href="#specify-the-mode" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Many libraries will key off the <code>process.env.NODE_ENV</code> variable to determine what should be included in the library. For example, when not in <em>production</em> some libraries may add additional logging and testing to make debugging easier. However, with <code>process.env.NODE_ENV === 'production'</code> they might drop or add significant portions of code to optimize how things run for your actual users. Since webpack v4, specifying <a href="/configuration/mode/"><code>mode</code></a> automatically configures <a href="/plugins/define-plugin"><code>DefinePlugin</code></a> for you:</p>
<p><strong>webpack.prod.js</strong></p>
<pre><code class="hljs language-diff">  const merge = require('webpack-merge');
  const common = require('./webpack.common.js');

  module.exports = merge(common, {
    mode: 'production',
  });</code></pre>
<blockquote class="tip">
<p>Technically, <code>NODE_ENV</code> is a system environment variable that Node.js exposes into running scripts. It is used by convention to determine dev-vs-prod behavior by server tools, build scripts, and client-side libraries. Contrary to expectations, <code>process.env.NODE_ENV</code> is not set to <code>"production"</code> <strong>within</strong> the build script <code>webpack.config.js</code>, see <a href="https://github.com/webpack/webpack/issues/2537">#2537</a>. Thus, conditionals like <code>process.env.NODE_ENV === 'production' ? '[name].[hash].bundle.js' : '[name].bundle.js'</code> within webpack configurations do not work as expected.</p>
</blockquote>
<p>If you're using a library like <a href="https://reactjs.org/"><code>react</code></a>, you should actually see a significant drop in bundle size after adding this plugin. Also, note that any of our local <code>/src</code> code can key off of this as well, so the following check would be valid:</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff">  import { cube } from './math.js';
<span class="token inserted">+</span>
<span class="token inserted">+ if (process.env.NODE_ENV !== 'production') {</span>
<span class="token inserted">+   console.log('Looks like we are in development mode!');</span>
<span class="token inserted">+ }</span>

  function component() {
    const element = document.createElement('pre');

    element.innerHTML = [
      'Hello webpack!',
      '5 cubed is equal to ' + cube(5)
    ].join('\n\n');

    return element;
  }

  document.body.appendChild(component());</code></pre>
<h2 id="minification">Minification<a href="#minification" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>webpack v4+ will minify your code by default in <a href="/configuration/mode/#mode-production"><code>production mode</code></a>.</p>
<p>Note that while the <a href="/plugins/terser-webpack-plugin"><code>TerserPlugin</code></a> is a great place to start for minification and being used by default, there are other options out there. Here are a few more popular ones:</p>
<ul>
<li><a href="https://github.com/webpack-contrib/babel-minify-webpack-plugin"><code>BabelMinifyWebpackPlugin</code></a></li>
<li><a href="https://github.com/webpack-contrib/closure-webpack-plugin"><code>ClosureWebpackPlugin</code></a></li>
</ul>
<p>If you decide to try another minification plugin, just make sure your new choice also drops dead code as described in the <a href="/guides/tree-shaking">tree shaking</a> guide and provide it as the <a href="/configuration/optimization/#optimizationminimizer"><code>optimization.minimizer</code></a>.</p>
<h2 id="source-mapping">Source Mapping<a href="#source-mapping" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>We encourage you to have source maps enabled in production, as they are useful for debugging as well as running benchmark tests. That said, you should choose one with a fairly quick build speed that's recommended for production use (see <a href="/configuration/devtool"><code>devtool</code></a>). For this guide, we'll use the <code>source-map</code> option in the <em>production</em> as opposed to the <code>inline-source-map</code> we used in the <em>development</em>:</p>
<p><strong>webpack.prod.js</strong></p>
<pre><code class="hljs language-diff">  const merge = require('webpack-merge');
  const common = require('./webpack.common.js');

  module.exports = merge(common, {
    mode: 'production',
<span class="token inserted">+   devtool: 'source-map',</span>
  });</code></pre>
<blockquote class="tip">
<p>Avoid <code>inline-***</code> and <code>eval-***</code> use in production as they can increase bundle size and reduce the overall performance.</p>
</blockquote>
<h2 id="minimize-css">Minimize CSS<a href="#minimize-css" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>It is crucial to minimize your CSS for production. Please see the <a href="/plugins/mini-css-extract-plugin/#minimizing-for-production">Minimizing for Production</a> section.</p>
<h2 id="cli-alternatives">CLI Alternatives<a href="#cli-alternatives" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Some of what has been described above can also be achieved by using the command line. For example, the <code>--optimize-minimize</code> flag will include the <code>TerserPlugin</code> behind the scenes. The <code>--define process.env.NODE_ENV="'production'"</code> will do the same for the <code>DefinePlugin</code> instance described above. And, <code>webpack -p</code> will automatically invoke both those flags and thus the plugins to be included.</p>
<p>While these shorthand methods are nice, we usually recommend just using the configuration as it's better to understand exactly what is being done for you in both cases. The configuration also gives you more control on fine-tuning other options within both plugins.</p>
<h1 id="lazy-loading">Lazy Loading<a href="#lazy-loading" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<blockquote class="tip">
<p>This guide is a small follow-up to <a href="/guides/code-splitting">Code Splitting</a>. If you have not yet read through that guide, please do so now.</p>
</blockquote>
<p>Lazy, or "on demand", loading is a great way to optimize your site or application. This practice essentially involves splitting your code at logical breakpoints, and then loading it once the user has done something that requires, or will require, a new block of code. This speeds up the initial load of the application and lightens its overall weight as some blocks may never even be loaded.</p>
<h2 id="example">Example<a href="#example" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Let's take the example from <a href="/guides/code-splitting/#dynamic-imports">Code Splitting</a> and tweak it a bit to demonstrate this concept even more. The code there does cause a separate chunk, <code>lodash.bundle.js</code>, to be generated and technically "lazy-loads" it as soon as the script is run. The trouble is that no user interaction is required to load the bundle -- meaning that every time the page is loaded, the request will fire. This doesn't help us too much and will impact performance negatively.</p>
<p>Let's try something different. We'll add an interaction to log some text to the console when the user clicks a button. However, we'll wait to load that code (<code>print.js</code>) until the interaction occurs for the first time. To do this we'll go back and rework the <a href="/guides/code-splitting/#dynamic-imports">final <em>Dynamic Imports</em> example</a> from <em>Code Splitting</em> and leave <code>lodash</code> in the main chunk.</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">webpack-demo
|- package.json
|- webpack.config.js
|- /dist
|- /src
  |- index.js
<span class="token inserted">+ |- print.js</span>
|- /node_modules</code></pre>
<p><strong>src/print.js</strong></p>
<pre><code class="hljs language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The print.js module has loaded! See the network tab in dev tools...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Button Clicked: Here\'s "some text"!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token inserted">+ import _ from 'lodash';</span>
<span class="token inserted">+</span>
<span class="token deleted">- async function getComponent() {</span>
<span class="token inserted">+ function component() {</span>
    const element = document.createElement('div');
<span class="token deleted">-   const _ = await import(/* webpackChunkName: "lodash" */ 'lodash');</span>
<span class="token inserted">+   const button = document.createElement('button');</span>
<span class="token inserted">+   const br = document.createElement('br');</span>

<span class="token inserted">+   button.innerHTML = 'Click me and look at the console!';</span>
    element.innerHTML = _.join(['Hello', 'webpack'], ' ');
<span class="token inserted">+   element.appendChild(br);</span>
<span class="token inserted">+   element.appendChild(button);</span>
<span class="token inserted">+</span>
<span class="token inserted">+   // Note that because a network request is involved, some indication</span>
<span class="token inserted">+   // of loading would need to be shown in a production-level site/app.</span>
<span class="token inserted">+   button.onclick = e => import(/* webpackChunkName: "print" */ './print').then(module => {</span>
<span class="token inserted">+     const print = module.default;</span>
<span class="token inserted">+</span>
<span class="token inserted">+     print();</span>
<span class="token inserted">+   });</span>

    return element;
  }

<span class="token deleted">- getComponent().then(component => {</span>
<span class="token deleted">-   document.body.appendChild(component);</span>
<span class="token deleted">- });</span>
<span class="token inserted">+ document.body.appendChild(component());</span></code></pre>
<blockquote class="warning">
<p>Note that when using <code>import()</code> on ES6 modules you must reference the <code>.default</code> property as it's the actual <code>module</code> object that will be returned when the promise is resolved.</p>
</blockquote>
<p>Now let's run webpack and check out our new lazy-loading functionality:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
          Asset       Size  Chunks                    Chunk Names
print.bundle.js  417 bytes       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>         print
index.bundle.js     548 kB       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  index
     index.html  189 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.</code></pre>
<h2 id="frameworks">Frameworks<a href="#frameworks" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Many frameworks and libraries have their own recommendations on how this should be accomplished within their methodologies. Here are a few examples:</p>
<ul>
<li>React: <a href="https://reacttraining.com/react-router/web/guides/code-splitting">Code Splitting and Lazy Loading</a></li>
<li>Vue: <a href="https://alexjoverm.github.io/2017/07/16/Lazy-load-in-Vue-using-Webpack-s-code-splitting/">Lazy Load in Vue using Webpack's code splitting</a></li>
<li>Angular: <a href="https://angular.io/guide/router#milestone-6-asynchronous-routing">Lazy Loading route configuration</a></li>
<li>AngularJS: <a href="https://medium.com/@var_bin/angularjs-webpack-lazyload-bb7977f390dd">AngularJS + Webpack = lazyLoad</a> by <a href="https://twitter.com/var_bincom">@var_bincom</a></li>
</ul>
<h1 id="shimming">Shimming<a href="#shimming" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>The <code>webpack</code> compiler can understand modules written as ES2015 modules, CommonJS or AMD. However, some third party libraries may expect global dependencies (e.g. <code>$</code> for <code>jQuery</code>). The libraries might also create globals which need to be exported. These "broken modules" are one instance where <em>shimming</em> comes into play.</p>
<blockquote class="warning">
<p><strong>We don't recommend using globals!</strong> The whole concept behind webpack is to allow more modular front-end development. This means writing isolated modules that are well contained and do not rely on hidden dependencies (e.g. globals). Please use these features only when necessary.</p>
</blockquote>
<p>Another instance where <em>shimming</em> can be useful is when you want to <a href="https://en.wikipedia.org/wiki/Polyfill_%28programming%29">polyfill</a> browser functionality to support more users. In this case, you may only want to deliver those polyfills to the browsers that need patching (i.e. load them on demand).</p>
<p>The following article will walk through both of these use cases.</p>
<blockquote class="tip">
<p>For simplicity, this guide stems from the examples in <a href="/guides/getting-started">Getting Started</a>. Please make sure you are familiar with the setup there before moving on.</p>
</blockquote>
<h2 id="shimming-globals">Shimming Globals<a href="#shimming-globals" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Let's start with the first use case of shimming global variables. Before we do anything let's take another look at our project:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">webpack-demo
|- package.json
|- webpack.config.js
|- /dist
|- /src
  |- index.js
|- /node_modules</code></pre>
<p>Remember that <code>lodash</code> package we were using? For demonstration purposes, let's say we wanted to instead provide this as a global throughout our application. To do this, we can use <code>ProvidePlugin</code>.</p>
<p>The <a href="/plugins/provide-plugin"><code>ProvidePlugin</code></a> makes a package available as a variable in every module compiled through webpack. If webpack sees that variable used, it will include the given package in the final bundle. Let's go ahead by removing the <code>import</code> statement for <code>lodash</code> and instead provide it via the plugin:</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token deleted">- import _ from 'lodash';</span>
<span class="token deleted">-</span>
  function component() {
    const element = document.createElement('div');

<span class="token deleted">-   // Lodash, now imported by this script</span>
    element.innerHTML = _.join(['Hello', 'webpack'], ' ');

    return element;
  }

  document.body.appendChild(component());</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');
<span class="token inserted">+ const webpack = require('webpack');</span>

  module.exports = {
    entry: './src/index.js',
    output: {
      filename: 'bundle.js',
      path: path.resolve(__dirname, 'dist'),
    },
<span class="token inserted">+   plugins: [</span>
<span class="token inserted">+     new webpack.ProvidePlugin({</span>
<span class="token inserted">+       _: 'lodash',</span>
<span class="token inserted">+     }),</span>
<span class="token inserted">+   ],</span>
  };</code></pre>
<p>What we've essentially done here is tell webpack...</p>
<blockquote>
<p>If you encounter at least one instance of the variable <code>_</code>, include the <code>lodash</code> package and provide it to the modules that need it.</p>
</blockquote>
<p>If we run a build, we should still see the same output:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
    Asset    Size  Chunks                    Chunk Names
bundle.js  544 kB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  main
<span class="token punctuation">..</span>.</code></pre>
<p>We can also use the <code>ProvidePlugin</code> to expose a single export of a module by configuring it with an "array path" (e.g. <code>[module, child, ...children?]</code>). So let's imagine we only wanted to provide the <code>join</code> method from <code>lodash</code> wherever it's invoked:</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff">  function component() {
    const element = document.createElement('div');

<span class="token deleted">-   element.innerHTML = _.join(['Hello', 'webpack'], ' ');</span>
<span class="token inserted">+   element.innerHTML = join(['Hello', 'webpack'], ' ');</span>

    return element;
  }

  document.body.appendChild(component());</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');
  const webpack = require('webpack');

  module.exports = {
    entry: './src/index.js',
    output: {
      filename: 'bundle.js',
      path: path.resolve(__dirname, 'dist'),
    },
    plugins: [
      new webpack.ProvidePlugin({
<span class="token deleted">-       _: 'lodash',</span>
<span class="token inserted">+       join: ['lodash', 'join'],</span>
      }),
    ],
  };</code></pre>
<p>This would go nicely with <a href="/guides/tree-shaking">Tree Shaking</a> as the rest of the <code>lodash</code> library should get dropped.</p>
<h2 id="granular-shimming">Granular Shimming<a href="#granular-shimming" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Some legacy modules rely on <code>this</code> being the <code>window</code> object. Let's update our <code>index.js</code> so this is the case:</p>
<pre><code class="hljs language-diff">  function component() {
    const element = document.createElement('div');

    element.innerHTML = join(['Hello', 'webpack'], ' ');
<span class="token inserted">+</span>
<span class="token inserted">+   // Assume we are in the context of `window`</span>
<span class="token inserted">+   this.alert('Hmmm, this probably isn\'t a great idea...')</span>

    return element;
  }

  document.body.appendChild(component());</code></pre>
<p>This becomes a problem when the module is executed in a CommonJS context where <code>this</code> is equal to <code>module.exports</code>. In this case you can override <code>this</code> using the <a href="/loaders/imports-loader/"><code>imports-loader</code></a>:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');
  const webpack = require('webpack');

  module.exports = {
    entry: './src/index.js',
    output: {
      filename: 'bundle.js',
      path: path.resolve(__dirname, 'dist'),
    },
<span class="token inserted">+   module: {</span>
<span class="token inserted">+     rules: [</span>
<span class="token inserted">+       {</span>
<span class="token inserted">+         test: require.resolve('index.js'),</span>
<span class="token inserted">+         use: 'imports-loader?this=>window',</span>
<span class="token inserted">+       },</span>
<span class="token inserted">+     ],</span>
<span class="token inserted">+   },</span>
    plugins: [
      new webpack.ProvidePlugin({
        join: ['lodash', 'join'],
      }),
    ],
  };</code></pre>
<h2 id="global-exports">Global Exports<a href="#global-exports" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Let's say a library creates a global variable that it expects its consumers to use. We can add a small module to our setup to demonstrate this:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">  webpack-demo
  |- package.json
  |- webpack.config.js
  |- /dist
  |- /src
    |- index.js
<span class="token inserted">+   |- globals.js</span>
  |- /node_modules</code></pre>
<p><strong>src/globals.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> file <span class="token operator">=</span> <span class="token string">'blah.txt'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> helpers <span class="token operator">=</span> <span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'test something'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  parse<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'parse something'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>Now, while you'd likely never do this in your own source code, you may encounter a dated library you'd like to use that contains similar code to what's shown above. In this case, we can use <a href="/loaders/exports-loader/"><code>exports-loader</code></a>, to export that global variable as a normal module export. For instance, in order to export <code>file</code> as <code>file</code> and <code>helpers.parse</code> as <code>parse</code>:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');
  const webpack = require('webpack');

  module.exports = {
    entry: './src/index.js',
    output: {
      filename: 'bundle.js',
      path: path.resolve(__dirname, 'dist'),
    },
    module: {
      rules: [
        {
          test: require.resolve('index.js'),
          use: 'imports-loader?this=>window',
        },
<span class="token inserted">+       {</span>
<span class="token inserted">+         test: require.resolve('globals.js'),</span>
<span class="token inserted">+         use: 'exports-loader?file,parse=helpers.parse',</span>
<span class="token inserted">+       },</span>
      ],
    },
    plugins: [
      new webpack.ProvidePlugin({
        join: ['lodash', 'join'],
      }),
    ],
  };</code></pre>
<p>Now from within our entry script (i.e. <code>src/index.js</code>), we could <code>import { file, parse } from './globals.js';</code> and all should work smoothly.</p>
<h2 id="loading-polyfills">Loading Polyfills<a href="#loading-polyfills" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Almost everything we've discussed thus far has been in relation to handling legacy packages. Let's move on to our second topic: <strong>polyfills</strong>.</p>
<p>There's a lot of ways to load polyfills. For example, to include the <a href="https://babeljs.io/docs/en/babel-polyfill/"><code>babel-polyfill</code></a> we might simply:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save babel-polyfill</code></pre>
<p>and <code>import</code> it so as to include it in our main bundle:</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token inserted">+ import 'babel-polyfill';</span>
<span class="token inserted">+</span>
  function component() {
    const element = document.createElement('div');

    element.innerHTML = join(['Hello', 'webpack'], ' ');

    return element;
  }

  document.body.appendChild(component());</code></pre>
<blockquote class="tip">
<p>Note that we aren't binding the <code>import</code> to a variable. This is because polyfills simply run on their own, prior to the rest of the code base, allowing us to then assume certain native functionality exists.</p>
</blockquote>
<p>Note that this approach prioritizes correctness over bundle size. To be safe and robust, polyfills/shims must run <strong>before all other code</strong>, and thus either need to load synchronously, or, all app code needs to load after all polyfills/shims load.
There are many misconceptions in the community, as well, that modern browsers "don't need" polyfills, or that polyfills/shims merely serve to add missing features - in fact, they often <em>repair broken implementations</em>, even in the most modern of browsers.
The best practice thus remains to unconditionally and synchronously load all polyfills/shims, despite the bundle size cost this incurs.</p>
<p>If you feel that you have mitigated these concerns and wish to incur the risk of brokenness, here's one way you might do it:
Let's move our <code>import</code> to a new file and add the <a href="https://github.com/github/fetch"><code>whatwg-fetch</code></a> polyfill:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save whatwg-fetch</code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff"><span class="token deleted">- import 'babel-polyfill';</span>
<span class="token deleted">-</span>
  function component() {
    const element = document.createElement('div');

    element.innerHTML = join(['Hello', 'webpack'], ' ');

    return element;
  }

  document.body.appendChild(component());</code></pre>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">  webpack-demo
  |- package.json
  |- webpack.config.js
  |- /dist
  |- /src
    |- index.js
    |- globals.js
<span class="token inserted">+   |- polyfills.js</span>
  |- /node_modules</code></pre>
<p><strong>src/polyfills.js</strong></p>
<pre><code class="hljs language-javascript"><span class="token keyword">import</span> <span class="token string">'babel-polyfill'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'whatwg-fetch'</span><span class="token punctuation">;</span></code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');
  const webpack = require('webpack');

  module.exports = {
<span class="token deleted">-   entry: './src/index.js',</span>
<span class="token inserted">+   entry: {</span>
<span class="token inserted">+     polyfills: './src/polyfills.js',</span>
<span class="token inserted">+     index: './src/index.js',</span>
<span class="token inserted">+   },</span>
    output: {
<span class="token deleted">-     filename: 'bundle.js',</span>
<span class="token inserted">+     filename: '[name].bundle.js',</span>
      path: path.resolve(__dirname, 'dist'),
    },
    module: {
      rules: [
        {
          test: require.resolve('index.js'),
          use: 'imports-loader?this=>window',
        },
        {
          test: require.resolve('globals.js'),
          use: 'exports-loader?file,parse=helpers.parse',
        },
      ],
    },
    plugins: [
      new webpack.ProvidePlugin({
        join: ['lodash', 'join'],
      }),
    ],
  };</code></pre>
<p>With that in place, we can add the logic to conditionally load our new <code>polyfills.bundle.js</code> file. How you make this decision depends on the technologies and browsers you need to support. We'll just do some simple testing to determine whether our polyfills are needed:</p>
<p><strong>dist/index.html</strong></p>
<pre><code class="hljs language-diff">  &#x3C;!doctype html>
  &#x3C;html>
    &#x3C;head>
      &#x3C;title>Getting Started&#x3C;/title>
<span class="token inserted">+     &#x3C;script></span>
<span class="token inserted">+       const modernBrowser = (</span>
<span class="token inserted">+         'fetch' in window &#x26;&#x26;</span>
<span class="token inserted">+         'assign' in Object</span>
<span class="token inserted">+       );</span>
<span class="token inserted">+</span>
<span class="token inserted">+       if ( !modernBrowser ) {</span>
<span class="token inserted">+         const scriptElement = document.createElement('script');</span>
<span class="token inserted">+</span>
<span class="token inserted">+         scriptElement.async = false;</span>
<span class="token inserted">+         scriptElement.src = '/polyfills.bundle.js';</span>
<span class="token inserted">+         document.head.appendChild(scriptElement);</span>
<span class="token inserted">+       }</span>
<span class="token inserted">+     &#x3C;/script></span>
    &#x3C;/head>
    &#x3C;body>
      &#x3C;script src="index.bundle.js">&#x3C;/script>
    &#x3C;/body>
  &#x3C;/html></code></pre>
<p>Now we can <code>fetch</code> some data within our entry script:</p>
<p><strong>src/index.js</strong></p>
<pre><code class="hljs language-diff">  function component() {
    const element = document.createElement('div');

    element.innerHTML = join(['Hello', 'webpack'], ' ');

    return element;
  }

  document.body.appendChild(component());
<span class="token inserted">+</span>
<span class="token inserted">+ fetch('https://jsonplaceholder.typicode.com/users')</span>
<span class="token inserted">+   .then(response => response.json())</span>
<span class="token inserted">+   .then(json => {</span>
<span class="token inserted">+     console.log('We retrieved some data! AND we\'re confident it will work on a variety of browser distributions.')</span>
<span class="token inserted">+     console.log(json)</span>
<span class="token inserted">+   })</span>
<span class="token inserted">+   .catch(error => console.error('Something went wrong when fetching this data: ', error))</span></code></pre>
<p>If we run our build, another <code>polyfills.bundle.js</code> file will be emitted and everything should still run smoothly in the browser. Note that this set up could likely be improved upon but it should give you a good idea of how you can provide polyfills only to the users that actually need them.</p>
<h2 id="further-optimizations">Further Optimizations<a href="#further-optimizations" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The <code>babel-preset-env</code> package uses <a href="https://github.com/browserslist/browserslist">browserslist</a> to transpile only what is not supported in your browsers matrix. This preset comes with the <a href="https://babeljs.io/docs/en/babel-preset-env#usebuiltins"><code>useBuiltIns</code></a> option, <code>false</code> by default, which converts your global <code>babel-polyfill</code> import to a more granular feature by feature <code>import</code> pattern:</p>
<pre><code class="hljs language-js"><span class="token keyword">import</span> <span class="token string">'core-js/modules/es7.string.pad-start'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'core-js/modules/es7.string.pad-end'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'core-js/modules/web.timers'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'core-js/modules/web.immediate'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'core-js/modules/web.dom.iterable'</span><span class="token punctuation">;</span></code></pre>
<p>See <a href="https://babeljs.io/docs/en/babel-preset-env">the babel-preset-env documentation</a> for more information.</p>
<h2 id="node-built-ins">Node Built-Ins<a href="#node-built-ins" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Node built-ins, like <code>process</code>, can be polyfilled right directly from your configuration file without the use of any special loaders or plugins. See the <a href="/configuration/node">node configuration page</a> for more information and examples.</p>
<h2 id="other-utilities">Other Utilities<a href="#other-utilities" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>There are a few other tools that can help when dealing with legacy modules.</p>
<p>The <a href="/loaders/script-loader/"><code>script-loader</code></a> evaluates code in the global context, similar to inclusion via a <code>script</code> tag. In this mode, every normal library should work. <code>require</code>, <code>module</code>, etc. are undefined.</p>
<blockquote class="warning">
<p>When using the <code>script-loader</code>, the module is added as a string to the bundle. It is not minimized by <code>webpack</code>, so use a minimized version. There is also no <code>devtool</code> support for libraries added by this loader.</p>
</blockquote>
<p>When there is no AMD/CommonJS version of the module and you want to include the <code>dist</code>, you can flag this module in <a href="/configuration/module/#modulenoparse"><code>noParse</code></a>. This will cause webpack to include the module without parsing it or resolving <code>require()</code> and <code>import</code> statements. This practice is also used to improve the build performance.</p>
<blockquote class="warning">
<p>Any feature requiring the AST, like the <code>ProvidePlugin</code>, will not work.</p>
</blockquote>
<p>Lastly, there are some modules that support multiple <a href="/concepts/modules">module styles</a>; e.g. a combination of AMD, CommonJS, and legacy. In most of these cases, they first check for <code>define</code> and then use some quirky code to export properties. In these cases, it could help to force the CommonJS path by setting <code>define=>false</code> via the <a href="/loaders/imports-loader/"><code>imports-loader</code></a>.</p>
<h1 id="typescript-1">TypeScript<a href="#typescript-1" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<blockquote class="tip">
<p>This guide stems from the <a href="/guides/getting-started/"><em>Getting Started</em></a> guide.</p>
</blockquote>
<p><a href="https://www.typescriptlang.org">TypeScript</a> is a typed superset of JavaScript that compiles to plain JavaScript. In this guide we will learn how to integrate TypeScript with webpack.</p>
<h2 id="basic-setup-1">Basic Setup<a href="#basic-setup-1" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>First install the TypeScript compiler and loader by running:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev typescript ts-loader</code></pre>
<p>Now we'll modify the directory structure &#x26; the configuration files:</p>
<p><strong>project</strong></p>
<pre><code class="hljs language-diff">  webpack-demo
  |- package.json
<span class="token inserted">+ |- tsconfig.json</span>
  |- webpack.config.js
  |- /dist
    |- bundle.js
    |- index.html
  |- /src
    |- index.js
<span class="token inserted">+   |- index.ts</span>
  |- /node_modules</code></pre>
<p><strong>tsconfig.json</strong></p>
<p>Let's set up a simple configuration to support JSX and compile TypeScript down to ES5...</p>
<pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"outDir"</span><span class="token operator">:</span> <span class="token string">"./dist/"</span><span class="token punctuation">,</span>
    <span class="token property">"noImplicitAny"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"es6"</span><span class="token punctuation">,</span>
    <span class="token property">"target"</span><span class="token operator">:</span> <span class="token string">"es5"</span><span class="token punctuation">,</span>
    <span class="token property">"jsx"</span><span class="token operator">:</span> <span class="token string">"react"</span><span class="token punctuation">,</span>
    <span class="token property">"allowJs"</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>See <a href="https://www.typescriptlang.org/docs/handbook/tsconfig-json.html">TypeScript's documentation</a> to learn more about <code>tsconfig.json</code> configuration options.</p>
<p>To learn more about webpack configuration, see the <a href="/concepts/configuration/">configuration concepts</a>.</p>
<p>Now let's configure webpack to handle TypeScript:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./src/index.ts'</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.tsx?$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token string">'ts-loader'</span><span class="token punctuation">,</span>
        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    extensions<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">'.tsx'</span><span class="token punctuation">,</span> <span class="token string">'.ts'</span><span class="token punctuation">,</span> <span class="token string">'.js'</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>This will direct webpack to <em>enter</em> through <code>./index.ts</code>, <em>load</em> all <code>.ts</code> and <code>.tsx</code> files through the <code>ts-loader</code>, and <em>output</em> a <code>bundle.js</code> file in our current directory.</p>
<h2 id="loader">Loader<a href="#loader" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p><a href="https://github.com/TypeStrong/ts-loader"><code>ts-loader</code></a></p>
<p>We use <code>ts-loader</code> in this guide as it makes enabling additional webpack features, such as importing other web assets, a bit easier.</p>
<h2 id="source-maps-1">Source Maps<a href="#source-maps-1" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>To learn more about source maps, see the <a href="/guides/development">development guide</a>.</p>
<p>To enable source maps, we must configure TypeScript to output inline source maps to our compiled JavaScript files. The following line must be added to our TypeScript configuration:</p>
<p><strong>tsconfig.json</strong></p>
<pre><code class="hljs language-diff">  {
    "compilerOptions": {
      "outDir": "./dist/",
<span class="token inserted">+     "sourceMap": true,</span>
      "noImplicitAny": true,
      "module": "commonjs",
      "target": "es5",
      "jsx": "react",
      "allowJs": true
    }
  }</code></pre>
<p>Now we need to tell webpack to extract these source maps and include in our final bundle:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');

  module.exports = {
    entry: './src/index.ts',
<span class="token inserted">+   devtool: 'inline-source-map',</span>
    module: {
      rules: [
        {
          test: /\.tsx?$/,
          use: 'ts-loader',
          exclude: /node_modules/,
        },
      ],
    },
    resolve: {
      extensions: [ '.tsx', '.ts', '.js' ],
    },
    output: {
      filename: 'bundle.js',
      path: path.resolve(__dirname, 'dist'),
    },
  };</code></pre>
<p>See the <a href="/configuration/devtool/">devtool documentation</a> for more information.</p>
<h2 id="using-third-party-libraries">Using Third Party Libraries<a href="#using-third-party-libraries" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>When installing third party libraries from npm, it is important to remember to install the typing definition for that library. These definitions can be found at <a href="https://microsoft.github.io/TypeSearch/">TypeSearch</a>.</p>
<p>For example if we want to install lodash we can run the following command to get the typings for it:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev @types/lodash</code></pre>
<p>For more information see <a href="https://blogs.msdn.microsoft.com/typescript/2016/06/15/the-future-of-declaration-files/">this blog post</a>.</p>
<h2 id="importing-other-assets">Importing Other Assets<a href="#importing-other-assets" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>To use non-code assets with TypeScript, we need to defer the type for these imports. This requires a <code>custom.d.ts</code> file which signifies custom definitions for TypeScript in our project. Let's set up a declaration for <code>.svg</code> files:</p>
<p><strong>custom.d.ts</strong></p>
<pre><code class="hljs language-typescript"><span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">"*.svg"</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> content<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> content<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Here we declare a new module for SVGs by specifying any import that ends in <code>.svg</code> and defining the module's <code>content</code> as <code>any</code>. We could be more explicit about it being a url by defining the type as string. The same concept applies to other assets including CSS, SCSS, JSON and more.</p>
<h2 id="build-performance-1">Build Performance<a href="#build-performance-1" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<blockquote class="warning">
<p>This may degrade build performance.</p>
</blockquote>
<p>See the <a href="/guides/build-performance/">Build Performance</a> guide on build tooling.</p>
<h1 id="progressive-web-application">Progressive Web Application<a href="#progressive-web-application" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<blockquote class="tip">
<p>This guide extends on code examples found in the <a href="/guides/output-management">Output Management</a> guide.</p>
</blockquote>
<p>Progressive Web Applications (or PWAs) are web apps that deliver an experience similar to native applications. There are many things that can contribute to that. Of these, the most significant is the ability for an app to be able to function when <strong>offline</strong>. This is achieved through the use of a web technology called <a href="https://developers.google.com/web/fundamentals/primers/service-workers/">Service Workers</a>.</p>
<p>This section will focus on adding an offline experience to our app. We'll achieve this using a Google project called <a href="https://github.com/GoogleChrome/workbox">Workbox</a> which provides tools that help make offline support for web apps easier to setup.</p>
<h2 id="we-dont-work-offline-now">We Don't Work Offline Now<a href="#we-dont-work-offline-now" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>So far, we've been viewing the output by going directly to the local file system. Typically though, a real user accesses a web app over a network; their browser talking to a <strong>server</strong> which will serve up the required assets (e.g. <code>.html</code>, <code>.js</code>, and <code>.css</code> files).</p>
<p>So let's test what the current experience is like using a simple server. Let's use the <a href="https://www.npmjs.com/package/http-server">http-server</a> package: <code>npm install http-server --save-dev</code>. We'll also amend the <code>scripts</code> section of our <code>package.json</code> to add in a <code>start</code> script:</p>
<p><strong>package.json</strong></p>
<pre><code class="hljs language-diff">{
  ...
  "scripts": {
<span class="token deleted">-    "build": "webpack"</span>
<span class="token inserted">+    "build": "webpack",</span>
<span class="token inserted">+    "start": "http-server dist"</span>
  },
  ...
}</code></pre>
<p>Note: <a href="/configuration/dev-server/">webpack DevServer</a> writes in-memory by default. We'll need to enable <a href="/configuration/dev-server/#devserverwritetodisk-">writeToDisk</a> option in order for http-server to be able to serve files from <code>./dist</code> directory.</p>
<p>If you haven't previously done so, run the command <code>npm run build</code> to build your project. Then run the command <code>npm start</code>. This should produce the following output:</p>
<pre><code class="hljs language-bash"><span class="token operator">></span> http-server dist

Starting up http-server, serving dist
Available on:
  http://xx.x.x.x:8080
  http://127.0.0.1:8080
  http://xxx.xxx.x.x:8080
Hit CTRL-C to stop the server</code></pre>
<p>If you open your browser to <code>http://localhost:8080</code> (i.e. <code>http://127.0.0.1</code>) you should see your webpack application being served from the <code>dist</code> directory. If you stop the server and refresh, the webpack application is no longer available.</p>
<p>This is what we aim to change. Once we reach the end of this module we should be able to stop the server, hit refresh and still see our application.</p>
<h2 id="adding-workbox">Adding Workbox<a href="#adding-workbox" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Let's add the Workbox webpack plugin and adjust the <code>webpack.config.js</code> file:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> workbox-webpack-plugin --save-dev</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-diff">  const path = require('path');
  const HtmlWebpackPlugin = require('html-webpack-plugin');
  const { CleanWebpackPlugin } = require('clean-webpack-plugin');
<span class="token inserted">+ const WorkboxPlugin = require('workbox-webpack-plugin');</span>

  module.exports = {
    entry: {
      app: './src/index.js',
      print: './src/print.js',
    },
    plugins: [
      // new CleanWebpackPlugin(['dist/*']) for &#x3C; v2 versions of CleanWebpackPlugin
      new CleanWebpackPlugin(),
      new HtmlWebpackPlugin({
<span class="token deleted">-       title: 'Output Management',</span>
<span class="token inserted">+       title: 'Progressive Web Application',</span>
      }),
<span class="token inserted">+     new WorkboxPlugin.GenerateSW({</span>
<span class="token inserted">+       // these options encourage the ServiceWorkers to get in there fast</span>
<span class="token inserted">+       // and not allow any straggling "old" SWs to hang around</span>
<span class="token inserted">+       clientsClaim: true,</span>
<span class="token inserted">+       skipWaiting: true,</span>
<span class="token inserted">+     }),</span>
    ],
    output: {
      filename: '[name].bundle.js',
      path: path.resolve(__dirname, 'dist'),
    },
  };</code></pre>
<p>With that in place, let's see what happens when we do an <code>npm run build</code>:</p>
<pre><code class="hljs language-bash"><span class="token punctuation">..</span>.
                  Asset       Size  Chunks                    Chunk Names
          app.bundle.js     545 kB    0, 1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  app
        print.bundle.js    2.74 kB       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>         print
             index.html  254 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
precache-manifest.b5ca1c555e832d6fbf9462efd29d27eb.js  268 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
      service-worker.js       1 kB          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.</code></pre>
<p>As you can see, we now have 2 extra files being generated; <code>service-worker.js</code> and the more verbose <code>precache-manifest.b5ca1c555e832d6fbf9462efd29d27eb.js</code>. <code>service-worker.js</code> is the Service Worker file and <code>precache-manifest.b5ca1c555e832d6fbf9462efd29d27eb.js</code> is a file that <code>service-worker.js</code> requires so it can run. Your own generated files will likely be different; but you should have an <code>service-worker.js</code> file there.</p>
<p>So we're now at the happy point of having produced a Service Worker. What's next?</p>
<h2 id="registering-our-service-worker">Registering Our Service Worker<a href="#registering-our-service-worker" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Let's allow our Service Worker to come out and play by registering it. We'll do that by adding the registration code below:</p>
<p><strong>index.js</strong></p>
<pre><code class="hljs language-diff">  import _ from 'lodash';
  import printMe from './print.js';

<span class="token inserted">+ if ('serviceWorker' in navigator) {</span>
<span class="token inserted">+   window.addEventListener('load', () => {</span>
<span class="token inserted">+     navigator.serviceWorker.register('/service-worker.js').then(registration => {</span>
<span class="token inserted">+       console.log('SW registered: ', registration);</span>
<span class="token inserted">+     }).catch(registrationError => {</span>
<span class="token inserted">+       console.log('SW registration failed: ', registrationError);</span>
<span class="token inserted">+     });</span>
<span class="token inserted">+   });</span>
<span class="token inserted">+ }</span></code></pre>
<p>Once more <code>npm run build</code> to build a version of the app including the registration code. Then serve it with <code>npm start</code>. Navigate to <code>http://localhost:8080</code> and take a look at the console. Somewhere in there you should see:</p>
<pre><code class="hljs language-bash">SW registered</code></pre>
<p>Now to test it. Stop your server and refresh your page. If your browser supports Service Workers then you should still be looking at your application. However, it has been served up by your Service Worker and <strong>not</strong> by the server.</p>
<h2 id="conclusion-6">Conclusion<a href="#conclusion-6" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>You have built an offline app using the Workbox project. You've started the journey of turning your web app into a PWA. You may now want to think about taking things further. A good resource to help you with that can be found <a href="https://developers.google.com/web/progressive-web-apps/">here</a>.</p>
<h1 id="public-path">Public Path<a href="#public-path" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>The <code>publicPath</code> configuration option can be quite useful in a variety of scenarios. It allows you to specify the base path for all the assets within your application.</p>
<h2 id="use-cases">Use Cases<a href="#use-cases" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>There are a few use cases in real applications where this feature becomes especially neat. Essentially, every file emitted to your <code>output.path</code> directory will be referenced from the <code>output.publicPath</code> location. This includes child chunks (created via <a href="/guides/code-splitting/">code splitting</a>) and any other assets (e.g. images, fonts, etc.) that are a part of your dependency graph.</p>
<h3 id="environment-based">Environment Based<a href="#environment-based" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>In development for example, we might have an <code>assets/</code> folder that lives on the same level of our index page. This is fine, but what if we wanted to host all these static assets on a CDN in production?</p>
<p>To approach this problem you can easily use a good old environment variable. Let's say we have a variable <code>ASSET_PATH</code>:</p>
<pre><code class="hljs language-js"><span class="token keyword">import</span> webpack <span class="token keyword">from</span> <span class="token string">'webpack'</span><span class="token punctuation">;</span>

<span class="token comment">// Try the environment variable, otherwise use root</span>
<span class="token keyword">const</span> <span class="token constant">ASSET_PATH</span> <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ASSET_PATH</span> <span class="token operator">||</span> <span class="token string">'/'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    publicPath<span class="token punctuation">:</span> <span class="token constant">ASSET_PATH</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// This makes it possible for us to safely use env vars on our code</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token string">'process.env.ASSET_PATH'</span><span class="token punctuation">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token constant">ASSET_PATH</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h3 id="on-the-fly">On The Fly<a href="#on-the-fly" aria-hidden="true"><span class="icon icon-link"></span></a></h3>
<p>Another possible use case is to set the <code>publicPath</code> on the fly. webpack exposes a global variable called <code>__webpack_public_path__</code> that allows you to do that. So, in your application's entry point, you can simply do this:</p>
<pre><code class="hljs language-js">__webpack_public_path__ <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ASSET_PATH</span><span class="token punctuation">;</span></code></pre>
<p>That's all you need. Since we're already using the <code>DefinePlugin</code> on our
configuration, <code>process.env.ASSET_PATH</code> will always be defined so we can safely
do that.</p>
<blockquote class="warning">
<p>Be aware that if you use ES6 module imports in your entry file the <code>__webpack_public_path__</code> assignment will be done after the imports. In such cases, you'll have to move the public path assignment to its own dedicated module and then import it on top of your entry.js:</p>
</blockquote>
<pre><code class="hljs language-js"><span class="token comment">// entry.js</span>
<span class="token keyword">import</span> <span class="token string">'./public-path'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./app'</span><span class="token punctuation">;</span></code></pre>
<h1 id="integrations">Integrations<a href="#integrations" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<p>Let's start by clearing up a common misconception. webpack is a module bundler like <a href="http://browserify.org/">Browserify</a> or <a href="https://brunch.io/">Brunch</a>. It is <em>not a task runner</em> like <a href="https://www.gnu.org/software/make/">Make</a>, <a href="https://gruntjs.com/">Grunt</a>, or <a href="https://gulpjs.com/">Gulp</a>. Task runners handle automation of common development tasks such as linting, building, or testing your project. Compared to bundlers, task runners have a higher level focus. You can still benefit from their higher level tooling while leaving the problem of bundling to webpack.</p>
<p>Bundlers help you get your JavaScript and stylesheets ready for deployment, transforming them into a format that's suitable for the browser. For example, JavaScript can be <a href="/plugins/terser-webpack-plugin">minified</a> or <a href="/guides/code-splitting">split into chunks</a> and <a href="/guides/lazy-loading">lazy-loaded</a> to improve performance. Bundling is one of the most important challenges in web development, and solving it well can remove a lot of pain from the process.</p>
<p>The good news is that, while there is some overlap, task runners and bundlers can play well together if approached in the right way. This guide provides a high-level overview of how webpack can be integrated into some of the more popular task runners.</p>
<h2 id="npm-scripts-2">NPM Scripts<a href="#npm-scripts-2" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Often webpack users use npm <a href="https://docs.npmjs.com/misc/scripts"><code>scripts</code></a> as their task runner. This is a good starting point. Cross-platform support can become a problem, but there are several workarounds for that. Many, if not most users, get by with simple npm <code>scripts</code> and various levels of webpack configuration and tooling.</p>
<p>So while webpack's core focus is bundling, there are a variety of extensions that can enable you to use it for jobs typical of a task runner. Integrating a separate tool adds complexity, so be sure to weigh the pros and cons before going forward.</p>
<h2 id="grunt">Grunt<a href="#grunt" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>For those using Grunt, we recommend the <a href="https://www.npmjs.com/package/grunt-webpack"><code>grunt-webpack</code></a> package. With <code>grunt-webpack</code> you can run webpack or <a href="https://github.com/webpack/webpack-dev-server">webpack-dev-server</a> as a task, get access to stats within <a href="https://gruntjs.com/api/grunt.template">template tags</a>, split development and production configurations and more. Start by installing <code>grunt-webpack</code> as well as <code>webpack</code> itself if you haven't already:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev grunt-webpack webpack</code></pre>
<p>Then register a configuration and load the task:</p>
<p><strong>Gruntfile.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> webpackConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.config.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>grunt<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  grunt<span class="token punctuation">.</span><span class="token function">initConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    webpack<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        stats<span class="token punctuation">:</span> <span class="token operator">!</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">||</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      prod<span class="token punctuation">:</span> webpackConfig<span class="token punctuation">,</span>
      dev<span class="token punctuation">:</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span> watch<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> webpackConfig<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  grunt<span class="token punctuation">.</span><span class="token function">loadNpmTasks</span><span class="token punctuation">(</span><span class="token string">'grunt-webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>For more information, please visit the <a href="https://github.com/webpack-contrib/grunt-webpack">repository</a>.</p>
<h2 id="gulp">Gulp<a href="#gulp" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>Gulp is also a fairly straightforward integration with the help of the <a href="https://github.com/shama/webpack-stream"><code>webpack-stream</code></a> package (a.k.a. <code>gulp-webpack</code>). In this case, it is unnecessary to install <code>webpack</code> separately as it is a direct dependency of <code>webpack-stream</code>:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack-stream</code></pre>
<p>Just <code>require('webpack-stream')</code> instead of <code>webpack</code> and optionally pass it an configuration:</p>
<p><strong>gulpfile.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-stream'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'src/entry.js'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// Any configuration options...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'dist/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>For more information, please visit the <a href="https://github.com/shama/webpack-stream">repository</a>.</p>
<h2 id="mocha">Mocha<a href="#mocha" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The <a href="https://github.com/zinserjan/mocha-webpack"><code>mocha-webpack</code></a> utility can be used for a clean integration with Mocha. The repository offers more details on the pros and cons but essentially <code>mocha-webpack</code> is a simple wrapper that provides almost the same CLI as Mocha itself and provides various webpack functionality like an improved watch mode and improved path resolution. Here is a small example of how you would install it and use it to run a test suite (found within <code>./test</code>):</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack mocha mocha-webpack
mocha-webpack <span class="token string">'test/**/*.js'</span></code></pre>
<p>For more information, please visit the <a href="https://github.com/zinserjan/mocha-webpack">repository</a>.</p>
<h2 id="karma">Karma<a href="#karma" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>The <a href="https://github.com/webpack-contrib/karma-webpack"><code>karma-webpack</code></a> package allows you to use webpack to pre-process files in <a href="https://karma-runner.github.io/1.0/index.html">Karma</a>. It also makes use of <a href="https://github.com/webpack/webpack-dev-middleware"><code>webpack-dev-middleware</code></a> and allows passing configurations for both. A simple example may look something like this:</p>
<pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack karma karma-webpack</code></pre>
<p><strong>karma.conf.js</strong></p>
<pre><code class="hljs language-js">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  config<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    files<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> pattern<span class="token punctuation">:</span> <span class="token string">'test/*_test.js'</span><span class="token punctuation">,</span> watched<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> pattern<span class="token punctuation">:</span> <span class="token string">'test/**/*_test.js'</span><span class="token punctuation">,</span> watched<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    preprocessors<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">'test/*_test.js'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">'webpack'</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string">'test/**/*_test.js'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">'webpack'</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    webpack<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// Any custom webpack configuration...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    webpackMiddleware<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// Any custom webpack-dev-middleware configuration...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>For more information, please visit the <a href="https://github.com/webpack-contrib/karma-webpack">repository</a>.</p>
<h1 id="advanced-entry">Advanced entry<a href="#advanced-entry" aria-hidden="true"><span class="icon icon-link"></span></a></h1>
<h2 id="multiple-file-types-per-entry">Multiple file types per entry<a href="#multiple-file-types-per-entry" aria-hidden="true"><span class="icon icon-link"></span></a></h2>
<p>It is possible to provide different types of files when using an array of values for <a href="/configuration/entry-context/#entry">entry</a> to achieve separate bundles for CSS and JavaScript (and other) files in applications that are not using <code>import</code> for styles in JavaScript (pre Single Page Applications or different reasons).</p>
<p>Let's make an example. We have a PHP application with two page types: home and account. The home page has different layout and non-sharable JavaScript with the rest of the application (account page). We want to output <code>home.js</code> and <code>home.css</code> from our application files for the home page and <code>account.js</code> and <code>account.css</code> for account page.</p>
<p><strong>home.js</strong></p>
<pre><code class="hljs language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'home page type'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><strong>home.scss</strong></p>
<pre><code class="hljs language-scss">// home page individual styles
</code></pre>
<p><strong>account.js</strong></p>
<pre><code class="hljs language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'account page type'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><strong>account.scss</strong></p>
<pre><code class="hljs language-scss">// account page individual styles
</code></pre>
<p>We will use <a href="/plugins/mini-css-extract-plugin/">MiniCssExtractPlugin</a> in <code>production</code> mode for css as a best practice.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="hljs language-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">,</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    home<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'./home.js'</span><span class="token punctuation">,</span> <span class="token string">'./home.scss'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    account<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'./account.js'</span><span class="token punctuation">,</span> <span class="token string">'./account.scss'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token comment">// fallback to style-loader in development</span>
          process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span> <span class="token operator">?</span> <span class="token string">'style-loader'</span> <span class="token punctuation">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
          <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'sass-loader'</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token punctuation">:</span> <span class="token string">'[name].css'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>Running webpack with above config will output into <code>./dist</code> as we did not specify different output path. <code>./dist</code> directory will now contain four files:</p>
<ul>
<li>home.js</li>
<li>home.css</li>
<li>account.js</li>
<li>account.css</li>
</ul>
</div><div class="contributors__section"><hr/><h3>Contributors</h3><div class="contributors"><div class="contributors__list"><a class="contributor" href="https://github.com/webpack"><img alt="webpack" src="/cb0093496837d3dc43dfae5a9104d663.png"/><span class="contributor__name"> <!-- -->webpack</span></a></div></div></div></div></section><div class="gitter"><div class="gitter__button"><i class="gitter__icon icon-gitter"></i></div></div></div><footer class="footer"><div class="container footer__inner"><section class="footer__left"><a class="footer__link" href="/guides/getting-started/">Get Started</a><a class="footer__link" href="/organization/">Organization</a><a class="footer__link" href="/starter-kits/">Starter Kits</a><a class="footer__link" href="/comparison/">Comparison</a></section><section class="footer__middle"><a class="footer__icon" href="/"><img src="/d19378a95ebe6b15d5ddea281138dcf4.svg" alt="webpack icon"/></a></section><section class="footer__right"><a href="https://webpack.threadless.com/" target="_blank" rel="noopener" class="footer__link">Swag Store</a><a class="footer__link" href="/glossary/">Glossary</a><a class="footer__link" href="/branding/">Branding</a><a href="https://gitter.im/webpack/webpack" target="_blank" rel="noopener" class="footer__link">Gitter</a><a href="https://github.com/webpack/webpack/releases" target="_blank" rel="noopener" class="footer__link">Changelog</a><a class="footer__link footer__license" href="/license"><img alt="Creative Commons License" src="/7052446b5e67df4434f4031afd2f1497.svg"/><img alt="Creative Commons License" src="/7ebb1b3901ce119694f65e04f6347ef5.svg"/></a></section></div></footer></div></div><script>
window.matchMedia('print').addListener(function(mql) {
  if (!mql.matches) {
      window.close();
  }
});
window.print();
</script></body></html>